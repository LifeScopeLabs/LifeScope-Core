{
  "{\"filename\":\"/app/scripts/seed.js\",\"env\":{},\"retainLines\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"presets\":[],\"plugins\":[[[],null],[[],null],[[],{\"loose\":false}],[[],{\"spec\":false,\"loose\":false}],[[],{\"spec\":false,\"loose\":false}],[[],{\"spec\":false,\"loose\":false}],[[],{\"spec\":false,\"loose\":false}],[[],{\"spec\":false,\"loose\":false}],[[],{\"spec\":false,\"loose\":false}]],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"minified\":false,\"sourceRoot\":\"/app/scripts\",\"babelrc\":true,\"sourceType\":\"module\",\"moduleIds\":false,\"passPerPreset\":false,\"parserOpts\":false,\"generatorOpts\":false}:6.26.0": {
    "metadata": {
      "usedHelpers": [
        "asyncToGenerator",
        "interopRequireDefault"
      ],
      "marked": [],
      "modules": {
        "imports": [
          {
            "source": "mongodb",
            "imported": [
              "MongoClient"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "MongoClient",
                "local": "MongoClient"
              }
            ]
          },
          {
            "source": "path",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "path"
              }
            ]
          },
          {
            "source": "fs",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "fs"
              }
            ]
          }
        ],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      }
    },
    "options": {
      "filename": "/app/scripts/seed.js",
      "filenameRelative": "/app/scripts/seed.js",
      "env": {},
      "retainLines": false,
      "highlightCode": true,
      "suppressDeprecationMessages": false,
      "presets": [],
      "plugins": [
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ]
      ],
      "ignore": [],
      "code": true,
      "metadata": true,
      "ast": false,
      "comments": true,
      "compact": "auto",
      "minified": false,
      "sourceMaps": "both",
      "sourceMapTarget": "seed.js",
      "sourceFileName": "seed.js",
      "sourceRoot": "/app/scripts",
      "babelrc": false,
      "sourceType": "module",
      "moduleRoot": "/app/scripts",
      "moduleIds": false,
      "passPerPreset": false,
      "parserOpts": false,
      "generatorOpts": false,
      "basename": "seed"
    },
    "ignored": false,
    "code": "'use strict';\n\nlet run = (() => {\n  var _ref = _asyncToGenerator(function* () {\n    db = yield _mongodb.MongoClient.connect(process.env.MONGODB_URI, { promiseLibrary: Promise });\n\n    console.log(`Starting seed...`);\n\n    const seedFile = _path2.default.resolve('./schema/data/seed.js');\n    try {\n      yield new Promise(function (resolve, reject) {\n        _fs2.default.access(seedFile, _fs2.default.F_OK, function (err) {\n          if (err) reject(err);else resolve();\n        });\n      });\n\n      // $FlowFixMe\n      const seedFn = require(seedFile).default;\n      yield seedFn(db); // eslint-disable-line\n    } catch (e) {\n      if (e.code === 'MODULE_NOT_FOUND' || e.code === 'ENOENT') {\n        console.log(`  file '${seedFile}' not found. Skipping...`);\n      } else {\n        console.log(e);\n      }\n    }\n\n    console.log('Seed competed!');\n    db.close();\n  });\n\n  return function run() {\n    return _ref.apply(this, arguments);\n  };\n})();\n\nvar _mongodb = require('mongodb');\n\nvar _path = require('path');\n\nvar _path2 = _interopRequireDefault(_path);\n\nvar _fs = require('fs');\n\nvar _fs2 = _interopRequireDefault(_fs);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _asyncToGenerator(fn) { return function () { var gen = fn.apply(this, arguments); return new Promise(function (resolve, reject) { function step(key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { return Promise.resolve(value).then(function (value) { step(\"next\", value); }, function (err) { step(\"throw\", err); }); } } return step(\"next\"); }); }; }\n/* eslint-disable no-await-in-loop */\n// This script scans `schema/data` folder for `schema/data/seed.js` files and run them for seeding DB.\n\nlet db;\n\nrun().catch(e => {\n  console.log(e);\n  process.exit(0);\n});\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNlZWQuanMiXSwibmFtZXMiOlsiZGIiLCJjb25uZWN0IiwicHJvY2VzcyIsImVudiIsIk1PTkdPREJfVVJJIiwicHJvbWlzZUxpYnJhcnkiLCJQcm9taXNlIiwiY29uc29sZSIsImxvZyIsInNlZWRGaWxlIiwicmVzb2x2ZSIsInJlamVjdCIsImFjY2VzcyIsIkZfT0siLCJlcnIiLCJzZWVkRm4iLCJyZXF1aXJlIiwiZGVmYXVsdCIsImUiLCJjb2RlIiwiY2xvc2UiLCJydW4iLCJjYXRjaCIsImV4aXQiXSwibWFwcGluZ3MiOiI7OzsrQkFXQSxhQUFxQjtBQUNuQkEsU0FBSyxNQUFNLHFCQUFZQyxPQUFaLENBQW9CQyxRQUFRQyxHQUFSLENBQVlDLFdBQWhDLEVBQTZDLEVBQUVDLGdCQUFnQkMsT0FBbEIsRUFBN0MsQ0FBWDs7QUFFQUMsWUFBUUMsR0FBUixDQUFhLGtCQUFiOztBQUVBLFVBQU1DLFdBQVcsZUFBS0MsT0FBTCxDQUFhLHVCQUFiLENBQWpCO0FBQ0EsUUFBSTtBQUNGLFlBQU0sSUFBSUosT0FBSixDQUFZLFVBQUNJLE9BQUQsRUFBVUMsTUFBVixFQUFxQjtBQUNyQyxxQkFBR0MsTUFBSCxDQUFVSCxRQUFWLEVBQW9CLGFBQUdJLElBQXZCLEVBQTZCLGVBQU87QUFDbEMsY0FBSUMsR0FBSixFQUFTSCxPQUFPRyxHQUFQLEVBQVQsS0FDS0o7QUFDTixTQUhEO0FBSUQsT0FMSyxDQUFOOztBQU9BO0FBQ0EsWUFBTUssU0FBU0MsUUFBUVAsUUFBUixFQUFrQlEsT0FBakM7QUFDQSxZQUFNRixPQUFPZixFQUFQLENBQU4sQ0FWRSxDQVVnQjtBQUNuQixLQVhELENBV0UsT0FBT2tCLENBQVAsRUFBVTtBQUNWLFVBQUlBLEVBQUVDLElBQUYsS0FBVyxrQkFBWCxJQUFpQ0QsRUFBRUMsSUFBRixLQUFXLFFBQWhELEVBQTBEO0FBQ3hEWixnQkFBUUMsR0FBUixDQUFhLFdBQVVDLFFBQVMsMEJBQWhDO0FBQ0QsT0FGRCxNQUVPO0FBQ0xGLGdCQUFRQyxHQUFSLENBQVlVLENBQVo7QUFDRDtBQUNGOztBQUVEWCxZQUFRQyxHQUFSLENBQVksZ0JBQVo7QUFDQVIsT0FBR29CLEtBQUg7QUFDRCxHOztrQkEzQmNDLEc7Ozs7O0FBUGY7O0FBRUE7Ozs7QUFDQTs7Ozs7OztBQU5BO0FBQ0E7O0FBT0EsSUFBSXJCLEVBQUo7O0FBK0JBcUIsTUFBTUMsS0FBTixDQUFZSixLQUFLO0FBQ2ZYLFVBQVFDLEdBQVIsQ0FBWVUsQ0FBWjtBQUNBaEIsVUFBUXFCLElBQVIsQ0FBYSxDQUFiO0FBQ0QsQ0FIRCIsImZpbGUiOiJzZWVkLmpzIiwic291cmNlUm9vdCI6Ii9hcHAvc2NyaXB0cyIsInNvdXJjZXNDb250ZW50IjpbIi8qIEBmbG93ICovXG4vKiBlc2xpbnQtZGlzYWJsZSBuby1hd2FpdC1pbi1sb29wICovXG4vLyBUaGlzIHNjcmlwdCBzY2FucyBgc2NoZW1hL2RhdGFgIGZvbGRlciBmb3IgYHNjaGVtYS9kYXRhL3NlZWQuanNgIGZpbGVzIGFuZCBydW4gdGhlbSBmb3Igc2VlZGluZyBEQi5cblxuaW1wb3J0IHsgTW9uZ29DbGllbnQgfSBmcm9tICdtb25nb2RiJztcblxuaW1wb3J0IHBhdGggZnJvbSAncGF0aCc7XG5pbXBvcnQgZnMgZnJvbSAnZnMnO1xuXG5sZXQgZGI7XG5cbmFzeW5jIGZ1bmN0aW9uIHJ1bigpIHtcbiAgZGIgPSBhd2FpdCBNb25nb0NsaWVudC5jb25uZWN0KHByb2Nlc3MuZW52Lk1PTkdPREJfVVJJLCB7IHByb21pc2VMaWJyYXJ5OiBQcm9taXNlIH0pO1xuXG4gIGNvbnNvbGUubG9nKGBTdGFydGluZyBzZWVkLi4uYCk7XG5cbiAgY29uc3Qgc2VlZEZpbGUgPSBwYXRoLnJlc29sdmUoJy4vc2NoZW1hL2RhdGEvc2VlZC5qcycpO1xuICB0cnkge1xuICAgIGF3YWl0IG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgIGZzLmFjY2VzcyhzZWVkRmlsZSwgZnMuRl9PSywgZXJyID0+IHtcbiAgICAgICAgaWYgKGVycikgcmVqZWN0KGVycik7XG4gICAgICAgIGVsc2UgcmVzb2x2ZSgpO1xuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICAvLyAkRmxvd0ZpeE1lXG4gICAgY29uc3Qgc2VlZEZuID0gcmVxdWlyZShzZWVkRmlsZSkuZGVmYXVsdDtcbiAgICBhd2FpdCBzZWVkRm4oZGIpOyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lXG4gIH0gY2F0Y2ggKGUpIHtcbiAgICBpZiAoZS5jb2RlID09PSAnTU9EVUxFX05PVF9GT1VORCcgfHwgZS5jb2RlID09PSAnRU5PRU5UJykge1xuICAgICAgY29uc29sZS5sb2coYCAgZmlsZSAnJHtzZWVkRmlsZX0nIG5vdCBmb3VuZC4gU2tpcHBpbmcuLi5gKTtcbiAgICB9IGVsc2Uge1xuICAgICAgY29uc29sZS5sb2coZSk7XG4gICAgfVxuICB9XG5cbiAgY29uc29sZS5sb2coJ1NlZWQgY29tcGV0ZWQhJyk7XG4gIGRiLmNsb3NlKCk7XG59XG5cbnJ1bigpLmNhdGNoKGUgPT4ge1xuICBjb25zb2xlLmxvZyhlKTtcbiAgcHJvY2Vzcy5leGl0KDApO1xufSk7Il19",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "seed.js"
      ],
      "names": [
        "db",
        "connect",
        "process",
        "env",
        "MONGODB_URI",
        "promiseLibrary",
        "Promise",
        "console",
        "log",
        "seedFile",
        "resolve",
        "reject",
        "access",
        "F_OK",
        "err",
        "seedFn",
        "require",
        "default",
        "e",
        "code",
        "close",
        "run",
        "catch",
        "exit"
      ],
      "mappings": ";;;+BAWA,aAAqB;AACnBA,SAAK,MAAM,qBAAYC,OAAZ,CAAoBC,QAAQC,GAAR,CAAYC,WAAhC,EAA6C,EAAEC,gBAAgBC,OAAlB,EAA7C,CAAX;;AAEAC,YAAQC,GAAR,CAAa,kBAAb;;AAEA,UAAMC,WAAW,eAAKC,OAAL,CAAa,uBAAb,CAAjB;AACA,QAAI;AACF,YAAM,IAAIJ,OAAJ,CAAY,UAACI,OAAD,EAAUC,MAAV,EAAqB;AACrC,qBAAGC,MAAH,CAAUH,QAAV,EAAoB,aAAGI,IAAvB,EAA6B,eAAO;AAClC,cAAIC,GAAJ,EAASH,OAAOG,GAAP,EAAT,KACKJ;AACN,SAHD;AAID,OALK,CAAN;;AAOA;AACA,YAAMK,SAASC,QAAQP,QAAR,EAAkBQ,OAAjC;AACA,YAAMF,OAAOf,EAAP,CAAN,CAVE,CAUgB;AACnB,KAXD,CAWE,OAAOkB,CAAP,EAAU;AACV,UAAIA,EAAEC,IAAF,KAAW,kBAAX,IAAiCD,EAAEC,IAAF,KAAW,QAAhD,EAA0D;AACxDZ,gBAAQC,GAAR,CAAa,WAAUC,QAAS,0BAAhC;AACD,OAFD,MAEO;AACLF,gBAAQC,GAAR,CAAYU,CAAZ;AACD;AACF;;AAEDX,YAAQC,GAAR,CAAY,gBAAZ;AACAR,OAAGoB,KAAH;AACD,G;;kBA3BcC,G;;;;;AAPf;;AAEA;;;;AACA;;;;;;;AANA;AACA;;AAOA,IAAIrB,EAAJ;;AA+BAqB,MAAMC,KAAN,CAAYJ,KAAK;AACfX,UAAQC,GAAR,CAAYU,CAAZ;AACAhB,UAAQqB,IAAR,CAAa,CAAb;AACD,CAHD",
      "file": "seed.js",
      "sourceRoot": "/app/scripts",
      "sourcesContent": [
        "/* @flow */\n/* eslint-disable no-await-in-loop */\n// This script scans `schema/data` folder for `schema/data/seed.js` files and run them for seeding DB.\n\nimport { MongoClient } from 'mongodb';\n\nimport path from 'path';\nimport fs from 'fs';\n\nlet db;\n\nasync function run() {\n  db = await MongoClient.connect(process.env.MONGODB_URI, { promiseLibrary: Promise });\n\n  console.log(`Starting seed...`);\n\n  const seedFile = path.resolve('./schema/data/seed.js');\n  try {\n    await new Promise((resolve, reject) => {\n      fs.access(seedFile, fs.F_OK, err => {\n        if (err) reject(err);\n        else resolve();\n      });\n    });\n\n    // $FlowFixMe\n    const seedFn = require(seedFile).default;\n    await seedFn(db); // eslint-disable-line\n  } catch (e) {\n    if (e.code === 'MODULE_NOT_FOUND' || e.code === 'ENOENT') {\n      console.log(`  file '${seedFile}' not found. Skipping...`);\n    } else {\n      console.log(e);\n    }\n  }\n\n  console.log('Seed competed!');\n  db.close();\n}\n\nrun().catch(e => {\n  console.log(e);\n  process.exit(0);\n});"
      ]
    },
    "mtime": 1521190068267
  },
  "{\"filename\":\"/app/schema/data/seed.js\",\"env\":{},\"retainLines\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"presets\":[],\"plugins\":[[[],null],[[],null],[[],{\"loose\":false}],[[],{\"spec\":false,\"loose\":false}],[[],{\"spec\":false,\"loose\":false}],[[],{\"spec\":false,\"loose\":false}],[[],{\"spec\":false,\"loose\":false}],[[],{\"spec\":false,\"loose\":false}],[[],{\"spec\":false,\"loose\":false}]],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"minified\":false,\"sourceRoot\":\"/app/schema/data\",\"babelrc\":true,\"sourceType\":\"module\",\"moduleIds\":false,\"passPerPreset\":false,\"parserOpts\":false,\"generatorOpts\":false}:6.26.0": {
    "metadata": {
      "usedHelpers": [
        "asyncToGenerator",
        "interopRequireDefault"
      ],
      "marked": [],
      "modules": {
        "imports": [
          {
            "source": "fs",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "fs"
              }
            ]
          },
          {
            "source": "mongodb",
            "imported": [
              "ObjectID"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "ObjectID",
                "local": "ObjectID"
              }
            ]
          }
        ],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      }
    },
    "options": {
      "filename": "/app/schema/data/seed.js",
      "filenameRelative": "/app/schema/data/seed.js",
      "env": {},
      "retainLines": false,
      "highlightCode": true,
      "suppressDeprecationMessages": false,
      "presets": [],
      "plugins": [
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ]
      ],
      "ignore": [],
      "code": true,
      "metadata": true,
      "ast": false,
      "comments": true,
      "compact": "auto",
      "minified": false,
      "sourceMaps": "both",
      "sourceMapTarget": "seed.js",
      "sourceFileName": "seed.js",
      "sourceRoot": "/app/schema/data",
      "babelrc": false,
      "sourceType": "module",
      "moduleRoot": "/app/schema/data",
      "moduleIds": false,
      "passPerPreset": false,
      "parserOpts": false,
      "generatorOpts": false,
      "basename": "seed"
    },
    "ignored": false,
    "code": "'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _fs = require('fs');\n\nvar _fs2 = _interopRequireDefault(_fs);\n\nvar _mongodb = require('mongodb');\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _asyncToGenerator(fn) { return function () { var gen = fn.apply(this, arguments); return new Promise(function (resolve, reject) { function step(key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { return Promise.resolve(value).then(function (value) { step(\"next\", value); }, function (err) { step(\"throw\", err); }); } } return step(\"next\"); }); }; }\n\nconst collectionPrefix = 'user_';\n\nexports.default = (() => {\n  var _ref = _asyncToGenerator(function* (db) {\n    const files = ['users'];\n\n    const collectionNames = (yield db.listCollections().toArray()).map(function (o) {\n      return o.name;\n    });\n\n    return Promise.all(files.map(function (file) {\n      return _asyncToGenerator(function* () {\n        const colName = `${collectionPrefix || ''}${file}`;\n        const data = JSON.parse(_fs2.default.readFileSync(`${__dirname}/${file}.json`, 'utf8'));\n        data.forEach(function (d, i) {\n          data[i]._id = _mongodb.ObjectID.createFromHexString(data[i]._id);\n        });\n        if (collectionNames.indexOf(colName) > -1) {\n          console.log(`  '${colName}' dropped`);\n          yield db.dropCollection(colName);\n        }\n        const result = yield db.collection(colName).insertMany(data);\n        console.log(`  '${colName}' created with ${result.insertedCount} records`);\n      })();\n    }));\n  });\n\n  function seed(_x) {\n    return _ref.apply(this, arguments);\n  }\n\n  return seed;\n})();\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNlZWQuanMiXSwibmFtZXMiOlsiY29sbGVjdGlvblByZWZpeCIsImRiIiwiZmlsZXMiLCJjb2xsZWN0aW9uTmFtZXMiLCJsaXN0Q29sbGVjdGlvbnMiLCJ0b0FycmF5IiwibWFwIiwibyIsIm5hbWUiLCJQcm9taXNlIiwiYWxsIiwiY29sTmFtZSIsImZpbGUiLCJkYXRhIiwiSlNPTiIsInBhcnNlIiwicmVhZEZpbGVTeW5jIiwiX19kaXJuYW1lIiwiZm9yRWFjaCIsImQiLCJpIiwiX2lkIiwiY3JlYXRlRnJvbUhleFN0cmluZyIsImluZGV4T2YiLCJjb25zb2xlIiwibG9nIiwiZHJvcENvbGxlY3Rpb24iLCJyZXN1bHQiLCJjb2xsZWN0aW9uIiwiaW5zZXJ0TWFueSIsImluc2VydGVkQ291bnQiLCJzZWVkIl0sIm1hcHBpbmdzIjoiOzs7Ozs7QUFFQTs7OztBQUNBOzs7Ozs7QUFFQSxNQUFNQSxtQkFBbUIsT0FBekI7OzsrQkFFZSxXQUFvQkMsRUFBcEIsRUFBNkI7QUFDMUMsVUFBTUMsUUFBUSxDQUFDLE9BQUQsQ0FBZDs7QUFFQSxVQUFNQyxrQkFBa0IsQ0FBQyxNQUFNRixHQUFHRyxlQUFILEdBQXFCQyxPQUFyQixFQUFQLEVBQXVDQyxHQUF2QyxDQUEyQztBQUFBLGFBQUtDLEVBQUVDLElBQVA7QUFBQSxLQUEzQyxDQUF4Qjs7QUFFQSxXQUFPQyxRQUFRQyxHQUFSLENBQ0xSLE1BQU1JLEdBQU4sQ0FBVSxnQkFBUTtBQUNoQixhQUFPLGtCQUFDLGFBQWlCO0FBQ3ZCLGNBQU1LLFVBQVcsR0FBRVgsb0JBQW9CLEVBQUcsR0FBRVksSUFBSyxFQUFqRDtBQUNBLGNBQU1DLE9BQU9DLEtBQUtDLEtBQUwsQ0FBVyxhQUFHQyxZQUFILENBQWlCLEdBQUVDLFNBQVUsSUFBR0wsSUFBSyxPQUFyQyxFQUE2QyxNQUE3QyxDQUFYLENBQWI7QUFDQUMsYUFBS0ssT0FBTCxDQUFhLFVBQUNDLENBQUQsRUFBSUMsQ0FBSixFQUFVO0FBQ3JCUCxlQUFLTyxDQUFMLEVBQVFDLEdBQVIsR0FBYyxrQkFBU0MsbUJBQVQsQ0FBNkJULEtBQUtPLENBQUwsRUFBUUMsR0FBckMsQ0FBZDtBQUNELFNBRkQ7QUFHQSxZQUFJbEIsZ0JBQWdCb0IsT0FBaEIsQ0FBd0JaLE9BQXhCLElBQW1DLENBQUMsQ0FBeEMsRUFBMkM7QUFDekNhLGtCQUFRQyxHQUFSLENBQWEsTUFBS2QsT0FBUSxXQUExQjtBQUNBLGdCQUFNVixHQUFHeUIsY0FBSCxDQUFrQmYsT0FBbEIsQ0FBTjtBQUNEO0FBQ0QsY0FBTWdCLFNBQVMsTUFBTTFCLEdBQUcyQixVQUFILENBQWNqQixPQUFkLEVBQXVCa0IsVUFBdkIsQ0FBa0NoQixJQUFsQyxDQUFyQjtBQUNBVyxnQkFBUUMsR0FBUixDQUFhLE1BQUtkLE9BQVEsa0JBQWlCZ0IsT0FBT0csYUFBYyxVQUFoRTtBQUNELE9BWk0sR0FBUDtBQWFELEtBZEQsQ0FESyxDQUFQO0FBaUJELEc7O1dBdEI2QkMsSTs7OztTQUFBQSxJIiwiZmlsZSI6InNlZWQuanMiLCJzb3VyY2VSb290IjoiL2FwcC9zY2hlbWEvZGF0YSIsInNvdXJjZXNDb250ZW50IjpbIi8qIEBmbG93ICovXG5cbmltcG9ydCBmcyBmcm9tICdmcyc7XG5pbXBvcnQgeyBPYmplY3RJRCB9IGZyb20gJ21vbmdvZGInO1xuXG5jb25zdCBjb2xsZWN0aW9uUHJlZml4ID0gJ3VzZXJfJztcblxuZXhwb3J0IGRlZmF1bHQgYXN5bmMgZnVuY3Rpb24gc2VlZChkYjogYW55KSB7XG4gIGNvbnN0IGZpbGVzID0gWyd1c2VycyddO1xuXG4gIGNvbnN0IGNvbGxlY3Rpb25OYW1lcyA9IChhd2FpdCBkYi5saXN0Q29sbGVjdGlvbnMoKS50b0FycmF5KCkpLm1hcChvID0+IG8ubmFtZSk7XG5cbiAgcmV0dXJuIFByb21pc2UuYWxsKFxuICAgIGZpbGVzLm1hcChmaWxlID0+IHtcbiAgICAgIHJldHVybiAoYXN5bmMgZnVuY3Rpb24oKSB7XG4gICAgICAgIGNvbnN0IGNvbE5hbWUgPSBgJHtjb2xsZWN0aW9uUHJlZml4IHx8ICcnfSR7ZmlsZX1gO1xuICAgICAgICBjb25zdCBkYXRhID0gSlNPTi5wYXJzZShmcy5yZWFkRmlsZVN5bmMoYCR7X19kaXJuYW1lfS8ke2ZpbGV9Lmpzb25gLCAndXRmOCcpKTtcbiAgICAgICAgZGF0YS5mb3JFYWNoKChkLCBpKSA9PiB7XG4gICAgICAgICAgZGF0YVtpXS5faWQgPSBPYmplY3RJRC5jcmVhdGVGcm9tSGV4U3RyaW5nKGRhdGFbaV0uX2lkKTtcbiAgICAgICAgfSk7XG4gICAgICAgIGlmIChjb2xsZWN0aW9uTmFtZXMuaW5kZXhPZihjb2xOYW1lKSA+IC0xKSB7XG4gICAgICAgICAgY29uc29sZS5sb2coYCAgJyR7Y29sTmFtZX0nIGRyb3BwZWRgKTtcbiAgICAgICAgICBhd2FpdCBkYi5kcm9wQ29sbGVjdGlvbihjb2xOYW1lKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBkYi5jb2xsZWN0aW9uKGNvbE5hbWUpLmluc2VydE1hbnkoZGF0YSk7XG4gICAgICAgIGNvbnNvbGUubG9nKGAgICcke2NvbE5hbWV9JyBjcmVhdGVkIHdpdGggJHtyZXN1bHQuaW5zZXJ0ZWRDb3VudH0gcmVjb3Jkc2ApO1xuICAgICAgfSkoKTtcbiAgICB9KVxuICApO1xufSJdfQ==",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "seed.js"
      ],
      "names": [
        "collectionPrefix",
        "db",
        "files",
        "collectionNames",
        "listCollections",
        "toArray",
        "map",
        "o",
        "name",
        "Promise",
        "all",
        "colName",
        "file",
        "data",
        "JSON",
        "parse",
        "readFileSync",
        "__dirname",
        "forEach",
        "d",
        "i",
        "_id",
        "createFromHexString",
        "indexOf",
        "console",
        "log",
        "dropCollection",
        "result",
        "collection",
        "insertMany",
        "insertedCount",
        "seed"
      ],
      "mappings": ";;;;;;AAEA;;;;AACA;;;;;;AAEA,MAAMA,mBAAmB,OAAzB;;;+BAEe,WAAoBC,EAApB,EAA6B;AAC1C,UAAMC,QAAQ,CAAC,OAAD,CAAd;;AAEA,UAAMC,kBAAkB,CAAC,MAAMF,GAAGG,eAAH,GAAqBC,OAArB,EAAP,EAAuCC,GAAvC,CAA2C;AAAA,aAAKC,EAAEC,IAAP;AAAA,KAA3C,CAAxB;;AAEA,WAAOC,QAAQC,GAAR,CACLR,MAAMI,GAAN,CAAU,gBAAQ;AAChB,aAAO,kBAAC,aAAiB;AACvB,cAAMK,UAAW,GAAEX,oBAAoB,EAAG,GAAEY,IAAK,EAAjD;AACA,cAAMC,OAAOC,KAAKC,KAAL,CAAW,aAAGC,YAAH,CAAiB,GAAEC,SAAU,IAAGL,IAAK,OAArC,EAA6C,MAA7C,CAAX,CAAb;AACAC,aAAKK,OAAL,CAAa,UAACC,CAAD,EAAIC,CAAJ,EAAU;AACrBP,eAAKO,CAAL,EAAQC,GAAR,GAAc,kBAASC,mBAAT,CAA6BT,KAAKO,CAAL,EAAQC,GAArC,CAAd;AACD,SAFD;AAGA,YAAIlB,gBAAgBoB,OAAhB,CAAwBZ,OAAxB,IAAmC,CAAC,CAAxC,EAA2C;AACzCa,kBAAQC,GAAR,CAAa,MAAKd,OAAQ,WAA1B;AACA,gBAAMV,GAAGyB,cAAH,CAAkBf,OAAlB,CAAN;AACD;AACD,cAAMgB,SAAS,MAAM1B,GAAG2B,UAAH,CAAcjB,OAAd,EAAuBkB,UAAvB,CAAkChB,IAAlC,CAArB;AACAW,gBAAQC,GAAR,CAAa,MAAKd,OAAQ,kBAAiBgB,OAAOG,aAAc,UAAhE;AACD,OAZM,GAAP;AAaD,KAdD,CADK,CAAP;AAiBD,G;;WAtB6BC,I;;;;SAAAA,I",
      "file": "seed.js",
      "sourceRoot": "/app/schema/data",
      "sourcesContent": [
        "/* @flow */\n\nimport fs from 'fs';\nimport { ObjectID } from 'mongodb';\n\nconst collectionPrefix = 'user_';\n\nexport default async function seed(db: any) {\n  const files = ['users'];\n\n  const collectionNames = (await db.listCollections().toArray()).map(o => o.name);\n\n  return Promise.all(\n    files.map(file => {\n      return (async function() {\n        const colName = `${collectionPrefix || ''}${file}`;\n        const data = JSON.parse(fs.readFileSync(`${__dirname}/${file}.json`, 'utf8'));\n        data.forEach((d, i) => {\n          data[i]._id = ObjectID.createFromHexString(data[i]._id);\n        });\n        if (collectionNames.indexOf(colName) > -1) {\n          console.log(`  '${colName}' dropped`);\n          await db.dropCollection(colName);\n        }\n        const result = await db.collection(colName).insertMany(data);\n        console.log(`  '${colName}' created with ${result.insertedCount} records`);\n      })();\n    })\n  );\n}"
      ]
    },
    "mtime": 1521190125597
  },
  "{\"filename\":\"/app/server.js\",\"env\":{},\"retainLines\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"presets\":[],\"plugins\":[[[],null],[[],null],[[],{\"loose\":false}],[[],{\"spec\":false,\"loose\":false}],[[],{\"spec\":false,\"loose\":false}],[[],{\"spec\":false,\"loose\":false}],[[],{\"spec\":false,\"loose\":false}],[[],{\"spec\":false,\"loose\":false}],[[],{\"spec\":false,\"loose\":false}]],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"minified\":false,\"sourceRoot\":\"/app\",\"babelrc\":true,\"sourceType\":\"module\",\"moduleIds\":false,\"passPerPreset\":false,\"parserOpts\":false,\"generatorOpts\":false}:6.26.0": {
    "metadata": {
      "usedHelpers": [
        "interopRequireDefault"
      ],
      "marked": [],
      "modules": {
        "imports": [
          {
            "source": "body-parser",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "bodyParser"
              }
            ]
          },
          {
            "source": "cors",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "cors"
              }
            ]
          },
          {
            "source": "cookie-parser",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "cookieParser"
              }
            ]
          },
          {
            "source": "express",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "express"
              }
            ]
          },
          {
            "source": "graphql-playground-middleware-express",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "expressPlayground"
              }
            ]
          },
          {
            "source": "apollo-server-express",
            "imported": [
              "graphqlExpress",
              "graphiqlExpress"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "graphqlExpress",
                "local": "graphqlExpress"
              },
              {
                "kind": "named",
                "imported": "graphiqlExpress",
                "local": "graphiqlExpress"
              }
            ]
          },
          {
            "source": "mongoose",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "mongoose"
              }
            ]
          },
          {
            "source": "./middleware/cookie-authorization",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "cookieAuthorization"
              }
            ]
          },
          {
            "source": "./schema",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "lifescopeSchema"
              }
            ]
          }
        ],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      }
    },
    "options": {
      "filename": "/app/server.js",
      "filenameRelative": "/app/server.js",
      "env": {},
      "retainLines": false,
      "highlightCode": true,
      "suppressDeprecationMessages": false,
      "presets": [],
      "plugins": [
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ]
      ],
      "ignore": [],
      "code": true,
      "metadata": true,
      "ast": false,
      "comments": true,
      "compact": "auto",
      "minified": false,
      "sourceMaps": "both",
      "sourceMapTarget": "server.js",
      "sourceFileName": "server.js",
      "sourceRoot": "/app",
      "babelrc": false,
      "sourceType": "module",
      "moduleRoot": "/app",
      "moduleIds": false,
      "passPerPreset": false,
      "parserOpts": false,
      "generatorOpts": false,
      "basename": "server"
    },
    "ignored": false,
    "code": "'use strict';\n\nvar _bodyParser = require('body-parser');\n\nvar _bodyParser2 = _interopRequireDefault(_bodyParser);\n\nvar _cors = require('cors');\n\nvar _cors2 = _interopRequireDefault(_cors);\n\nvar _cookieParser = require('cookie-parser');\n\nvar _cookieParser2 = _interopRequireDefault(_cookieParser);\n\nvar _express = require('express');\n\nvar _express2 = _interopRequireDefault(_express);\n\nvar _graphqlPlaygroundMiddlewareExpress = require('graphql-playground-middleware-express');\n\nvar _graphqlPlaygroundMiddlewareExpress2 = _interopRequireDefault(_graphqlPlaygroundMiddlewareExpress);\n\nvar _apolloServerExpress = require('apollo-server-express');\n\nvar _mongoose = require('mongoose');\n\nvar _mongoose2 = _interopRequireDefault(_mongoose);\n\nvar _cookieAuthorization = require('./middleware/cookie-authorization');\n\nvar _cookieAuthorization2 = _interopRequireDefault(_cookieAuthorization);\n\nvar _schema = require('./schema');\n\nvar _schema2 = _interopRequireDefault(_schema);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nconst MONGODB_URI = process.env.MONGODB_URI;\n\nconst Schema = _mongoose2.default.Schema;\nconst server = (0, _express2.default)();\nconst opts = {\n  autoReconnect: true,\n  reconnectTries: Number.MAX_VALUE,\n  reconnectInterval: 1000\n};\n\nserver.use((0, _cors2.default)());\n\n_mongoose2.default.connect(MONGODB_URI, opts);\n\nconst mongooseConnect = _mongoose2.default.connection;\n\nmongooseConnect.on('error', e => {\n  if (e.message.code === 'ETIMEDOUT') {\n    console.log(e);\n    _mongoose2.default.connect(MONGODB_URI, opts);\n  }\n  console.log(e);\n});\n\nmongooseConnect.once('open', () => {\n  console.log(`MongoDB successfully connected to ${MONGODB_URI}`);\n});\n\nserver.use(_schema2.default.uri, _bodyParser2.default.json(), (0, _cookieParser2.default)(), _cookieAuthorization2.default, (0, _apolloServerExpress.graphqlExpress)({\n  schema: _schema2.default.schema,\n  tracing: true,\n  // formatError: error => ({\n  //   message: error.message,\n  //   stack: !error.message.match(/for security reason/i) ? error.stack.split('\\n') : null,\n  // }),\n  formatError: error => ({\n    message: error.message,\n    locations: error.locations,\n    stack: error.stack ? error.stack.split('\\n') : [],\n    path: error.path\n  })\n}));\n\n// http://localhost:3000/gql-i/\nserver.get(`${_schema2.default.uri}-i`, (0, _apolloServerExpress.graphiqlExpress)({ endpointURL: _schema2.default.uri }));\n\n// http://localhost:3000/gql-p/\nserver.get(`${_schema2.default.uri}-p`, (0, _graphqlPlaygroundMiddlewareExpress2.default)({ endpoint: _schema2.default.uri }));\n\n// http://localhost:3000/user/\nserver.listen(process.env.PORT);\n\nconsole.log('PORT: ' + process.env.PORT);\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNlcnZlci5qcyJdLCJuYW1lcyI6WyJNT05HT0RCX1VSSSIsInByb2Nlc3MiLCJlbnYiLCJTY2hlbWEiLCJzZXJ2ZXIiLCJvcHRzIiwiYXV0b1JlY29ubmVjdCIsInJlY29ubmVjdFRyaWVzIiwiTnVtYmVyIiwiTUFYX1ZBTFVFIiwicmVjb25uZWN0SW50ZXJ2YWwiLCJ1c2UiLCJjb25uZWN0IiwibW9uZ29vc2VDb25uZWN0IiwiY29ubmVjdGlvbiIsIm9uIiwiZSIsIm1lc3NhZ2UiLCJjb2RlIiwiY29uc29sZSIsImxvZyIsIm9uY2UiLCJ1cmkiLCJqc29uIiwic2NoZW1hIiwidHJhY2luZyIsImZvcm1hdEVycm9yIiwiZXJyb3IiLCJsb2NhdGlvbnMiLCJzdGFjayIsInNwbGl0IiwicGF0aCIsImdldCIsImVuZHBvaW50VVJMIiwiZW5kcG9pbnQiLCJsaXN0ZW4iLCJQT1JUIl0sIm1hcHBpbmdzIjoiOztBQUFBOzs7O0FBQ0E7Ozs7QUFDQTs7OztBQUNBOzs7O0FBQ0E7Ozs7QUFDQTs7QUFDQTs7OztBQUVBOzs7O0FBQ0E7Ozs7OztBQUVBLE1BQU1BLGNBQWNDLFFBQVFDLEdBQVIsQ0FBWUYsV0FBaEM7O0FBRUEsTUFBTUcsU0FBUyxtQkFBU0EsTUFBeEI7QUFDQSxNQUFNQyxTQUFTLHdCQUFmO0FBQ0EsTUFBTUMsT0FBTztBQUNYQyxpQkFBZSxJQURKO0FBRVhDLGtCQUFnQkMsT0FBT0MsU0FGWjtBQUdYQyxxQkFBbUI7QUFIUixDQUFiOztBQU1BTixPQUFPTyxHQUFQLENBQVcscUJBQVg7O0FBRUEsbUJBQVNDLE9BQVQsQ0FBaUJaLFdBQWpCLEVBQThCSyxJQUE5Qjs7QUFFQSxNQUFNUSxrQkFBa0IsbUJBQVNDLFVBQWpDOztBQUVBRCxnQkFBZ0JFLEVBQWhCLENBQW1CLE9BQW5CLEVBQTRCQyxLQUFLO0FBQy9CLE1BQUlBLEVBQUVDLE9BQUYsQ0FBVUMsSUFBVixLQUFtQixXQUF2QixFQUFvQztBQUNsQ0MsWUFBUUMsR0FBUixDQUFZSixDQUFaO0FBQ0EsdUJBQVNKLE9BQVQsQ0FBaUJaLFdBQWpCLEVBQThCSyxJQUE5QjtBQUNEO0FBQ0RjLFVBQVFDLEdBQVIsQ0FBWUosQ0FBWjtBQUNELENBTkQ7O0FBUUFILGdCQUFnQlEsSUFBaEIsQ0FBcUIsTUFBckIsRUFBNkIsTUFBTTtBQUNqQ0YsVUFBUUMsR0FBUixDQUFhLHFDQUFvQ3BCLFdBQVksRUFBN0Q7QUFDRCxDQUZEOztBQUlBSSxPQUFPTyxHQUFQLENBQ0UsaUJBQWdCVyxHQURsQixFQUVFLHFCQUFXQyxJQUFYLEVBRkYsRUFHRSw2QkFIRixpQ0FLRSx5Q0FBZTtBQUNiQyxVQUFRLGlCQUFnQkEsTUFEWDtBQUViQyxXQUFTLElBRkk7QUFHYjtBQUNBO0FBQ0E7QUFDQTtBQUNBQyxlQUFhQyxVQUFVO0FBQ3JCVixhQUFTVSxNQUFNVixPQURNO0FBRXJCVyxlQUFXRCxNQUFNQyxTQUZJO0FBR3JCQyxXQUFPRixNQUFNRSxLQUFOLEdBQWNGLE1BQU1FLEtBQU4sQ0FBWUMsS0FBWixDQUFrQixJQUFsQixDQUFkLEdBQXdDLEVBSDFCO0FBSXJCQyxVQUFNSixNQUFNSTtBQUpTLEdBQVY7QUFQQSxDQUFmLENBTEY7O0FBb0JBO0FBQ0EzQixPQUFPNEIsR0FBUCxDQUFZLEdBQUUsaUJBQWdCVixHQUFJLElBQWxDLEVBQXVDLDBDQUFnQixFQUFFVyxhQUFhLGlCQUFnQlgsR0FBL0IsRUFBaEIsQ0FBdkM7O0FBRUE7QUFDQWxCLE9BQU80QixHQUFQLENBQVksR0FBRSxpQkFBZ0JWLEdBQUksSUFBbEMsRUFBdUMsa0RBQWtCLEVBQUVZLFVBQVUsaUJBQWdCWixHQUE1QixFQUFsQixDQUF2Qzs7QUFFQTtBQUNBbEIsT0FBTytCLE1BQVAsQ0FBY2xDLFFBQVFDLEdBQVIsQ0FBWWtDLElBQTFCOztBQUVBakIsUUFBUUMsR0FBUixDQUFZLFdBQVduQixRQUFRQyxHQUFSLENBQVlrQyxJQUFuQyIsImZpbGUiOiJzZXJ2ZXIuanMiLCJzb3VyY2VSb290IjoiL2FwcCIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBib2R5UGFyc2VyIGZyb20gJ2JvZHktcGFyc2VyJztcbmltcG9ydCBjb3JzIGZyb20gJ2NvcnMnO1xuaW1wb3J0IGNvb2tpZVBhcnNlciBmcm9tICdjb29raWUtcGFyc2VyJztcbmltcG9ydCBleHByZXNzIGZyb20gJ2V4cHJlc3MnO1xuaW1wb3J0IGV4cHJlc3NQbGF5Z3JvdW5kIGZyb20gJ2dyYXBocWwtcGxheWdyb3VuZC1taWRkbGV3YXJlLWV4cHJlc3MnO1xuaW1wb3J0IHsgZ3JhcGhxbEV4cHJlc3MsIGdyYXBoaXFsRXhwcmVzcyB9IGZyb20gJ2Fwb2xsby1zZXJ2ZXItZXhwcmVzcyc7XG5pbXBvcnQgbW9uZ29vc2UgZnJvbSAnbW9uZ29vc2UnO1xuXG5pbXBvcnQgY29va2llQXV0aG9yaXphdGlvbiBmcm9tICcuL21pZGRsZXdhcmUvY29va2llLWF1dGhvcml6YXRpb24nO1xuaW1wb3J0IGxpZmVzY29wZVNjaGVtYSBmcm9tICcuL3NjaGVtYSc7XG5cbmNvbnN0IE1PTkdPREJfVVJJID0gcHJvY2Vzcy5lbnYuTU9OR09EQl9VUkk7XG5cbmNvbnN0IFNjaGVtYSA9IG1vbmdvb3NlLlNjaGVtYTtcbmNvbnN0IHNlcnZlciA9IGV4cHJlc3MoKTtcbmNvbnN0IG9wdHMgPSB7XG4gIGF1dG9SZWNvbm5lY3Q6IHRydWUsXG4gIHJlY29ubmVjdFRyaWVzOiBOdW1iZXIuTUFYX1ZBTFVFLFxuICByZWNvbm5lY3RJbnRlcnZhbDogMTAwMCxcbn07XG5cbnNlcnZlci51c2UoY29ycygpKTtcblxubW9uZ29vc2UuY29ubmVjdChNT05HT0RCX1VSSSwgb3B0cyk7XG5cbmNvbnN0IG1vbmdvb3NlQ29ubmVjdCA9IG1vbmdvb3NlLmNvbm5lY3Rpb247XG5cbm1vbmdvb3NlQ29ubmVjdC5vbignZXJyb3InLCBlID0+IHtcbiAgaWYgKGUubWVzc2FnZS5jb2RlID09PSAnRVRJTUVET1VUJykge1xuICAgIGNvbnNvbGUubG9nKGUpO1xuICAgIG1vbmdvb3NlLmNvbm5lY3QoTU9OR09EQl9VUkksIG9wdHMpO1xuICB9XG4gIGNvbnNvbGUubG9nKGUpO1xufSk7XG5cbm1vbmdvb3NlQ29ubmVjdC5vbmNlKCdvcGVuJywgKCkgPT4ge1xuICBjb25zb2xlLmxvZyhgTW9uZ29EQiBzdWNjZXNzZnVsbHkgY29ubmVjdGVkIHRvICR7TU9OR09EQl9VUkl9YCk7XG59KTtcblxuc2VydmVyLnVzZShcbiAgbGlmZXNjb3BlU2NoZW1hLnVyaSwgXG4gIGJvZHlQYXJzZXIuanNvbigpLCBcbiAgY29va2llUGFyc2VyKCksXG4gIGNvb2tpZUF1dGhvcml6YXRpb24sXG4gIGdyYXBocWxFeHByZXNzKHsgXG4gICAgc2NoZW1hOiBsaWZlc2NvcGVTY2hlbWEuc2NoZW1hLCBcbiAgICB0cmFjaW5nOiB0cnVlLFxuICAgIC8vIGZvcm1hdEVycm9yOiBlcnJvciA9PiAoe1xuICAgIC8vICAgbWVzc2FnZTogZXJyb3IubWVzc2FnZSxcbiAgICAvLyAgIHN0YWNrOiAhZXJyb3IubWVzc2FnZS5tYXRjaCgvZm9yIHNlY3VyaXR5IHJlYXNvbi9pKSA/IGVycm9yLnN0YWNrLnNwbGl0KCdcXG4nKSA6IG51bGwsXG4gICAgLy8gfSksXG4gICAgZm9ybWF0RXJyb3I6IGVycm9yID0+ICh7XG4gICAgICBtZXNzYWdlOiBlcnJvci5tZXNzYWdlLFxuICAgICAgbG9jYXRpb25zOiBlcnJvci5sb2NhdGlvbnMsXG4gICAgICBzdGFjazogZXJyb3Iuc3RhY2sgPyBlcnJvci5zdGFjay5zcGxpdCgnXFxuJykgOiBbXSxcbiAgICAgIHBhdGg6IGVycm9yLnBhdGhcbiAgICB9KVxuICB9KSk7XG5cbi8vIGh0dHA6Ly9sb2NhbGhvc3Q6MzAwMC9ncWwtaS9cbnNlcnZlci5nZXQoYCR7bGlmZXNjb3BlU2NoZW1hLnVyaX0taWAsIGdyYXBoaXFsRXhwcmVzcyh7IGVuZHBvaW50VVJMOiBsaWZlc2NvcGVTY2hlbWEudXJpIH0pKTtcblxuLy8gaHR0cDovL2xvY2FsaG9zdDozMDAwL2dxbC1wL1xuc2VydmVyLmdldChgJHtsaWZlc2NvcGVTY2hlbWEudXJpfS1wYCwgZXhwcmVzc1BsYXlncm91bmQoeyBlbmRwb2ludDogbGlmZXNjb3BlU2NoZW1hLnVyaSB9KSk7XG5cbi8vIGh0dHA6Ly9sb2NhbGhvc3Q6MzAwMC91c2VyL1xuc2VydmVyLmxpc3Rlbihwcm9jZXNzLmVudi5QT1JUKTtcblxuY29uc29sZS5sb2coJ1BPUlQ6ICcgKyBwcm9jZXNzLmVudi5QT1JUKTtcbiJdfQ==",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "server.js"
      ],
      "names": [
        "MONGODB_URI",
        "process",
        "env",
        "Schema",
        "server",
        "opts",
        "autoReconnect",
        "reconnectTries",
        "Number",
        "MAX_VALUE",
        "reconnectInterval",
        "use",
        "connect",
        "mongooseConnect",
        "connection",
        "on",
        "e",
        "message",
        "code",
        "console",
        "log",
        "once",
        "uri",
        "json",
        "schema",
        "tracing",
        "formatError",
        "error",
        "locations",
        "stack",
        "split",
        "path",
        "get",
        "endpointURL",
        "endpoint",
        "listen",
        "PORT"
      ],
      "mappings": ";;AAAA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;AACA;;;;AAEA;;;;AACA;;;;;;AAEA,MAAMA,cAAcC,QAAQC,GAAR,CAAYF,WAAhC;;AAEA,MAAMG,SAAS,mBAASA,MAAxB;AACA,MAAMC,SAAS,wBAAf;AACA,MAAMC,OAAO;AACXC,iBAAe,IADJ;AAEXC,kBAAgBC,OAAOC,SAFZ;AAGXC,qBAAmB;AAHR,CAAb;;AAMAN,OAAOO,GAAP,CAAW,qBAAX;;AAEA,mBAASC,OAAT,CAAiBZ,WAAjB,EAA8BK,IAA9B;;AAEA,MAAMQ,kBAAkB,mBAASC,UAAjC;;AAEAD,gBAAgBE,EAAhB,CAAmB,OAAnB,EAA4BC,KAAK;AAC/B,MAAIA,EAAEC,OAAF,CAAUC,IAAV,KAAmB,WAAvB,EAAoC;AAClCC,YAAQC,GAAR,CAAYJ,CAAZ;AACA,uBAASJ,OAAT,CAAiBZ,WAAjB,EAA8BK,IAA9B;AACD;AACDc,UAAQC,GAAR,CAAYJ,CAAZ;AACD,CAND;;AAQAH,gBAAgBQ,IAAhB,CAAqB,MAArB,EAA6B,MAAM;AACjCF,UAAQC,GAAR,CAAa,qCAAoCpB,WAAY,EAA7D;AACD,CAFD;;AAIAI,OAAOO,GAAP,CACE,iBAAgBW,GADlB,EAEE,qBAAWC,IAAX,EAFF,EAGE,6BAHF,iCAKE,yCAAe;AACbC,UAAQ,iBAAgBA,MADX;AAEbC,WAAS,IAFI;AAGb;AACA;AACA;AACA;AACAC,eAAaC,UAAU;AACrBV,aAASU,MAAMV,OADM;AAErBW,eAAWD,MAAMC,SAFI;AAGrBC,WAAOF,MAAME,KAAN,GAAcF,MAAME,KAAN,CAAYC,KAAZ,CAAkB,IAAlB,CAAd,GAAwC,EAH1B;AAIrBC,UAAMJ,MAAMI;AAJS,GAAV;AAPA,CAAf,CALF;;AAoBA;AACA3B,OAAO4B,GAAP,CAAY,GAAE,iBAAgBV,GAAI,IAAlC,EAAuC,0CAAgB,EAAEW,aAAa,iBAAgBX,GAA/B,EAAhB,CAAvC;;AAEA;AACAlB,OAAO4B,GAAP,CAAY,GAAE,iBAAgBV,GAAI,IAAlC,EAAuC,kDAAkB,EAAEY,UAAU,iBAAgBZ,GAA5B,EAAlB,CAAvC;;AAEA;AACAlB,OAAO+B,MAAP,CAAclC,QAAQC,GAAR,CAAYkC,IAA1B;;AAEAjB,QAAQC,GAAR,CAAY,WAAWnB,QAAQC,GAAR,CAAYkC,IAAnC",
      "file": "server.js",
      "sourceRoot": "/app",
      "sourcesContent": [
        "import bodyParser from 'body-parser';\nimport cors from 'cors';\nimport cookieParser from 'cookie-parser';\nimport express from 'express';\nimport expressPlayground from 'graphql-playground-middleware-express';\nimport { graphqlExpress, graphiqlExpress } from 'apollo-server-express';\nimport mongoose from 'mongoose';\n\nimport cookieAuthorization from './middleware/cookie-authorization';\nimport lifescopeSchema from './schema';\n\nconst MONGODB_URI = process.env.MONGODB_URI;\n\nconst Schema = mongoose.Schema;\nconst server = express();\nconst opts = {\n  autoReconnect: true,\n  reconnectTries: Number.MAX_VALUE,\n  reconnectInterval: 1000,\n};\n\nserver.use(cors());\n\nmongoose.connect(MONGODB_URI, opts);\n\nconst mongooseConnect = mongoose.connection;\n\nmongooseConnect.on('error', e => {\n  if (e.message.code === 'ETIMEDOUT') {\n    console.log(e);\n    mongoose.connect(MONGODB_URI, opts);\n  }\n  console.log(e);\n});\n\nmongooseConnect.once('open', () => {\n  console.log(`MongoDB successfully connected to ${MONGODB_URI}`);\n});\n\nserver.use(\n  lifescopeSchema.uri, \n  bodyParser.json(), \n  cookieParser(),\n  cookieAuthorization,\n  graphqlExpress({ \n    schema: lifescopeSchema.schema, \n    tracing: true,\n    // formatError: error => ({\n    //   message: error.message,\n    //   stack: !error.message.match(/for security reason/i) ? error.stack.split('\\n') : null,\n    // }),\n    formatError: error => ({\n      message: error.message,\n      locations: error.locations,\n      stack: error.stack ? error.stack.split('\\n') : [],\n      path: error.path\n    })\n  }));\n\n// http://localhost:3000/gql-i/\nserver.get(`${lifescopeSchema.uri}-i`, graphiqlExpress({ endpointURL: lifescopeSchema.uri }));\n\n// http://localhost:3000/gql-p/\nserver.get(`${lifescopeSchema.uri}-p`, expressPlayground({ endpoint: lifescopeSchema.uri }));\n\n// http://localhost:3000/user/\nserver.listen(process.env.PORT);\n\nconsole.log('PORT: ' + process.env.PORT);\n"
      ]
    },
    "mtime": 1521579547044
  },
  "{\"filename\":\"/app/schema/index.js\",\"env\":{},\"retainLines\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"presets\":[],\"plugins\":[[[],null],[[],null],[[],{\"loose\":false}],[[],{\"spec\":false,\"loose\":false}],[[],{\"spec\":false,\"loose\":false}],[[],{\"spec\":false,\"loose\":false}],[[],{\"spec\":false,\"loose\":false}],[[],{\"spec\":false,\"loose\":false}],[[],{\"spec\":false,\"loose\":false}]],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"minified\":false,\"sourceRoot\":\"/app/schema\",\"babelrc\":true,\"sourceType\":\"module\",\"moduleIds\":false,\"passPerPreset\":false,\"parserOpts\":false,\"generatorOpts\":false}:6.26.0": {
    "metadata": {
      "usedHelpers": [
        "interopRequireDefault"
      ],
      "marked": [],
      "modules": {
        "imports": [
          {
            "source": "./schema",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "schema"
              }
            ]
          }
        ],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      }
    },
    "options": {
      "filename": "/app/schema/index.js",
      "filenameRelative": "/app/schema/index.js",
      "env": {},
      "retainLines": false,
      "highlightCode": true,
      "suppressDeprecationMessages": false,
      "presets": [],
      "plugins": [
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ]
      ],
      "ignore": [],
      "code": true,
      "metadata": true,
      "ast": false,
      "comments": true,
      "compact": "auto",
      "minified": false,
      "sourceMaps": "both",
      "sourceMapTarget": "index.js",
      "sourceFileName": "index.js",
      "sourceRoot": "/app/schema",
      "babelrc": false,
      "sourceType": "module",
      "moduleRoot": "/app/schema",
      "moduleIds": false,
      "passPerPreset": false,
      "parserOpts": false,
      "generatorOpts": false,
      "basename": "index"
    },
    "ignored": false,
    "code": "'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _schema = require('./schema');\n\nvar _schema2 = _interopRequireDefault(_schema);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nconst queries = [{\n  title: 'Find by id',\n  query: `\n{\n  userById(_id: \"57bb44dd21d2befb7ca3f010\") {\n    _id\n    name\n    languages {\n      language\n      skill\n    }\n    contacts {\n      email\n    }\n    gender\n    age\n  }\n}\n      `\n}, {\n  title: 'Find one User',\n  query: `\n{\n  userOne(filter: { age: 18 }, sort: _ID_ASC) {\n    name\n    languages {\n      language\n      skill\n    }\n    contacts {\n      email\n    }\n    gender\n    age\n  }\n}\n      `\n}, {\n  title: 'Find many Users',\n  query: `\n{\n  userMany(filter: { gender: male }, limit: 5, sort: _ID_ASC) {\n    name\n    languages {\n      language\n      skill\n    }\n    contacts {\n      email\n    }\n    gender\n    age\n  }\n}\n      `\n}, {\n  title: 'Find many Users (by geo distance)',\n  query: `\n{\n  distance_5_km: userMany(filter: {\n    geoDistance: {\n      lng: 76.911982,\n      lat: 43.233893,\n      distance: 5000,\n    }\n  }) {\n    name\n    address {\n      geo\n    }\n  }\n  distance_100_km: userMany(filter: {\n    geoDistance: {\n      lng: 76.911982,\n      lat: 43.233893,\n      distance: 100000,\n    }\n  }) {\n    name\n    address {\n      geo\n    }\n  }\n}\n      `\n}, {\n  title: 'Find User with field of MIXED type',\n  query: `\n{\n  userById(_id: \"57bb44dd21d2befb7ca3f001\") {\n    _id\n    name\n    someMixed\n  }\n}\n      `\n}, {\n  title: 'Create user mutation (with arg of MIXED type)',\n  query: `\nmutation {\n  userCreate(record: {\n    name: \"My Name\",\n    age: 24,\n    gender: ladyboy,\n    contacts: {\n      email: \"mail@example.com\",\n      phones: [\n        \"111-222-333-444\",\n        \"444-555-666-777\"\n      ]\n    },\n    someMixed: {\n      a: 1,\n      b: 2,\n      c: [ 1, 2, 3, true, false, { sub: 1 }]\n    }\n  }) {\n    recordId\n    record {\n      name\n      age\n      gender\n      contacts {\n        email\n        phones\n      }\n      someMixed\n    }\n  }\n}\n      `\n}, {\n  title: 'Pagination',\n  query: `\n{\n  userPagination(filter: { gender: male }, perPage: 2, page: 2, sort: _ID_ASC) {\n    items {\n      name\n      languages {\n        language\n        skill\n      }\n      contacts {\n        email\n      }\n      gender\n      age\n    }\n    count\n    pageInfo {\n      currentPage\n      perPage\n      itemCount\n      pageCount\n      hasPreviousPage\n      hasNextPage\n    }\n  }\n}\n      `\n}];\n\nexports.default = {\n  uri: '/gql',\n  schema: _schema2.default,\n  title: 'LifeScope GraphQL API',\n  description: 'This schema implements all data collected, organized, and analyzed by the LifeScope platform',\n  github: 'https://github.com/bitscooplabs/lifescope',\n  queries: queries\n};\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImluZGV4LmpzIl0sIm5hbWVzIjpbInF1ZXJpZXMiLCJ0aXRsZSIsInF1ZXJ5IiwidXJpIiwic2NoZW1hIiwiZGVzY3JpcHRpb24iLCJnaXRodWIiXSwibWFwcGluZ3MiOiI7Ozs7OztBQUVBOzs7Ozs7QUFFQSxNQUFNQSxVQUFVLENBQ1o7QUFDRUMsU0FBTyxZQURUO0FBRUVDLFNBQVE7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBRlYsQ0FEWSxFQXFCWjtBQUNFRCxTQUFPLGVBRFQ7QUFFRUMsU0FBUTs7Ozs7Ozs7Ozs7Ozs7OztBQUZWLENBckJZLEVBd0NaO0FBQ0VELFNBQU8saUJBRFQ7QUFFRUMsU0FBUTs7Ozs7Ozs7Ozs7Ozs7OztBQUZWLENBeENZLEVBMkRaO0FBQ0VELFNBQU8sbUNBRFQ7QUFFRUMsU0FBUTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUZWLENBM0RZLEVBMEZaO0FBQ0VELFNBQU8sb0NBRFQ7QUFFRUMsU0FBUTs7Ozs7Ozs7O0FBRlYsQ0ExRlksRUFzR1o7QUFDRUQsU0FBTywrQ0FEVDtBQUVFQyxTQUFROzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFGVixDQXRHWSxFQTBJWjtBQUNFRCxTQUFPLFlBRFQ7QUFFRUMsU0FBUTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBRlYsQ0ExSVksQ0FBaEI7O2tCQTJLZTtBQUNiQyxPQUFLLE1BRFE7QUFFYkMsMEJBRmE7QUFHYkgsU0FBTyx1QkFITTtBQUliSSxlQUNFLDhGQUxXO0FBTWJDLFVBQVEsMkNBTks7QUFPYk4sV0FBU0E7QUFQSSxDIiwiZmlsZSI6ImluZGV4LmpzIiwic291cmNlUm9vdCI6Ii9hcHAvc2NoZW1hIiwic291cmNlc0NvbnRlbnQiOlsiLyogQGZsb3cgKi9cblxuaW1wb3J0IHNjaGVtYSBmcm9tICcuL3NjaGVtYSc7XG5cbmNvbnN0IHF1ZXJpZXMgPSBbXG4gICAge1xuICAgICAgdGl0bGU6ICdGaW5kIGJ5IGlkJyxcbiAgICAgIHF1ZXJ5OiBgXG57XG4gIHVzZXJCeUlkKF9pZDogXCI1N2JiNDRkZDIxZDJiZWZiN2NhM2YwMTBcIikge1xuICAgIF9pZFxuICAgIG5hbWVcbiAgICBsYW5ndWFnZXMge1xuICAgICAgbGFuZ3VhZ2VcbiAgICAgIHNraWxsXG4gICAgfVxuICAgIGNvbnRhY3RzIHtcbiAgICAgIGVtYWlsXG4gICAgfVxuICAgIGdlbmRlclxuICAgIGFnZVxuICB9XG59XG4gICAgICBgLFxuICAgIH0sXG4gICAge1xuICAgICAgdGl0bGU6ICdGaW5kIG9uZSBVc2VyJyxcbiAgICAgIHF1ZXJ5OiBgXG57XG4gIHVzZXJPbmUoZmlsdGVyOiB7IGFnZTogMTggfSwgc29ydDogX0lEX0FTQykge1xuICAgIG5hbWVcbiAgICBsYW5ndWFnZXMge1xuICAgICAgbGFuZ3VhZ2VcbiAgICAgIHNraWxsXG4gICAgfVxuICAgIGNvbnRhY3RzIHtcbiAgICAgIGVtYWlsXG4gICAgfVxuICAgIGdlbmRlclxuICAgIGFnZVxuICB9XG59XG4gICAgICBgLFxuICAgIH0sXG4gICAge1xuICAgICAgdGl0bGU6ICdGaW5kIG1hbnkgVXNlcnMnLFxuICAgICAgcXVlcnk6IGBcbntcbiAgdXNlck1hbnkoZmlsdGVyOiB7IGdlbmRlcjogbWFsZSB9LCBsaW1pdDogNSwgc29ydDogX0lEX0FTQykge1xuICAgIG5hbWVcbiAgICBsYW5ndWFnZXMge1xuICAgICAgbGFuZ3VhZ2VcbiAgICAgIHNraWxsXG4gICAgfVxuICAgIGNvbnRhY3RzIHtcbiAgICAgIGVtYWlsXG4gICAgfVxuICAgIGdlbmRlclxuICAgIGFnZVxuICB9XG59XG4gICAgICBgLFxuICAgIH0sXG4gICAge1xuICAgICAgdGl0bGU6ICdGaW5kIG1hbnkgVXNlcnMgKGJ5IGdlbyBkaXN0YW5jZSknLFxuICAgICAgcXVlcnk6IGBcbntcbiAgZGlzdGFuY2VfNV9rbTogdXNlck1hbnkoZmlsdGVyOiB7XG4gICAgZ2VvRGlzdGFuY2U6IHtcbiAgICAgIGxuZzogNzYuOTExOTgyLFxuICAgICAgbGF0OiA0My4yMzM4OTMsXG4gICAgICBkaXN0YW5jZTogNTAwMCxcbiAgICB9XG4gIH0pIHtcbiAgICBuYW1lXG4gICAgYWRkcmVzcyB7XG4gICAgICBnZW9cbiAgICB9XG4gIH1cbiAgZGlzdGFuY2VfMTAwX2ttOiB1c2VyTWFueShmaWx0ZXI6IHtcbiAgICBnZW9EaXN0YW5jZToge1xuICAgICAgbG5nOiA3Ni45MTE5ODIsXG4gICAgICBsYXQ6IDQzLjIzMzg5MyxcbiAgICAgIGRpc3RhbmNlOiAxMDAwMDAsXG4gICAgfVxuICB9KSB7XG4gICAgbmFtZVxuICAgIGFkZHJlc3Mge1xuICAgICAgZ2VvXG4gICAgfVxuICB9XG59XG4gICAgICBgLFxuICAgIH0sXG4gICAge1xuICAgICAgdGl0bGU6ICdGaW5kIFVzZXIgd2l0aCBmaWVsZCBvZiBNSVhFRCB0eXBlJyxcbiAgICAgIHF1ZXJ5OiBgXG57XG4gIHVzZXJCeUlkKF9pZDogXCI1N2JiNDRkZDIxZDJiZWZiN2NhM2YwMDFcIikge1xuICAgIF9pZFxuICAgIG5hbWVcbiAgICBzb21lTWl4ZWRcbiAgfVxufVxuICAgICAgYCxcbiAgICB9LFxuICAgIHtcbiAgICAgIHRpdGxlOiAnQ3JlYXRlIHVzZXIgbXV0YXRpb24gKHdpdGggYXJnIG9mIE1JWEVEIHR5cGUpJyxcbiAgICAgIHF1ZXJ5OiBgXG5tdXRhdGlvbiB7XG4gIHVzZXJDcmVhdGUocmVjb3JkOiB7XG4gICAgbmFtZTogXCJNeSBOYW1lXCIsXG4gICAgYWdlOiAyNCxcbiAgICBnZW5kZXI6IGxhZHlib3ksXG4gICAgY29udGFjdHM6IHtcbiAgICAgIGVtYWlsOiBcIm1haWxAZXhhbXBsZS5jb21cIixcbiAgICAgIHBob25lczogW1xuICAgICAgICBcIjExMS0yMjItMzMzLTQ0NFwiLFxuICAgICAgICBcIjQ0NC01NTUtNjY2LTc3N1wiXG4gICAgICBdXG4gICAgfSxcbiAgICBzb21lTWl4ZWQ6IHtcbiAgICAgIGE6IDEsXG4gICAgICBiOiAyLFxuICAgICAgYzogWyAxLCAyLCAzLCB0cnVlLCBmYWxzZSwgeyBzdWI6IDEgfV1cbiAgICB9XG4gIH0pIHtcbiAgICByZWNvcmRJZFxuICAgIHJlY29yZCB7XG4gICAgICBuYW1lXG4gICAgICBhZ2VcbiAgICAgIGdlbmRlclxuICAgICAgY29udGFjdHMge1xuICAgICAgICBlbWFpbFxuICAgICAgICBwaG9uZXNcbiAgICAgIH1cbiAgICAgIHNvbWVNaXhlZFxuICAgIH1cbiAgfVxufVxuICAgICAgYCxcbiAgICB9LFxuICAgIHtcbiAgICAgIHRpdGxlOiAnUGFnaW5hdGlvbicsXG4gICAgICBxdWVyeTogYFxue1xuICB1c2VyUGFnaW5hdGlvbihmaWx0ZXI6IHsgZ2VuZGVyOiBtYWxlIH0sIHBlclBhZ2U6IDIsIHBhZ2U6IDIsIHNvcnQ6IF9JRF9BU0MpIHtcbiAgICBpdGVtcyB7XG4gICAgICBuYW1lXG4gICAgICBsYW5ndWFnZXMge1xuICAgICAgICBsYW5ndWFnZVxuICAgICAgICBza2lsbFxuICAgICAgfVxuICAgICAgY29udGFjdHMge1xuICAgICAgICBlbWFpbFxuICAgICAgfVxuICAgICAgZ2VuZGVyXG4gICAgICBhZ2VcbiAgICB9XG4gICAgY291bnRcbiAgICBwYWdlSW5mbyB7XG4gICAgICBjdXJyZW50UGFnZVxuICAgICAgcGVyUGFnZVxuICAgICAgaXRlbUNvdW50XG4gICAgICBwYWdlQ291bnRcbiAgICAgIGhhc1ByZXZpb3VzUGFnZVxuICAgICAgaGFzTmV4dFBhZ2VcbiAgICB9XG4gIH1cbn1cbiAgICAgIGAsXG4gICAgfSxcbiAgXVxuXG5cbmV4cG9ydCBkZWZhdWx0IHtcbiAgdXJpOiAnL2dxbCcsXG4gIHNjaGVtYSxcbiAgdGl0bGU6ICdMaWZlU2NvcGUgR3JhcGhRTCBBUEknLFxuICBkZXNjcmlwdGlvbjpcbiAgICAnVGhpcyBzY2hlbWEgaW1wbGVtZW50cyBhbGwgZGF0YSBjb2xsZWN0ZWQsIG9yZ2FuaXplZCwgYW5kIGFuYWx5emVkIGJ5IHRoZSBMaWZlU2NvcGUgcGxhdGZvcm0nLFxuICBnaXRodWI6ICdodHRwczovL2dpdGh1Yi5jb20vYml0c2Nvb3BsYWJzL2xpZmVzY29wZScsXG4gIHF1ZXJpZXM6IHF1ZXJpZXMsXG59OyJdfQ==",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "index.js"
      ],
      "names": [
        "queries",
        "title",
        "query",
        "uri",
        "schema",
        "description",
        "github"
      ],
      "mappings": ";;;;;;AAEA;;;;;;AAEA,MAAMA,UAAU,CACZ;AACEC,SAAO,YADT;AAEEC,SAAQ;;;;;;;;;;;;;;;;;AAFV,CADY,EAqBZ;AACED,SAAO,eADT;AAEEC,SAAQ;;;;;;;;;;;;;;;;AAFV,CArBY,EAwCZ;AACED,SAAO,iBADT;AAEEC,SAAQ;;;;;;;;;;;;;;;;AAFV,CAxCY,EA2DZ;AACED,SAAO,mCADT;AAEEC,SAAQ;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAFV,CA3DY,EA0FZ;AACED,SAAO,oCADT;AAEEC,SAAQ;;;;;;;;;AAFV,CA1FY,EAsGZ;AACED,SAAO,+CADT;AAEEC,SAAQ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAFV,CAtGY,EA0IZ;AACED,SAAO,YADT;AAEEC,SAAQ;;;;;;;;;;;;;;;;;;;;;;;;;;;AAFV,CA1IY,CAAhB;;kBA2Ke;AACbC,OAAK,MADQ;AAEbC,0BAFa;AAGbH,SAAO,uBAHM;AAIbI,eACE,8FALW;AAMbC,UAAQ,2CANK;AAObN,WAASA;AAPI,C",
      "file": "index.js",
      "sourceRoot": "/app/schema",
      "sourcesContent": [
        "/* @flow */\n\nimport schema from './schema';\n\nconst queries = [\n    {\n      title: 'Find by id',\n      query: `\n{\n  userById(_id: \"57bb44dd21d2befb7ca3f010\") {\n    _id\n    name\n    languages {\n      language\n      skill\n    }\n    contacts {\n      email\n    }\n    gender\n    age\n  }\n}\n      `,\n    },\n    {\n      title: 'Find one User',\n      query: `\n{\n  userOne(filter: { age: 18 }, sort: _ID_ASC) {\n    name\n    languages {\n      language\n      skill\n    }\n    contacts {\n      email\n    }\n    gender\n    age\n  }\n}\n      `,\n    },\n    {\n      title: 'Find many Users',\n      query: `\n{\n  userMany(filter: { gender: male }, limit: 5, sort: _ID_ASC) {\n    name\n    languages {\n      language\n      skill\n    }\n    contacts {\n      email\n    }\n    gender\n    age\n  }\n}\n      `,\n    },\n    {\n      title: 'Find many Users (by geo distance)',\n      query: `\n{\n  distance_5_km: userMany(filter: {\n    geoDistance: {\n      lng: 76.911982,\n      lat: 43.233893,\n      distance: 5000,\n    }\n  }) {\n    name\n    address {\n      geo\n    }\n  }\n  distance_100_km: userMany(filter: {\n    geoDistance: {\n      lng: 76.911982,\n      lat: 43.233893,\n      distance: 100000,\n    }\n  }) {\n    name\n    address {\n      geo\n    }\n  }\n}\n      `,\n    },\n    {\n      title: 'Find User with field of MIXED type',\n      query: `\n{\n  userById(_id: \"57bb44dd21d2befb7ca3f001\") {\n    _id\n    name\n    someMixed\n  }\n}\n      `,\n    },\n    {\n      title: 'Create user mutation (with arg of MIXED type)',\n      query: `\nmutation {\n  userCreate(record: {\n    name: \"My Name\",\n    age: 24,\n    gender: ladyboy,\n    contacts: {\n      email: \"mail@example.com\",\n      phones: [\n        \"111-222-333-444\",\n        \"444-555-666-777\"\n      ]\n    },\n    someMixed: {\n      a: 1,\n      b: 2,\n      c: [ 1, 2, 3, true, false, { sub: 1 }]\n    }\n  }) {\n    recordId\n    record {\n      name\n      age\n      gender\n      contacts {\n        email\n        phones\n      }\n      someMixed\n    }\n  }\n}\n      `,\n    },\n    {\n      title: 'Pagination',\n      query: `\n{\n  userPagination(filter: { gender: male }, perPage: 2, page: 2, sort: _ID_ASC) {\n    items {\n      name\n      languages {\n        language\n        skill\n      }\n      contacts {\n        email\n      }\n      gender\n      age\n    }\n    count\n    pageInfo {\n      currentPage\n      perPage\n      itemCount\n      pageCount\n      hasPreviousPage\n      hasNextPage\n    }\n  }\n}\n      `,\n    },\n  ]\n\n\nexport default {\n  uri: '/gql',\n  schema,\n  title: 'LifeScope GraphQL API',\n  description:\n    'This schema implements all data collected, organized, and analyzed by the LifeScope platform',\n  github: 'https://github.com/bitscooplabs/lifescope',\n  queries: queries,\n};"
      ]
    },
    "mtime": 1521579512210
  },
  "{\"filename\":\"/app/schema/schema.js\",\"env\":{},\"retainLines\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"presets\":[],\"plugins\":[[[],null],[[],null],[[],{\"loose\":false}],[[],{\"spec\":false,\"loose\":false}],[[],{\"spec\":false,\"loose\":false}],[[],{\"spec\":false,\"loose\":false}],[[],{\"spec\":false,\"loose\":false}],[[],{\"spec\":false,\"loose\":false}],[[],{\"spec\":false,\"loose\":false}]],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"minified\":false,\"sourceRoot\":\"/app/schema\",\"babelrc\":true,\"sourceType\":\"module\",\"moduleIds\":false,\"passPerPreset\":false,\"parserOpts\":false,\"generatorOpts\":false}:6.26.0": {
    "metadata": {
      "usedHelpers": [
        "interopRequireDefault"
      ],
      "marked": [],
      "modules": {
        "imports": [
          {
            "source": "graphql-compose",
            "imported": [
              "SchemaComposer",
              "TypeMapper"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "SchemaComposer",
                "local": "SchemaComposer"
              },
              {
                "kind": "named",
                "imported": "TypeMapper",
                "local": "TypeMapper"
              }
            ]
          },
          {
            "source": "./types/uuid",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "uuid"
              }
            ]
          },
          {
            "source": "./models/session",
            "imported": [
              "SessionTC"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "SessionTC",
                "local": "SessionTC"
              }
            ]
          },
          {
            "source": "./models/user",
            "imported": [
              "UserTC"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "UserTC",
                "local": "UserTC"
              }
            ]
          }
        ],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      }
    },
    "options": {
      "filename": "/app/schema/schema.js",
      "filenameRelative": "/app/schema/schema.js",
      "env": {},
      "retainLines": false,
      "highlightCode": true,
      "suppressDeprecationMessages": false,
      "presets": [],
      "plugins": [
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ]
      ],
      "ignore": [],
      "code": true,
      "metadata": true,
      "ast": false,
      "comments": true,
      "compact": "auto",
      "minified": false,
      "sourceMaps": "both",
      "sourceMapTarget": "schema.js",
      "sourceFileName": "schema.js",
      "sourceRoot": "/app/schema",
      "babelrc": false,
      "sourceType": "module",
      "moduleRoot": "/app/schema",
      "moduleIds": false,
      "passPerPreset": false,
      "parserOpts": false,
      "generatorOpts": false,
      "basename": "schema"
    },
    "ignored": false,
    "code": "'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _graphqlCompose = require('graphql-compose');\n\nvar _uuid = require('./types/uuid');\n\nvar _uuid2 = _interopRequireDefault(_uuid);\n\nvar _session = require('./models/session');\n\nvar _user = require('./models/user');\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n// import { ConnectionTC } from './models/connections';\n// import { ContactTC } from './models/contacts';\n// import { ContentTC } from './models/content';\n// import { EventTC } from './models/events';\n// import { LocationTC } from './models/locations';\n// import { ProviderTC } from './models/providers';\n// import { SearchTC } from './models/searches';\nconst GQC = new _graphqlCompose.SchemaComposer();\n// import { TagTC } from './models/tags';\n// import { ThingTC } from './models/things';\n\n_graphqlCompose.TypeMapper.set('UUID', _uuid2.default);\nconsole.log(_graphqlCompose.TypeMapper);\nconsole.log(_graphqlCompose.TypeMapper.get('UUID'));\n// const typeComposer = new TypeComposer();\n\n// console.log(typeComposer);\n\n// create GraphQL Schema with all available resolvers\nGQC.rootQuery().addFields({\n  //Connections\n  //   connectionById: ConnectionTC.getResolver('findById'),\n  //   connectionByIds: ConnectionTC.getResolver('findByIds'),\n  //   connectionOne: ConnectionTC.getResolver('findOne'),\n  //   connectionMany: ConnectionTC.getResolver('findMany'),\n  //   connectionTotal: ConnectionTC.getResolver('count'),\n  //   connectionConnection: ConnectionTC.getResolver('connection'),\n  //   connectionPagination: ConnectionTC.getResolver('pagination'),\n\n  //   //Contacts\n  //   contactById: ContactTC.getResolver('findById'),\n  //   contactByIds: ContactTC.getResolver('findByIds'),\n  //   contactOne: ContactTC.getResolver('findOne'),\n  //   contactMany: ContactTC.getResolver('findMany'),\n  //   contactTotal: ContactTC.getResolver('count'),\n  //   contactConnection: ContactTC.getResolver('connection'),\n  //   contactPagination: ContactTC.getResolver('pagination'),\n\n  //   //Content\n  //   contentById: ContentTC.getResolver('findById'),\n  //   contentByIds: ContentTC.getResolver('findByIds'),\n  //   contentOne: ContentTC.getResolver('findOne'),\n  //   contentMany: ContentTC.getResolver('findMany'),\n  //   contentTotal: ContentTC.getResolver('count'),\n  //   contentConnection: ContentTC.getResolver('connection'),\n  //   contentPagination: ContentTC.getResolver('pagination'),\n\n  //   //Events\n  //   eventById: EventTC.getResolver('findById'),\n  //   eventByIds: EventTC.getResolver('findByIds'),\n  //   eventOne: EventTC.getResolver('findOne'),\n  //   eventMany: EventTC.getResolver('findMany'),\n  //   eventTotal: EventTC.getResolver('count'),\n  //   eventConnection: EventTC.getResolver('connection'),\n  //   eventPagination: EventTC.getResolver('pagination'),\n\n  //   //Locations\n  //   locationById: LocationTC.getResolver('findById'),\n  //   locationByIds: LocationTC.getResolver('findByIds'),\n  //   locationOne: LocationTC.getResolver('findOne'),\n  //   locationMany: LocationTC.getResolver('findMany'),\n  //   locationTotal: LocationTC.getResolver('count'),\n  //   locationConnection: LocationTC.getResolver('connection'),\n  //   locationPagination: LocationTC.getResolver('pagination'),\n\n  //   //Providers\n  //   providerById: ProviderTC.getResolver('findById'),\n  //   providerByIds: ProviderTC.getResolver('findByIds'),\n  //   providerOne: ProviderTC.getResolver('findOne'),\n  //   providerMany: ProviderTC.getResolver('findMany'),\n  //   providerTotal: ProviderTC.getResolver('count'),\n  //   providerConnection: ProviderTC.getResolver('connection'),\n  //   providerPagination: ProviderTC.getResolver('pagination'),\n\n  //   //Searches\n  //   searchById: SearchTC.getResolver('findById'),\n  //   searchByIds: SearchTC.getResolver('findByIds'),\n  //   searchOne: SearchTC.getResolver('findOne'),\n  //   searchMany: SearchTC.getResolver('findMany'),\n  //   searchTotal: SearchTC.getResolver('count'),\n  //   searchConnection: SearchTC.getResolver('connection'),\n  //   searchPagination: SearchTC.getResolver('pagination'),\n\n  //   //Session\n  //   sessionById: SessionTC.getResolver('findById'),\n  //   sessionByIds: SessionTC.getResolver('findByIds'),\n  //   sessionOne: SessionTC.getResolver('findOne'),\n  sessionMany: _session.SessionTC.getResolver('findMany'),\n  //   sessionTotal: SessionTC.getResolver('count'),\n  //   sessionConnection: SessionTC.getResolver('connection'),\n  //   sessionPagination: SessionTC.getResolver('pagination'),\n\n  //   //Tags\n  //   tagById: TagTC.getResolver('findById'),\n  //   tagByIds: TagTC.getResolver('findByIds'),\n  //   tagOne: TagTC.getResolver('findOne'),\n  //   tagMany: TagTC.getResolver('findMany'),\n  //   tagTotal: TagTC.getResolver('count'),\n  //   tagConnection: TagTC.getResolver('connection'),\n  //   tagPagination: TagTC.getResolver('pagination'),\n  //  // /Things\n  //   // ngById: ThingTC.getResolver('findById'),\n  //   // ngByIds: ThingTC.getResolver('findByIds'),\n  //   // ngOne: ThingTC.getResolver('findOne'),\n  //   // ngMany: ThingTC.getResolver('findMany'),\n  //   // ngTotal: ThingTC.getResolver('count'),\n  //   // ngConnection: ThingTC.getResolver('connection'),\n  //   // ngPagination: ThingTC.getResolver('pagination'),?\n\n  //Users\n  userById: _user.UserTC.getResolver('findById'),\n  userByIds: _user.UserTC.getResolver('findByIds'),\n  userOne: _user.UserTC.getResolver('findOne'),\n  userMany: _user.UserTC.getResolver('findMany'), // .debug(), // debug info to console for this resolver\n  userTotal: _user.UserTC.getResolver('count'),\n  userConnection: _user.UserTC.getResolver('connection'),\n  userPagination: _user.UserTC.getResolver('pagination')\n\n});\n// For debug purposes you may display resolver internals in the following manner:\n// console.log(UserTC.getResolver('findMany').toString());\n\nGQC.rootMutation().addFields({\n\n  /*\n  // Connections\n  connectionCreate: ConnectionTC.getResolver('createOne'),\n  connectionUpdateById: ConnectionTC.getResolver('updateById'),\n  connectionUpdateOne: ConnectionTC.getResolver('updateOne'),\n  connectionUpdateMany: ConnectionTC.getResolver('updateMany'),\n  connectionRemoveById: ConnectionTC.getResolver('removeById'),\n  connectionRemoveOne: ConnectionTC.getResolver('removeOne'),\n  connectionRemoveMany: ConnectionTC.getResolver('removeMany'),\n  \n  // Contacts\n  contactCreate: ContactTC.getResolver('createOne'),\n  contactUpdateById: ContactTC.getResolver('updateById'),\n  contactUpdateOne: ContactTC.getResolver('updateOne'),\n  contactUpdateMany: ContactTC.getResolver('updateMany'),\n  contactRemoveById: ContactTC.getResolver('removeById'),\n  contactRemoveOne: ContactTC.getResolver('removeOne'),\n  contactRemoveMany: ContactTC.getResolver('removeMany'),\n  \n  // Content\n  contentCreate: ContentTC.getResolver('createOne'),\n  contentUpdateById: ContentTC.getResolver('updateById'),\n  contentUpdateOne: ContentTC.getResolver('updateOne'),\n  contentUpdateMany: ContentTC.getResolver('updateMany'),\n  contentRemoveById: ContentTC.getResolver('removeById'),\n  contentRemoveOne: ContentTC.getResolver('removeOne'),\n  contentRemoveMany: ContentTC.getResolver('removeMany'),\n  \n  // Events\n  eventCreate: EventTC.getResolver('createOne'),\n  eventUpdateById: EventTC.getResolver('updateById'),\n  eventUpdateOne: EventTC.getResolver('updateOne'),\n  eventUpdateMany: EventTC.getResolver('updateMany'),\n  eventRemoveById: EventTC.getResolver('removeById'),\n  eventRemoveOne: EventTC.getResolver('removeOne'),\n  eventRemoveMany: EventTC.getResolver('removeMany'),\n  \n  // Locations\n  locationCreate: LocationTC.getResolver('createOne'),\n  locationUpdateById: LocationTC.getResolver('updateById'),\n  locationUpdateOne: LocationTC.getResolver('updateOne'),\n  locationUpdateMany: LocationTC.getResolver('updateMany'),\n  locationRemoveById: LocationTC.getResolver('removeById'),\n  locationRemoveOne: LocationTC.getResolver('removeOne'),\n  locationRemoveMany: LocationTC.getResolver('removeMany'),\n  \n  // Providers\n  providerCreate: ProviderTC.getResolver('createOne'),\n  providerUpdateById: ProviderTC.getResolver('updateById'),\n  providerUpdateOne: ProviderTC.getResolver('updateOne'),\n  providerUpdateMany: ProviderTC.getResolver('updateMany'),\n  providerRemoveById: ProviderTC.getResolver('removeById'),\n  providerRemoveOne: ProviderTC.getResolver('removeOne'),\n  providerRemoveMany: ProviderTC.getResolver('removeMany'),\n  \n  // Searches\n  searchCreate: SearchTC.getResolver('createOne'),\n  searchUpdateById: SearchTC.getResolver('updateById'),\n  searchUpdateOne: SearchTC.getResolver('updateOne'),\n  searchUpdateMany: SearchTC.getResolver('updateMany'),\n  searchRemoveById: SearchTC.getResolver('removeById'),\n  searchRemoveOne: SearchTC.getResolver('removeOne'),\n  searchRemoveMany: SearchTC.getResolver('removeMany'),\n  \n  // Session\n  sessionCreate: SessionTC.getResolver('createOne'),\n  sessionUpdateById: SessionTC.getResolver('updateById'),\n  sessionUpdateOne: SessionTC.getResolver('updateOne'),\n  sessionUpdateMany: SessionTC.getResolver('updateMany'),\n  sessionRemoveById: SessionTC.getResolver('removeById'),\n  sessionRemoveOne: SessionTC.getResolver('removeOne'),\n  sessionRemoveMany: SessionTC.getResolver('removeMany'),\n  \n  // Tags\n  tagCreate: TagTC.getResolver('createOne'),\n  tagUpdateById: TagTC.getResolver('updateById'),\n  tagUpdateOne: TagTC.getResolver('updateOne'),\n  tagUpdateMany: TagTC.getResolver('updateMany'),\n  tagRemoveById: TagTC.getResolver('removeById'),\n  tagRemoveOne: TagTC.getResolver('removeOne'),\n  tagRemoveMany: TagTC.getResolver('removeMany'),\n  \n  // Things\n  thingCreate: ThingTC.getResolver('createOne'),\n  thingUpdateById: ThingTC.getResolver('updateById'),\n  thingUpdateOne: ThingTC.getResolver('updateOne'),\n  thingUpdateMany: ThingTC.getResolver('updateMany'),\n  thingRemoveById: ThingTC.getResolver('removeById'),\n  thingRemoveOne: ThingTC.getResolver('removeOne'),\n  thingRemoveMany: ThingTC.getResolver('removeMany'),\n  \n  // template\n  Create: TC.getResolver('createOne'),\n  UpdateById: TC.getResolver('updateById'),\n  UpdateOne: TC.getResolver('updateOne'),\n  UpdateMany: TC.getResolver('updateMany'),\n  RemoveById: TC.getResolver('removeById'),\n  RemoveOne: TC.getResolver('removeOne'),\n  RemoveMany: TC.getResolver('removeMany'),\n  */\n  // Users\n  userCreate: _user.UserTC.getResolver('createOne'),\n  userUpdateOne: _user.UserTC.getResolver('updateOne'),\n  userUpdateMany: _user.UserTC.getResolver('updateMany'),\n  userRemoveOne: _user.UserTC.getResolver('removeOne'),\n  userRemoveMany: _user.UserTC.getResolver('removeMany')\n});\n\nconst graphqlSchema = GQC.buildSchema();\n\nexports.default = graphqlSchema;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNjaGVtYS5qcyJdLCJuYW1lcyI6WyJHUUMiLCJzZXQiLCJjb25zb2xlIiwibG9nIiwiZ2V0Iiwicm9vdFF1ZXJ5IiwiYWRkRmllbGRzIiwic2Vzc2lvbk1hbnkiLCJnZXRSZXNvbHZlciIsInVzZXJCeUlkIiwidXNlckJ5SWRzIiwidXNlck9uZSIsInVzZXJNYW55IiwidXNlclRvdGFsIiwidXNlckNvbm5lY3Rpb24iLCJ1c2VyUGFnaW5hdGlvbiIsInJvb3RNdXRhdGlvbiIsInVzZXJDcmVhdGUiLCJ1c2VyVXBkYXRlT25lIiwidXNlclVwZGF0ZU1hbnkiLCJ1c2VyUmVtb3ZlT25lIiwidXNlclJlbW92ZU1hbnkiLCJncmFwaHFsU2NoZW1hIiwiYnVpbGRTY2hlbWEiXSwibWFwcGluZ3MiOiI7Ozs7OztBQUVBOztBQUVBOzs7O0FBUUE7O0FBSUE7Ozs7QUFYQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQU9BLE1BQU1BLE1BQU0sb0NBQVo7QUFMQTtBQUNBOztBQU1BLDJCQUFXQyxHQUFYLENBQWUsTUFBZjtBQUNBQyxRQUFRQyxHQUFSO0FBQ0FELFFBQVFDLEdBQVIsQ0FBWSwyQkFBV0MsR0FBWCxDQUFlLE1BQWYsQ0FBWjtBQUNBOztBQUVBOztBQUVBO0FBQ0FKLElBQUlLLFNBQUosR0FBZ0JDLFNBQWhCLENBQTBCO0FBQ3hCO0FBQ0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDRUMsZUFBYSxtQkFBVUMsV0FBVixDQUFzQixVQUF0QixDQXBFVztBQXFFMUI7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVFO0FBQ0FDLFlBQVUsYUFBT0QsV0FBUCxDQUFtQixVQUFuQixDQTNGYztBQTRGeEJFLGFBQVcsYUFBT0YsV0FBUCxDQUFtQixXQUFuQixDQTVGYTtBQTZGeEJHLFdBQVMsYUFBT0gsV0FBUCxDQUFtQixTQUFuQixDQTdGZTtBQThGeEJJLFlBQVUsYUFBT0osV0FBUCxDQUFtQixVQUFuQixDQTlGYyxFQThGa0I7QUFDMUNLLGFBQVcsYUFBT0wsV0FBUCxDQUFtQixPQUFuQixDQS9GYTtBQWdHeEJNLGtCQUFnQixhQUFPTixXQUFQLENBQW1CLFlBQW5CLENBaEdRO0FBaUd4Qk8sa0JBQWdCLGFBQU9QLFdBQVAsQ0FBbUIsWUFBbkI7O0FBakdRLENBQTFCO0FBb0dBO0FBQ0E7O0FBRUFSLElBQUlnQixZQUFKLEdBQW1CVixTQUFuQixDQUE2Qjs7QUFFM0I7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFvR0E7QUFDQVcsY0FBWSxhQUFPVCxXQUFQLENBQW1CLFdBQW5CLENBdkdlO0FBd0czQlUsaUJBQWUsYUFBT1YsV0FBUCxDQUFtQixXQUFuQixDQXhHWTtBQXlHM0JXLGtCQUFnQixhQUFPWCxXQUFQLENBQW1CLFlBQW5CLENBekdXO0FBMEczQlksaUJBQWUsYUFBT1osV0FBUCxDQUFtQixXQUFuQixDQTFHWTtBQTJHM0JhLGtCQUFnQixhQUFPYixXQUFQLENBQW1CLFlBQW5CO0FBM0dXLENBQTdCOztBQThHQSxNQUFNYyxnQkFBZ0J0QixJQUFJdUIsV0FBSixFQUF0Qjs7a0JBRWVELGEiLCJmaWxlIjoic2NoZW1hLmpzIiwic291cmNlUm9vdCI6Ii9hcHAvc2NoZW1hIiwic291cmNlc0NvbnRlbnQiOlsiLyogQGZsb3cgKi9cblxuaW1wb3J0IHsgU2NoZW1hQ29tcG9zZXIsIFR5cGVNYXBwZXIgfSBmcm9tICdncmFwaHFsLWNvbXBvc2UnO1xuXG5pbXBvcnQgdXVpZCBmcm9tICcuL3R5cGVzL3V1aWQnO1xuLy8gaW1wb3J0IHsgQ29ubmVjdGlvblRDIH0gZnJvbSAnLi9tb2RlbHMvY29ubmVjdGlvbnMnO1xuLy8gaW1wb3J0IHsgQ29udGFjdFRDIH0gZnJvbSAnLi9tb2RlbHMvY29udGFjdHMnO1xuLy8gaW1wb3J0IHsgQ29udGVudFRDIH0gZnJvbSAnLi9tb2RlbHMvY29udGVudCc7XG4vLyBpbXBvcnQgeyBFdmVudFRDIH0gZnJvbSAnLi9tb2RlbHMvZXZlbnRzJztcbi8vIGltcG9ydCB7IExvY2F0aW9uVEMgfSBmcm9tICcuL21vZGVscy9sb2NhdGlvbnMnO1xuLy8gaW1wb3J0IHsgUHJvdmlkZXJUQyB9IGZyb20gJy4vbW9kZWxzL3Byb3ZpZGVycyc7XG4vLyBpbXBvcnQgeyBTZWFyY2hUQyB9IGZyb20gJy4vbW9kZWxzL3NlYXJjaGVzJztcbmltcG9ydCB7IFNlc3Npb25UQyB9IGZyb20gJy4vbW9kZWxzL3Nlc3Npb24nO1xuLy8gaW1wb3J0IHsgVGFnVEMgfSBmcm9tICcuL21vZGVscy90YWdzJztcbi8vIGltcG9ydCB7IFRoaW5nVEMgfSBmcm9tICcuL21vZGVscy90aGluZ3MnO1xuXG5pbXBvcnQgeyBVc2VyVEMgfSBmcm9tICcuL21vZGVscy91c2VyJztcblxuY29uc3QgR1FDID0gbmV3IFNjaGVtYUNvbXBvc2VyKCk7XG5cblR5cGVNYXBwZXIuc2V0KCdVVUlEJywgdXVpZCk7XG5jb25zb2xlLmxvZyhUeXBlTWFwcGVyKTtcbmNvbnNvbGUubG9nKFR5cGVNYXBwZXIuZ2V0KCdVVUlEJykpO1xuLy8gY29uc3QgdHlwZUNvbXBvc2VyID0gbmV3IFR5cGVDb21wb3NlcigpO1xuXG4vLyBjb25zb2xlLmxvZyh0eXBlQ29tcG9zZXIpO1xuXG4vLyBjcmVhdGUgR3JhcGhRTCBTY2hlbWEgd2l0aCBhbGwgYXZhaWxhYmxlIHJlc29sdmVyc1xuR1FDLnJvb3RRdWVyeSgpLmFkZEZpZWxkcyh7XG4gIC8vQ29ubmVjdGlvbnNcbi8vICAgY29ubmVjdGlvbkJ5SWQ6IENvbm5lY3Rpb25UQy5nZXRSZXNvbHZlcignZmluZEJ5SWQnKSxcbi8vICAgY29ubmVjdGlvbkJ5SWRzOiBDb25uZWN0aW9uVEMuZ2V0UmVzb2x2ZXIoJ2ZpbmRCeUlkcycpLFxuLy8gICBjb25uZWN0aW9uT25lOiBDb25uZWN0aW9uVEMuZ2V0UmVzb2x2ZXIoJ2ZpbmRPbmUnKSxcbi8vICAgY29ubmVjdGlvbk1hbnk6IENvbm5lY3Rpb25UQy5nZXRSZXNvbHZlcignZmluZE1hbnknKSxcbi8vICAgY29ubmVjdGlvblRvdGFsOiBDb25uZWN0aW9uVEMuZ2V0UmVzb2x2ZXIoJ2NvdW50JyksXG4vLyAgIGNvbm5lY3Rpb25Db25uZWN0aW9uOiBDb25uZWN0aW9uVEMuZ2V0UmVzb2x2ZXIoJ2Nvbm5lY3Rpb24nKSxcbi8vICAgY29ubmVjdGlvblBhZ2luYXRpb246IENvbm5lY3Rpb25UQy5nZXRSZXNvbHZlcigncGFnaW5hdGlvbicpLFxuICBcbi8vICAgLy9Db250YWN0c1xuLy8gICBjb250YWN0QnlJZDogQ29udGFjdFRDLmdldFJlc29sdmVyKCdmaW5kQnlJZCcpLFxuLy8gICBjb250YWN0QnlJZHM6IENvbnRhY3RUQy5nZXRSZXNvbHZlcignZmluZEJ5SWRzJyksXG4vLyAgIGNvbnRhY3RPbmU6IENvbnRhY3RUQy5nZXRSZXNvbHZlcignZmluZE9uZScpLFxuLy8gICBjb250YWN0TWFueTogQ29udGFjdFRDLmdldFJlc29sdmVyKCdmaW5kTWFueScpLFxuLy8gICBjb250YWN0VG90YWw6IENvbnRhY3RUQy5nZXRSZXNvbHZlcignY291bnQnKSxcbi8vICAgY29udGFjdENvbm5lY3Rpb246IENvbnRhY3RUQy5nZXRSZXNvbHZlcignY29ubmVjdGlvbicpLFxuLy8gICBjb250YWN0UGFnaW5hdGlvbjogQ29udGFjdFRDLmdldFJlc29sdmVyKCdwYWdpbmF0aW9uJyksXG4gIFxuLy8gICAvL0NvbnRlbnRcbi8vICAgY29udGVudEJ5SWQ6IENvbnRlbnRUQy5nZXRSZXNvbHZlcignZmluZEJ5SWQnKSxcbi8vICAgY29udGVudEJ5SWRzOiBDb250ZW50VEMuZ2V0UmVzb2x2ZXIoJ2ZpbmRCeUlkcycpLFxuLy8gICBjb250ZW50T25lOiBDb250ZW50VEMuZ2V0UmVzb2x2ZXIoJ2ZpbmRPbmUnKSxcbi8vICAgY29udGVudE1hbnk6IENvbnRlbnRUQy5nZXRSZXNvbHZlcignZmluZE1hbnknKSxcbi8vICAgY29udGVudFRvdGFsOiBDb250ZW50VEMuZ2V0UmVzb2x2ZXIoJ2NvdW50JyksXG4vLyAgIGNvbnRlbnRDb25uZWN0aW9uOiBDb250ZW50VEMuZ2V0UmVzb2x2ZXIoJ2Nvbm5lY3Rpb24nKSxcbi8vICAgY29udGVudFBhZ2luYXRpb246IENvbnRlbnRUQy5nZXRSZXNvbHZlcigncGFnaW5hdGlvbicpLFxuICBcbi8vICAgLy9FdmVudHNcbi8vICAgZXZlbnRCeUlkOiBFdmVudFRDLmdldFJlc29sdmVyKCdmaW5kQnlJZCcpLFxuLy8gICBldmVudEJ5SWRzOiBFdmVudFRDLmdldFJlc29sdmVyKCdmaW5kQnlJZHMnKSxcbi8vICAgZXZlbnRPbmU6IEV2ZW50VEMuZ2V0UmVzb2x2ZXIoJ2ZpbmRPbmUnKSxcbi8vICAgZXZlbnRNYW55OiBFdmVudFRDLmdldFJlc29sdmVyKCdmaW5kTWFueScpLFxuLy8gICBldmVudFRvdGFsOiBFdmVudFRDLmdldFJlc29sdmVyKCdjb3VudCcpLFxuLy8gICBldmVudENvbm5lY3Rpb246IEV2ZW50VEMuZ2V0UmVzb2x2ZXIoJ2Nvbm5lY3Rpb24nKSxcbi8vICAgZXZlbnRQYWdpbmF0aW9uOiBFdmVudFRDLmdldFJlc29sdmVyKCdwYWdpbmF0aW9uJyksXG4gIFxuLy8gICAvL0xvY2F0aW9uc1xuLy8gICBsb2NhdGlvbkJ5SWQ6IExvY2F0aW9uVEMuZ2V0UmVzb2x2ZXIoJ2ZpbmRCeUlkJyksXG4vLyAgIGxvY2F0aW9uQnlJZHM6IExvY2F0aW9uVEMuZ2V0UmVzb2x2ZXIoJ2ZpbmRCeUlkcycpLFxuLy8gICBsb2NhdGlvbk9uZTogTG9jYXRpb25UQy5nZXRSZXNvbHZlcignZmluZE9uZScpLFxuLy8gICBsb2NhdGlvbk1hbnk6IExvY2F0aW9uVEMuZ2V0UmVzb2x2ZXIoJ2ZpbmRNYW55JyksXG4vLyAgIGxvY2F0aW9uVG90YWw6IExvY2F0aW9uVEMuZ2V0UmVzb2x2ZXIoJ2NvdW50JyksXG4vLyAgIGxvY2F0aW9uQ29ubmVjdGlvbjogTG9jYXRpb25UQy5nZXRSZXNvbHZlcignY29ubmVjdGlvbicpLFxuLy8gICBsb2NhdGlvblBhZ2luYXRpb246IExvY2F0aW9uVEMuZ2V0UmVzb2x2ZXIoJ3BhZ2luYXRpb24nKSxcbiAgXG4vLyAgIC8vUHJvdmlkZXJzXG4vLyAgIHByb3ZpZGVyQnlJZDogUHJvdmlkZXJUQy5nZXRSZXNvbHZlcignZmluZEJ5SWQnKSxcbi8vICAgcHJvdmlkZXJCeUlkczogUHJvdmlkZXJUQy5nZXRSZXNvbHZlcignZmluZEJ5SWRzJyksXG4vLyAgIHByb3ZpZGVyT25lOiBQcm92aWRlclRDLmdldFJlc29sdmVyKCdmaW5kT25lJyksXG4vLyAgIHByb3ZpZGVyTWFueTogUHJvdmlkZXJUQy5nZXRSZXNvbHZlcignZmluZE1hbnknKSxcbi8vICAgcHJvdmlkZXJUb3RhbDogUHJvdmlkZXJUQy5nZXRSZXNvbHZlcignY291bnQnKSxcbi8vICAgcHJvdmlkZXJDb25uZWN0aW9uOiBQcm92aWRlclRDLmdldFJlc29sdmVyKCdjb25uZWN0aW9uJyksXG4vLyAgIHByb3ZpZGVyUGFnaW5hdGlvbjogUHJvdmlkZXJUQy5nZXRSZXNvbHZlcigncGFnaW5hdGlvbicpLFxuICBcbi8vICAgLy9TZWFyY2hlc1xuLy8gICBzZWFyY2hCeUlkOiBTZWFyY2hUQy5nZXRSZXNvbHZlcignZmluZEJ5SWQnKSxcbi8vICAgc2VhcmNoQnlJZHM6IFNlYXJjaFRDLmdldFJlc29sdmVyKCdmaW5kQnlJZHMnKSxcbi8vICAgc2VhcmNoT25lOiBTZWFyY2hUQy5nZXRSZXNvbHZlcignZmluZE9uZScpLFxuLy8gICBzZWFyY2hNYW55OiBTZWFyY2hUQy5nZXRSZXNvbHZlcignZmluZE1hbnknKSxcbi8vICAgc2VhcmNoVG90YWw6IFNlYXJjaFRDLmdldFJlc29sdmVyKCdjb3VudCcpLFxuLy8gICBzZWFyY2hDb25uZWN0aW9uOiBTZWFyY2hUQy5nZXRSZXNvbHZlcignY29ubmVjdGlvbicpLFxuLy8gICBzZWFyY2hQYWdpbmF0aW9uOiBTZWFyY2hUQy5nZXRSZXNvbHZlcigncGFnaW5hdGlvbicpLFxuXG4vLyAgIC8vU2Vzc2lvblxuLy8gICBzZXNzaW9uQnlJZDogU2Vzc2lvblRDLmdldFJlc29sdmVyKCdmaW5kQnlJZCcpLFxuLy8gICBzZXNzaW9uQnlJZHM6IFNlc3Npb25UQy5nZXRSZXNvbHZlcignZmluZEJ5SWRzJyksXG4vLyAgIHNlc3Npb25PbmU6IFNlc3Npb25UQy5nZXRSZXNvbHZlcignZmluZE9uZScpLFxuICBzZXNzaW9uTWFueTogU2Vzc2lvblRDLmdldFJlc29sdmVyKCdmaW5kTWFueScpLFxuLy8gICBzZXNzaW9uVG90YWw6IFNlc3Npb25UQy5nZXRSZXNvbHZlcignY291bnQnKSxcbi8vICAgc2Vzc2lvbkNvbm5lY3Rpb246IFNlc3Npb25UQy5nZXRSZXNvbHZlcignY29ubmVjdGlvbicpLFxuLy8gICBzZXNzaW9uUGFnaW5hdGlvbjogU2Vzc2lvblRDLmdldFJlc29sdmVyKCdwYWdpbmF0aW9uJyksXG4gIFxuLy8gICAvL1RhZ3Ncbi8vICAgdGFnQnlJZDogVGFnVEMuZ2V0UmVzb2x2ZXIoJ2ZpbmRCeUlkJyksXG4vLyAgIHRhZ0J5SWRzOiBUYWdUQy5nZXRSZXNvbHZlcignZmluZEJ5SWRzJyksXG4vLyAgIHRhZ09uZTogVGFnVEMuZ2V0UmVzb2x2ZXIoJ2ZpbmRPbmUnKSxcbi8vICAgdGFnTWFueTogVGFnVEMuZ2V0UmVzb2x2ZXIoJ2ZpbmRNYW55JyksXG4vLyAgIHRhZ1RvdGFsOiBUYWdUQy5nZXRSZXNvbHZlcignY291bnQnKSxcbi8vICAgdGFnQ29ubmVjdGlvbjogVGFnVEMuZ2V0UmVzb2x2ZXIoJ2Nvbm5lY3Rpb24nKSxcbi8vICAgdGFnUGFnaW5hdGlvbjogVGFnVEMuZ2V0UmVzb2x2ZXIoJ3BhZ2luYXRpb24nKSxcbi8vICAvLyAvVGhpbmdzXG4vLyAgIC8vIG5nQnlJZDogVGhpbmdUQy5nZXRSZXNvbHZlcignZmluZEJ5SWQnKSxcbi8vICAgLy8gbmdCeUlkczogVGhpbmdUQy5nZXRSZXNvbHZlcignZmluZEJ5SWRzJyksXG4vLyAgIC8vIG5nT25lOiBUaGluZ1RDLmdldFJlc29sdmVyKCdmaW5kT25lJyksXG4vLyAgIC8vIG5nTWFueTogVGhpbmdUQy5nZXRSZXNvbHZlcignZmluZE1hbnknKSxcbi8vICAgLy8gbmdUb3RhbDogVGhpbmdUQy5nZXRSZXNvbHZlcignY291bnQnKSxcbi8vICAgLy8gbmdDb25uZWN0aW9uOiBUaGluZ1RDLmdldFJlc29sdmVyKCdjb25uZWN0aW9uJyksXG4vLyAgIC8vIG5nUGFnaW5hdGlvbjogVGhpbmdUQy5nZXRSZXNvbHZlcigncGFnaW5hdGlvbicpLD9cbiAgXG4gIC8vVXNlcnNcbiAgdXNlckJ5SWQ6IFVzZXJUQy5nZXRSZXNvbHZlcignZmluZEJ5SWQnKSxcbiAgdXNlckJ5SWRzOiBVc2VyVEMuZ2V0UmVzb2x2ZXIoJ2ZpbmRCeUlkcycpLFxuICB1c2VyT25lOiBVc2VyVEMuZ2V0UmVzb2x2ZXIoJ2ZpbmRPbmUnKSxcbiAgdXNlck1hbnk6IFVzZXJUQy5nZXRSZXNvbHZlcignZmluZE1hbnknKSwgLy8gLmRlYnVnKCksIC8vIGRlYnVnIGluZm8gdG8gY29uc29sZSBmb3IgdGhpcyByZXNvbHZlclxuICB1c2VyVG90YWw6IFVzZXJUQy5nZXRSZXNvbHZlcignY291bnQnKSxcbiAgdXNlckNvbm5lY3Rpb246IFVzZXJUQy5nZXRSZXNvbHZlcignY29ubmVjdGlvbicpLFxuICB1c2VyUGFnaW5hdGlvbjogVXNlclRDLmdldFJlc29sdmVyKCdwYWdpbmF0aW9uJyksXG4gIFxufSk7XG4vLyBGb3IgZGVidWcgcHVycG9zZXMgeW91IG1heSBkaXNwbGF5IHJlc29sdmVyIGludGVybmFscyBpbiB0aGUgZm9sbG93aW5nIG1hbm5lcjpcbi8vIGNvbnNvbGUubG9nKFVzZXJUQy5nZXRSZXNvbHZlcignZmluZE1hbnknKS50b1N0cmluZygpKTtcblxuR1FDLnJvb3RNdXRhdGlvbigpLmFkZEZpZWxkcyh7XG4gIFxuICAvKlxuICAvLyBDb25uZWN0aW9uc1xuICBjb25uZWN0aW9uQ3JlYXRlOiBDb25uZWN0aW9uVEMuZ2V0UmVzb2x2ZXIoJ2NyZWF0ZU9uZScpLFxuICBjb25uZWN0aW9uVXBkYXRlQnlJZDogQ29ubmVjdGlvblRDLmdldFJlc29sdmVyKCd1cGRhdGVCeUlkJyksXG4gIGNvbm5lY3Rpb25VcGRhdGVPbmU6IENvbm5lY3Rpb25UQy5nZXRSZXNvbHZlcigndXBkYXRlT25lJyksXG4gIGNvbm5lY3Rpb25VcGRhdGVNYW55OiBDb25uZWN0aW9uVEMuZ2V0UmVzb2x2ZXIoJ3VwZGF0ZU1hbnknKSxcbiAgY29ubmVjdGlvblJlbW92ZUJ5SWQ6IENvbm5lY3Rpb25UQy5nZXRSZXNvbHZlcigncmVtb3ZlQnlJZCcpLFxuICBjb25uZWN0aW9uUmVtb3ZlT25lOiBDb25uZWN0aW9uVEMuZ2V0UmVzb2x2ZXIoJ3JlbW92ZU9uZScpLFxuICBjb25uZWN0aW9uUmVtb3ZlTWFueTogQ29ubmVjdGlvblRDLmdldFJlc29sdmVyKCdyZW1vdmVNYW55JyksXG4gIFxuICAvLyBDb250YWN0c1xuICBjb250YWN0Q3JlYXRlOiBDb250YWN0VEMuZ2V0UmVzb2x2ZXIoJ2NyZWF0ZU9uZScpLFxuICBjb250YWN0VXBkYXRlQnlJZDogQ29udGFjdFRDLmdldFJlc29sdmVyKCd1cGRhdGVCeUlkJyksXG4gIGNvbnRhY3RVcGRhdGVPbmU6IENvbnRhY3RUQy5nZXRSZXNvbHZlcigndXBkYXRlT25lJyksXG4gIGNvbnRhY3RVcGRhdGVNYW55OiBDb250YWN0VEMuZ2V0UmVzb2x2ZXIoJ3VwZGF0ZU1hbnknKSxcbiAgY29udGFjdFJlbW92ZUJ5SWQ6IENvbnRhY3RUQy5nZXRSZXNvbHZlcigncmVtb3ZlQnlJZCcpLFxuICBjb250YWN0UmVtb3ZlT25lOiBDb250YWN0VEMuZ2V0UmVzb2x2ZXIoJ3JlbW92ZU9uZScpLFxuICBjb250YWN0UmVtb3ZlTWFueTogQ29udGFjdFRDLmdldFJlc29sdmVyKCdyZW1vdmVNYW55JyksXG4gIFxuICAvLyBDb250ZW50XG4gIGNvbnRlbnRDcmVhdGU6IENvbnRlbnRUQy5nZXRSZXNvbHZlcignY3JlYXRlT25lJyksXG4gIGNvbnRlbnRVcGRhdGVCeUlkOiBDb250ZW50VEMuZ2V0UmVzb2x2ZXIoJ3VwZGF0ZUJ5SWQnKSxcbiAgY29udGVudFVwZGF0ZU9uZTogQ29udGVudFRDLmdldFJlc29sdmVyKCd1cGRhdGVPbmUnKSxcbiAgY29udGVudFVwZGF0ZU1hbnk6IENvbnRlbnRUQy5nZXRSZXNvbHZlcigndXBkYXRlTWFueScpLFxuICBjb250ZW50UmVtb3ZlQnlJZDogQ29udGVudFRDLmdldFJlc29sdmVyKCdyZW1vdmVCeUlkJyksXG4gIGNvbnRlbnRSZW1vdmVPbmU6IENvbnRlbnRUQy5nZXRSZXNvbHZlcigncmVtb3ZlT25lJyksXG4gIGNvbnRlbnRSZW1vdmVNYW55OiBDb250ZW50VEMuZ2V0UmVzb2x2ZXIoJ3JlbW92ZU1hbnknKSxcbiAgXG4gIC8vIEV2ZW50c1xuICBldmVudENyZWF0ZTogRXZlbnRUQy5nZXRSZXNvbHZlcignY3JlYXRlT25lJyksXG4gIGV2ZW50VXBkYXRlQnlJZDogRXZlbnRUQy5nZXRSZXNvbHZlcigndXBkYXRlQnlJZCcpLFxuICBldmVudFVwZGF0ZU9uZTogRXZlbnRUQy5nZXRSZXNvbHZlcigndXBkYXRlT25lJyksXG4gIGV2ZW50VXBkYXRlTWFueTogRXZlbnRUQy5nZXRSZXNvbHZlcigndXBkYXRlTWFueScpLFxuICBldmVudFJlbW92ZUJ5SWQ6IEV2ZW50VEMuZ2V0UmVzb2x2ZXIoJ3JlbW92ZUJ5SWQnKSxcbiAgZXZlbnRSZW1vdmVPbmU6IEV2ZW50VEMuZ2V0UmVzb2x2ZXIoJ3JlbW92ZU9uZScpLFxuICBldmVudFJlbW92ZU1hbnk6IEV2ZW50VEMuZ2V0UmVzb2x2ZXIoJ3JlbW92ZU1hbnknKSxcbiAgXG4gIC8vIExvY2F0aW9uc1xuICBsb2NhdGlvbkNyZWF0ZTogTG9jYXRpb25UQy5nZXRSZXNvbHZlcignY3JlYXRlT25lJyksXG4gIGxvY2F0aW9uVXBkYXRlQnlJZDogTG9jYXRpb25UQy5nZXRSZXNvbHZlcigndXBkYXRlQnlJZCcpLFxuICBsb2NhdGlvblVwZGF0ZU9uZTogTG9jYXRpb25UQy5nZXRSZXNvbHZlcigndXBkYXRlT25lJyksXG4gIGxvY2F0aW9uVXBkYXRlTWFueTogTG9jYXRpb25UQy5nZXRSZXNvbHZlcigndXBkYXRlTWFueScpLFxuICBsb2NhdGlvblJlbW92ZUJ5SWQ6IExvY2F0aW9uVEMuZ2V0UmVzb2x2ZXIoJ3JlbW92ZUJ5SWQnKSxcbiAgbG9jYXRpb25SZW1vdmVPbmU6IExvY2F0aW9uVEMuZ2V0UmVzb2x2ZXIoJ3JlbW92ZU9uZScpLFxuICBsb2NhdGlvblJlbW92ZU1hbnk6IExvY2F0aW9uVEMuZ2V0UmVzb2x2ZXIoJ3JlbW92ZU1hbnknKSxcbiAgXG4gIC8vIFByb3ZpZGVyc1xuICBwcm92aWRlckNyZWF0ZTogUHJvdmlkZXJUQy5nZXRSZXNvbHZlcignY3JlYXRlT25lJyksXG4gIHByb3ZpZGVyVXBkYXRlQnlJZDogUHJvdmlkZXJUQy5nZXRSZXNvbHZlcigndXBkYXRlQnlJZCcpLFxuICBwcm92aWRlclVwZGF0ZU9uZTogUHJvdmlkZXJUQy5nZXRSZXNvbHZlcigndXBkYXRlT25lJyksXG4gIHByb3ZpZGVyVXBkYXRlTWFueTogUHJvdmlkZXJUQy5nZXRSZXNvbHZlcigndXBkYXRlTWFueScpLFxuICBwcm92aWRlclJlbW92ZUJ5SWQ6IFByb3ZpZGVyVEMuZ2V0UmVzb2x2ZXIoJ3JlbW92ZUJ5SWQnKSxcbiAgcHJvdmlkZXJSZW1vdmVPbmU6IFByb3ZpZGVyVEMuZ2V0UmVzb2x2ZXIoJ3JlbW92ZU9uZScpLFxuICBwcm92aWRlclJlbW92ZU1hbnk6IFByb3ZpZGVyVEMuZ2V0UmVzb2x2ZXIoJ3JlbW92ZU1hbnknKSxcbiAgXG4gIC8vIFNlYXJjaGVzXG4gIHNlYXJjaENyZWF0ZTogU2VhcmNoVEMuZ2V0UmVzb2x2ZXIoJ2NyZWF0ZU9uZScpLFxuICBzZWFyY2hVcGRhdGVCeUlkOiBTZWFyY2hUQy5nZXRSZXNvbHZlcigndXBkYXRlQnlJZCcpLFxuICBzZWFyY2hVcGRhdGVPbmU6IFNlYXJjaFRDLmdldFJlc29sdmVyKCd1cGRhdGVPbmUnKSxcbiAgc2VhcmNoVXBkYXRlTWFueTogU2VhcmNoVEMuZ2V0UmVzb2x2ZXIoJ3VwZGF0ZU1hbnknKSxcbiAgc2VhcmNoUmVtb3ZlQnlJZDogU2VhcmNoVEMuZ2V0UmVzb2x2ZXIoJ3JlbW92ZUJ5SWQnKSxcbiAgc2VhcmNoUmVtb3ZlT25lOiBTZWFyY2hUQy5nZXRSZXNvbHZlcigncmVtb3ZlT25lJyksXG4gIHNlYXJjaFJlbW92ZU1hbnk6IFNlYXJjaFRDLmdldFJlc29sdmVyKCdyZW1vdmVNYW55JyksXG4gIFxuICAvLyBTZXNzaW9uXG4gIHNlc3Npb25DcmVhdGU6IFNlc3Npb25UQy5nZXRSZXNvbHZlcignY3JlYXRlT25lJyksXG4gIHNlc3Npb25VcGRhdGVCeUlkOiBTZXNzaW9uVEMuZ2V0UmVzb2x2ZXIoJ3VwZGF0ZUJ5SWQnKSxcbiAgc2Vzc2lvblVwZGF0ZU9uZTogU2Vzc2lvblRDLmdldFJlc29sdmVyKCd1cGRhdGVPbmUnKSxcbiAgc2Vzc2lvblVwZGF0ZU1hbnk6IFNlc3Npb25UQy5nZXRSZXNvbHZlcigndXBkYXRlTWFueScpLFxuICBzZXNzaW9uUmVtb3ZlQnlJZDogU2Vzc2lvblRDLmdldFJlc29sdmVyKCdyZW1vdmVCeUlkJyksXG4gIHNlc3Npb25SZW1vdmVPbmU6IFNlc3Npb25UQy5nZXRSZXNvbHZlcigncmVtb3ZlT25lJyksXG4gIHNlc3Npb25SZW1vdmVNYW55OiBTZXNzaW9uVEMuZ2V0UmVzb2x2ZXIoJ3JlbW92ZU1hbnknKSxcbiAgXG4gIC8vIFRhZ3NcbiAgdGFnQ3JlYXRlOiBUYWdUQy5nZXRSZXNvbHZlcignY3JlYXRlT25lJyksXG4gIHRhZ1VwZGF0ZUJ5SWQ6IFRhZ1RDLmdldFJlc29sdmVyKCd1cGRhdGVCeUlkJyksXG4gIHRhZ1VwZGF0ZU9uZTogVGFnVEMuZ2V0UmVzb2x2ZXIoJ3VwZGF0ZU9uZScpLFxuICB0YWdVcGRhdGVNYW55OiBUYWdUQy5nZXRSZXNvbHZlcigndXBkYXRlTWFueScpLFxuICB0YWdSZW1vdmVCeUlkOiBUYWdUQy5nZXRSZXNvbHZlcigncmVtb3ZlQnlJZCcpLFxuICB0YWdSZW1vdmVPbmU6IFRhZ1RDLmdldFJlc29sdmVyKCdyZW1vdmVPbmUnKSxcbiAgdGFnUmVtb3ZlTWFueTogVGFnVEMuZ2V0UmVzb2x2ZXIoJ3JlbW92ZU1hbnknKSxcbiAgXG4gIC8vIFRoaW5nc1xuICB0aGluZ0NyZWF0ZTogVGhpbmdUQy5nZXRSZXNvbHZlcignY3JlYXRlT25lJyksXG4gIHRoaW5nVXBkYXRlQnlJZDogVGhpbmdUQy5nZXRSZXNvbHZlcigndXBkYXRlQnlJZCcpLFxuICB0aGluZ1VwZGF0ZU9uZTogVGhpbmdUQy5nZXRSZXNvbHZlcigndXBkYXRlT25lJyksXG4gIHRoaW5nVXBkYXRlTWFueTogVGhpbmdUQy5nZXRSZXNvbHZlcigndXBkYXRlTWFueScpLFxuICB0aGluZ1JlbW92ZUJ5SWQ6IFRoaW5nVEMuZ2V0UmVzb2x2ZXIoJ3JlbW92ZUJ5SWQnKSxcbiAgdGhpbmdSZW1vdmVPbmU6IFRoaW5nVEMuZ2V0UmVzb2x2ZXIoJ3JlbW92ZU9uZScpLFxuICB0aGluZ1JlbW92ZU1hbnk6IFRoaW5nVEMuZ2V0UmVzb2x2ZXIoJ3JlbW92ZU1hbnknKSxcbiAgXG4gIC8vIHRlbXBsYXRlXG4gIENyZWF0ZTogVEMuZ2V0UmVzb2x2ZXIoJ2NyZWF0ZU9uZScpLFxuICBVcGRhdGVCeUlkOiBUQy5nZXRSZXNvbHZlcigndXBkYXRlQnlJZCcpLFxuICBVcGRhdGVPbmU6IFRDLmdldFJlc29sdmVyKCd1cGRhdGVPbmUnKSxcbiAgVXBkYXRlTWFueTogVEMuZ2V0UmVzb2x2ZXIoJ3VwZGF0ZU1hbnknKSxcbiAgUmVtb3ZlQnlJZDogVEMuZ2V0UmVzb2x2ZXIoJ3JlbW92ZUJ5SWQnKSxcbiAgUmVtb3ZlT25lOiBUQy5nZXRSZXNvbHZlcigncmVtb3ZlT25lJyksXG4gIFJlbW92ZU1hbnk6IFRDLmdldFJlc29sdmVyKCdyZW1vdmVNYW55JyksXG4gICovXG4gIC8vIFVzZXJzXG4gIHVzZXJDcmVhdGU6IFVzZXJUQy5nZXRSZXNvbHZlcignY3JlYXRlT25lJyksXG4gIHVzZXJVcGRhdGVPbmU6IFVzZXJUQy5nZXRSZXNvbHZlcigndXBkYXRlT25lJyksXG4gIHVzZXJVcGRhdGVNYW55OiBVc2VyVEMuZ2V0UmVzb2x2ZXIoJ3VwZGF0ZU1hbnknKSxcbiAgdXNlclJlbW92ZU9uZTogVXNlclRDLmdldFJlc29sdmVyKCdyZW1vdmVPbmUnKSxcbiAgdXNlclJlbW92ZU1hbnk6IFVzZXJUQy5nZXRSZXNvbHZlcigncmVtb3ZlTWFueScpLFxufSk7XG5cbmNvbnN0IGdyYXBocWxTY2hlbWEgPSBHUUMuYnVpbGRTY2hlbWEoKTtcblxuZXhwb3J0IGRlZmF1bHQgZ3JhcGhxbFNjaGVtYTsiXX0=",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "schema.js"
      ],
      "names": [
        "GQC",
        "set",
        "console",
        "log",
        "get",
        "rootQuery",
        "addFields",
        "sessionMany",
        "getResolver",
        "userById",
        "userByIds",
        "userOne",
        "userMany",
        "userTotal",
        "userConnection",
        "userPagination",
        "rootMutation",
        "userCreate",
        "userUpdateOne",
        "userUpdateMany",
        "userRemoveOne",
        "userRemoveMany",
        "graphqlSchema",
        "buildSchema"
      ],
      "mappings": ";;;;;;AAEA;;AAEA;;;;AAQA;;AAIA;;;;AAXA;AACA;AACA;AACA;AACA;AACA;AACA;AAOA,MAAMA,MAAM,oCAAZ;AALA;AACA;;AAMA,2BAAWC,GAAX,CAAe,MAAf;AACAC,QAAQC,GAAR;AACAD,QAAQC,GAAR,CAAY,2BAAWC,GAAX,CAAe,MAAf,CAAZ;AACA;;AAEA;;AAEA;AACAJ,IAAIK,SAAJ,GAAgBC,SAAhB,CAA0B;AACxB;AACF;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACEC,eAAa,mBAAUC,WAAV,CAAsB,UAAtB,CApEW;AAqE1B;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEE;AACAC,YAAU,aAAOD,WAAP,CAAmB,UAAnB,CA3Fc;AA4FxBE,aAAW,aAAOF,WAAP,CAAmB,WAAnB,CA5Fa;AA6FxBG,WAAS,aAAOH,WAAP,CAAmB,SAAnB,CA7Fe;AA8FxBI,YAAU,aAAOJ,WAAP,CAAmB,UAAnB,CA9Fc,EA8FkB;AAC1CK,aAAW,aAAOL,WAAP,CAAmB,OAAnB,CA/Fa;AAgGxBM,kBAAgB,aAAON,WAAP,CAAmB,YAAnB,CAhGQ;AAiGxBO,kBAAgB,aAAOP,WAAP,CAAmB,YAAnB;;AAjGQ,CAA1B;AAoGA;AACA;;AAEAR,IAAIgB,YAAJ,GAAmBV,SAAnB,CAA6B;;AAE3B;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAoGA;AACAW,cAAY,aAAOT,WAAP,CAAmB,WAAnB,CAvGe;AAwG3BU,iBAAe,aAAOV,WAAP,CAAmB,WAAnB,CAxGY;AAyG3BW,kBAAgB,aAAOX,WAAP,CAAmB,YAAnB,CAzGW;AA0G3BY,iBAAe,aAAOZ,WAAP,CAAmB,WAAnB,CA1GY;AA2G3Ba,kBAAgB,aAAOb,WAAP,CAAmB,YAAnB;AA3GW,CAA7B;;AA8GA,MAAMc,gBAAgBtB,IAAIuB,WAAJ,EAAtB;;kBAEeD,a",
      "file": "schema.js",
      "sourceRoot": "/app/schema",
      "sourcesContent": [
        "/* @flow */\n\nimport { SchemaComposer, TypeMapper } from 'graphql-compose';\n\nimport uuid from './types/uuid';\n// import { ConnectionTC } from './models/connections';\n// import { ContactTC } from './models/contacts';\n// import { ContentTC } from './models/content';\n// import { EventTC } from './models/events';\n// import { LocationTC } from './models/locations';\n// import { ProviderTC } from './models/providers';\n// import { SearchTC } from './models/searches';\nimport { SessionTC } from './models/session';\n// import { TagTC } from './models/tags';\n// import { ThingTC } from './models/things';\n\nimport { UserTC } from './models/user';\n\nconst GQC = new SchemaComposer();\n\nTypeMapper.set('UUID', uuid);\nconsole.log(TypeMapper);\nconsole.log(TypeMapper.get('UUID'));\n// const typeComposer = new TypeComposer();\n\n// console.log(typeComposer);\n\n// create GraphQL Schema with all available resolvers\nGQC.rootQuery().addFields({\n  //Connections\n//   connectionById: ConnectionTC.getResolver('findById'),\n//   connectionByIds: ConnectionTC.getResolver('findByIds'),\n//   connectionOne: ConnectionTC.getResolver('findOne'),\n//   connectionMany: ConnectionTC.getResolver('findMany'),\n//   connectionTotal: ConnectionTC.getResolver('count'),\n//   connectionConnection: ConnectionTC.getResolver('connection'),\n//   connectionPagination: ConnectionTC.getResolver('pagination'),\n  \n//   //Contacts\n//   contactById: ContactTC.getResolver('findById'),\n//   contactByIds: ContactTC.getResolver('findByIds'),\n//   contactOne: ContactTC.getResolver('findOne'),\n//   contactMany: ContactTC.getResolver('findMany'),\n//   contactTotal: ContactTC.getResolver('count'),\n//   contactConnection: ContactTC.getResolver('connection'),\n//   contactPagination: ContactTC.getResolver('pagination'),\n  \n//   //Content\n//   contentById: ContentTC.getResolver('findById'),\n//   contentByIds: ContentTC.getResolver('findByIds'),\n//   contentOne: ContentTC.getResolver('findOne'),\n//   contentMany: ContentTC.getResolver('findMany'),\n//   contentTotal: ContentTC.getResolver('count'),\n//   contentConnection: ContentTC.getResolver('connection'),\n//   contentPagination: ContentTC.getResolver('pagination'),\n  \n//   //Events\n//   eventById: EventTC.getResolver('findById'),\n//   eventByIds: EventTC.getResolver('findByIds'),\n//   eventOne: EventTC.getResolver('findOne'),\n//   eventMany: EventTC.getResolver('findMany'),\n//   eventTotal: EventTC.getResolver('count'),\n//   eventConnection: EventTC.getResolver('connection'),\n//   eventPagination: EventTC.getResolver('pagination'),\n  \n//   //Locations\n//   locationById: LocationTC.getResolver('findById'),\n//   locationByIds: LocationTC.getResolver('findByIds'),\n//   locationOne: LocationTC.getResolver('findOne'),\n//   locationMany: LocationTC.getResolver('findMany'),\n//   locationTotal: LocationTC.getResolver('count'),\n//   locationConnection: LocationTC.getResolver('connection'),\n//   locationPagination: LocationTC.getResolver('pagination'),\n  \n//   //Providers\n//   providerById: ProviderTC.getResolver('findById'),\n//   providerByIds: ProviderTC.getResolver('findByIds'),\n//   providerOne: ProviderTC.getResolver('findOne'),\n//   providerMany: ProviderTC.getResolver('findMany'),\n//   providerTotal: ProviderTC.getResolver('count'),\n//   providerConnection: ProviderTC.getResolver('connection'),\n//   providerPagination: ProviderTC.getResolver('pagination'),\n  \n//   //Searches\n//   searchById: SearchTC.getResolver('findById'),\n//   searchByIds: SearchTC.getResolver('findByIds'),\n//   searchOne: SearchTC.getResolver('findOne'),\n//   searchMany: SearchTC.getResolver('findMany'),\n//   searchTotal: SearchTC.getResolver('count'),\n//   searchConnection: SearchTC.getResolver('connection'),\n//   searchPagination: SearchTC.getResolver('pagination'),\n\n//   //Session\n//   sessionById: SessionTC.getResolver('findById'),\n//   sessionByIds: SessionTC.getResolver('findByIds'),\n//   sessionOne: SessionTC.getResolver('findOne'),\n  sessionMany: SessionTC.getResolver('findMany'),\n//   sessionTotal: SessionTC.getResolver('count'),\n//   sessionConnection: SessionTC.getResolver('connection'),\n//   sessionPagination: SessionTC.getResolver('pagination'),\n  \n//   //Tags\n//   tagById: TagTC.getResolver('findById'),\n//   tagByIds: TagTC.getResolver('findByIds'),\n//   tagOne: TagTC.getResolver('findOne'),\n//   tagMany: TagTC.getResolver('findMany'),\n//   tagTotal: TagTC.getResolver('count'),\n//   tagConnection: TagTC.getResolver('connection'),\n//   tagPagination: TagTC.getResolver('pagination'),\n//  // /Things\n//   // ngById: ThingTC.getResolver('findById'),\n//   // ngByIds: ThingTC.getResolver('findByIds'),\n//   // ngOne: ThingTC.getResolver('findOne'),\n//   // ngMany: ThingTC.getResolver('findMany'),\n//   // ngTotal: ThingTC.getResolver('count'),\n//   // ngConnection: ThingTC.getResolver('connection'),\n//   // ngPagination: ThingTC.getResolver('pagination'),?\n  \n  //Users\n  userById: UserTC.getResolver('findById'),\n  userByIds: UserTC.getResolver('findByIds'),\n  userOne: UserTC.getResolver('findOne'),\n  userMany: UserTC.getResolver('findMany'), // .debug(), // debug info to console for this resolver\n  userTotal: UserTC.getResolver('count'),\n  userConnection: UserTC.getResolver('connection'),\n  userPagination: UserTC.getResolver('pagination'),\n  \n});\n// For debug purposes you may display resolver internals in the following manner:\n// console.log(UserTC.getResolver('findMany').toString());\n\nGQC.rootMutation().addFields({\n  \n  /*\n  // Connections\n  connectionCreate: ConnectionTC.getResolver('createOne'),\n  connectionUpdateById: ConnectionTC.getResolver('updateById'),\n  connectionUpdateOne: ConnectionTC.getResolver('updateOne'),\n  connectionUpdateMany: ConnectionTC.getResolver('updateMany'),\n  connectionRemoveById: ConnectionTC.getResolver('removeById'),\n  connectionRemoveOne: ConnectionTC.getResolver('removeOne'),\n  connectionRemoveMany: ConnectionTC.getResolver('removeMany'),\n  \n  // Contacts\n  contactCreate: ContactTC.getResolver('createOne'),\n  contactUpdateById: ContactTC.getResolver('updateById'),\n  contactUpdateOne: ContactTC.getResolver('updateOne'),\n  contactUpdateMany: ContactTC.getResolver('updateMany'),\n  contactRemoveById: ContactTC.getResolver('removeById'),\n  contactRemoveOne: ContactTC.getResolver('removeOne'),\n  contactRemoveMany: ContactTC.getResolver('removeMany'),\n  \n  // Content\n  contentCreate: ContentTC.getResolver('createOne'),\n  contentUpdateById: ContentTC.getResolver('updateById'),\n  contentUpdateOne: ContentTC.getResolver('updateOne'),\n  contentUpdateMany: ContentTC.getResolver('updateMany'),\n  contentRemoveById: ContentTC.getResolver('removeById'),\n  contentRemoveOne: ContentTC.getResolver('removeOne'),\n  contentRemoveMany: ContentTC.getResolver('removeMany'),\n  \n  // Events\n  eventCreate: EventTC.getResolver('createOne'),\n  eventUpdateById: EventTC.getResolver('updateById'),\n  eventUpdateOne: EventTC.getResolver('updateOne'),\n  eventUpdateMany: EventTC.getResolver('updateMany'),\n  eventRemoveById: EventTC.getResolver('removeById'),\n  eventRemoveOne: EventTC.getResolver('removeOne'),\n  eventRemoveMany: EventTC.getResolver('removeMany'),\n  \n  // Locations\n  locationCreate: LocationTC.getResolver('createOne'),\n  locationUpdateById: LocationTC.getResolver('updateById'),\n  locationUpdateOne: LocationTC.getResolver('updateOne'),\n  locationUpdateMany: LocationTC.getResolver('updateMany'),\n  locationRemoveById: LocationTC.getResolver('removeById'),\n  locationRemoveOne: LocationTC.getResolver('removeOne'),\n  locationRemoveMany: LocationTC.getResolver('removeMany'),\n  \n  // Providers\n  providerCreate: ProviderTC.getResolver('createOne'),\n  providerUpdateById: ProviderTC.getResolver('updateById'),\n  providerUpdateOne: ProviderTC.getResolver('updateOne'),\n  providerUpdateMany: ProviderTC.getResolver('updateMany'),\n  providerRemoveById: ProviderTC.getResolver('removeById'),\n  providerRemoveOne: ProviderTC.getResolver('removeOne'),\n  providerRemoveMany: ProviderTC.getResolver('removeMany'),\n  \n  // Searches\n  searchCreate: SearchTC.getResolver('createOne'),\n  searchUpdateById: SearchTC.getResolver('updateById'),\n  searchUpdateOne: SearchTC.getResolver('updateOne'),\n  searchUpdateMany: SearchTC.getResolver('updateMany'),\n  searchRemoveById: SearchTC.getResolver('removeById'),\n  searchRemoveOne: SearchTC.getResolver('removeOne'),\n  searchRemoveMany: SearchTC.getResolver('removeMany'),\n  \n  // Session\n  sessionCreate: SessionTC.getResolver('createOne'),\n  sessionUpdateById: SessionTC.getResolver('updateById'),\n  sessionUpdateOne: SessionTC.getResolver('updateOne'),\n  sessionUpdateMany: SessionTC.getResolver('updateMany'),\n  sessionRemoveById: SessionTC.getResolver('removeById'),\n  sessionRemoveOne: SessionTC.getResolver('removeOne'),\n  sessionRemoveMany: SessionTC.getResolver('removeMany'),\n  \n  // Tags\n  tagCreate: TagTC.getResolver('createOne'),\n  tagUpdateById: TagTC.getResolver('updateById'),\n  tagUpdateOne: TagTC.getResolver('updateOne'),\n  tagUpdateMany: TagTC.getResolver('updateMany'),\n  tagRemoveById: TagTC.getResolver('removeById'),\n  tagRemoveOne: TagTC.getResolver('removeOne'),\n  tagRemoveMany: TagTC.getResolver('removeMany'),\n  \n  // Things\n  thingCreate: ThingTC.getResolver('createOne'),\n  thingUpdateById: ThingTC.getResolver('updateById'),\n  thingUpdateOne: ThingTC.getResolver('updateOne'),\n  thingUpdateMany: ThingTC.getResolver('updateMany'),\n  thingRemoveById: ThingTC.getResolver('removeById'),\n  thingRemoveOne: ThingTC.getResolver('removeOne'),\n  thingRemoveMany: ThingTC.getResolver('removeMany'),\n  \n  // template\n  Create: TC.getResolver('createOne'),\n  UpdateById: TC.getResolver('updateById'),\n  UpdateOne: TC.getResolver('updateOne'),\n  UpdateMany: TC.getResolver('updateMany'),\n  RemoveById: TC.getResolver('removeById'),\n  RemoveOne: TC.getResolver('removeOne'),\n  RemoveMany: TC.getResolver('removeMany'),\n  */\n  // Users\n  userCreate: UserTC.getResolver('createOne'),\n  userUpdateOne: UserTC.getResolver('updateOne'),\n  userUpdateMany: UserTC.getResolver('updateMany'),\n  userRemoveOne: UserTC.getResolver('removeOne'),\n  userRemoveMany: UserTC.getResolver('removeMany'),\n});\n\nconst graphqlSchema = GQC.buildSchema();\n\nexport default graphqlSchema;"
      ]
    },
    "mtime": 1521594220083
  },
  "{\"filename\":\"/app/schema/models/user.js\",\"env\":{},\"retainLines\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"presets\":[],\"plugins\":[[[],null],[[],null],[[],{\"loose\":false}],[[],{\"spec\":false,\"loose\":false}],[[],{\"spec\":false,\"loose\":false}],[[],{\"spec\":false,\"loose\":false}],[[],{\"spec\":false,\"loose\":false}],[[],{\"spec\":false,\"loose\":false}],[[],{\"spec\":false,\"loose\":false}]],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"minified\":false,\"sourceRoot\":\"/app/schema/models\",\"babelrc\":true,\"sourceType\":\"module\",\"moduleIds\":false,\"passPerPreset\":false,\"parserOpts\":false,\"generatorOpts\":false}:6.26.0": {
    "metadata": {
      "usedHelpers": [
        "interopRequireDefault"
      ],
      "marked": [],
      "modules": {
        "imports": [
          {
            "source": "bson",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "bson"
              }
            ]
          },
          {
            "source": "mongoose",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "mongoose"
              }
            ]
          },
          {
            "source": "graphql-compose-mongoose/node8",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "composeWithMongoose"
              }
            ]
          },
          {
            "source": "uuid-parse",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "uuidParse"
              }
            ]
          }
        ],
        "exports": {
          "exported": [
            "UserSchema",
            "User",
            "UserTC"
          ],
          "specifiers": [
            {
              "kind": "local",
              "local": "UserSchema",
              "exported": "UserSchema"
            },
            {
              "kind": "local",
              "local": "User",
              "exported": "User"
            },
            {
              "kind": "local",
              "local": "UserTC",
              "exported": "UserTC"
            }
          ]
        }
      }
    },
    "options": {
      "filename": "/app/schema/models/user.js",
      "filenameRelative": "/app/schema/models/user.js",
      "env": {},
      "retainLines": false,
      "highlightCode": true,
      "suppressDeprecationMessages": false,
      "presets": [],
      "plugins": [
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ]
      ],
      "ignore": [],
      "code": true,
      "metadata": true,
      "ast": false,
      "comments": true,
      "compact": "auto",
      "minified": false,
      "sourceMaps": "both",
      "sourceMapTarget": "user.js",
      "sourceFileName": "user.js",
      "sourceRoot": "/app/schema/models",
      "babelrc": false,
      "sourceType": "module",
      "moduleRoot": "/app/schema/models",
      "moduleIds": false,
      "passPerPreset": false,
      "parserOpts": false,
      "generatorOpts": false,
      "basename": "user"
    },
    "ignored": false,
    "code": "'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.UserTC = exports.User = exports.UserSchema = undefined;\n\nvar _bson = require('bson');\n\nvar _bson2 = _interopRequireDefault(_bson);\n\nvar _mongoose = require('mongoose');\n\nvar _mongoose2 = _interopRequireDefault(_mongoose);\n\nvar _node = require('graphql-compose-mongoose/node8');\n\nvar _node2 = _interopRequireDefault(_node);\n\nvar _uuidParse = require('uuid-parse');\n\nvar _uuidParse2 = _interopRequireDefault(_uuidParse);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nconst AccountTypeSchema = new _mongoose2.default.Schema({\n  language: String,\n  skill: {\n    type: String,\n    enum: ['free', 'plus', 'pro']\n  }\n}, {\n  _id: false\n});\n\nconst AddressSchema = new _mongoose2.default.Schema({\n  street: String,\n  geo: {\n    type: [Number], // [<longitude>, <latitude>]\n    index: '2dsphere' // create the geospatial index\n  }\n});\n\nconst UserSchema = exports.UserSchema = new _mongoose2.default.Schema({\n  meta: {\n    type: Object\n  },\n  _id: {\n    type: Buffer\n  },\n  id: {\n    type: String,\n    get: function get() {\n      return this._id.toString('hex');\n    },\n    set: function set(val) {\n      if (this._conditions && this._conditions.id) {\n        var uuidBuffer = new _mongoose2.default.Types.Buffer(_uuidParse2.default.parse(val));\n        uuidBuffer.subtype(_bson2.default.Binary.SUBTYPE_UUID);\n        this._conditions._id = uuidBuffer.toObject();\n\n        delete this._conditions.id;\n      }\n    }\n  },\n  name: {\n    type: String,\n    index: true\n  },\n  is_active: {\n    type: Boolean,\n    index: true\n  },\n  joined: {\n    type: Date,\n    index: false\n  },\n  last_login: {\n    type: Date,\n    index: false\n  },\n  settings: {\n    explorer: {\n      initial_searches: {\n        type: Boolean,\n        index: false\n      }\n    }\n  },\n  social_accounts: {\n    type: Array,\n    index: false\n  },\n  subscriptions: {\n    type: Array,\n    index: false\n  },\n  age: {\n    type: Number,\n    index: true\n  },\n  accountType: {\n    type: [AccountTypeSchema],\n    default: []\n  },\n  contacts: {\n    // another mongoose way for providing embedded documents\n    email: String,\n    phones: [String] // array of strings\n  },\n  gender: {\n    // enum field with values\n    type: String,\n    enum: ['male', 'female', 'ladyboy', 'ai', 'animal', 'mineral', 'other']\n  },\n  address: {\n    type: AddressSchema\n  },\n  otherData: {\n    type: _mongoose2.default.Schema.Types.Mixed,\n    description: 'Some dynamic data'\n  }\n}, {\n  collection: 'users'\n  //     toObject: {\n  //       getters: true,\n  //       transform: function (doc, ret) {\n  //         console.log('Transforming UUID to buffer');\n  //         ret._id = Buffer.from(ret._id, 'hex');\n\n  //         return ret;\n  //      }\n  //     },\n  //     toJSON: {\n  //       getters: true,\n  //       transform: function (doc, ret) {\n  //         console.log('Transforming UUID to string');\n  //         ret._id = ret._id.toString('hex');\n\n  //         return ret;\n  //       }\n  //     }\n});\n\n// UserSchema.virtual('_id')\n//   .set(function (uuid4ID) {\n//     this._id = Buffer.from(uuid4ID, 'hex')[0];;\n//   })\n//   .get(function () {\n//     return this._id.toString('hex');\n//   });\n\nUserSchema.index({ gender: 1, age: -1 });\n\nconst User = exports.User = _mongoose2.default.model('User', UserSchema);\n\nconst UserTC = exports.UserTC = (0, _node2.default)(User);\n\n// UserTC.addFields({\n//   _id: { // extended\n//     type: 'String', // String, Int, Float, Boolean, ID, Json, array []\n//     description: 'uuid4 id',\n//     resolve: (source, args, context, info) => {\n//       return source._id.toString('hex');\n//     },\n//   }\n// });\n\n\nUserTC.addFields({\n  id: {\n    type: 'String',\n    description: 'uuid4 id',\n    resolve: (source, args, context, info) => {\n      return source._id.toString('hex');\n    }\n  }\n});\n\nUserTC.setResolver('findMany', UserTC.getResolver('findMany').addFilterArg({\n  name: 'geoDistance',\n  type: `input GeoDistance {\n      lng: Float!\n      lat: Float!\n      # Distance in meters\n      distance: Float!\n    }`,\n  description: 'Search by distance in meters',\n  query: (rawQuery, value, resolveParams) => {\n    // eslint-disable-line\n    if (!value.lng || !value.lat || !value.distance) return;\n    // read more https://docs.mongodb.com/manual/tutorial/query-a-2dsphere-index/\n    rawQuery['address.geo'] = {\n      $near: {\n        $geometry: {\n          type: 'Point',\n          coordinates: [value.lng, value.lat]\n        },\n        $maxDistance: value.distance // <distance in meters>\n      }\n    };\n  }\n})\n// /* FOR DEBUG */\n//   .debug()\n// /* OR MORE PRECISELY */\n//   .debugParams()\n//   .debugPayload()\n//   .debugExecTime()\n);\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInVzZXIuanMiXSwibmFtZXMiOlsiQWNjb3VudFR5cGVTY2hlbWEiLCJTY2hlbWEiLCJsYW5ndWFnZSIsIlN0cmluZyIsInNraWxsIiwidHlwZSIsImVudW0iLCJfaWQiLCJBZGRyZXNzU2NoZW1hIiwic3RyZWV0IiwiZ2VvIiwiTnVtYmVyIiwiaW5kZXgiLCJVc2VyU2NoZW1hIiwibWV0YSIsIk9iamVjdCIsIkJ1ZmZlciIsImlkIiwiZ2V0IiwidG9TdHJpbmciLCJzZXQiLCJ2YWwiLCJfY29uZGl0aW9ucyIsInV1aWRCdWZmZXIiLCJUeXBlcyIsInBhcnNlIiwic3VidHlwZSIsIkJpbmFyeSIsIlNVQlRZUEVfVVVJRCIsInRvT2JqZWN0IiwibmFtZSIsImlzX2FjdGl2ZSIsIkJvb2xlYW4iLCJqb2luZWQiLCJEYXRlIiwibGFzdF9sb2dpbiIsInNldHRpbmdzIiwiZXhwbG9yZXIiLCJpbml0aWFsX3NlYXJjaGVzIiwic29jaWFsX2FjY291bnRzIiwiQXJyYXkiLCJzdWJzY3JpcHRpb25zIiwiYWdlIiwiYWNjb3VudFR5cGUiLCJkZWZhdWx0IiwiY29udGFjdHMiLCJlbWFpbCIsInBob25lcyIsImdlbmRlciIsImFkZHJlc3MiLCJvdGhlckRhdGEiLCJNaXhlZCIsImRlc2NyaXB0aW9uIiwiY29sbGVjdGlvbiIsIlVzZXIiLCJtb2RlbCIsIlVzZXJUQyIsImFkZEZpZWxkcyIsInJlc29sdmUiLCJzb3VyY2UiLCJhcmdzIiwiY29udGV4dCIsImluZm8iLCJzZXRSZXNvbHZlciIsImdldFJlc29sdmVyIiwiYWRkRmlsdGVyQXJnIiwicXVlcnkiLCJyYXdRdWVyeSIsInZhbHVlIiwicmVzb2x2ZVBhcmFtcyIsImxuZyIsImxhdCIsImRpc3RhbmNlIiwiJG5lYXIiLCIkZ2VvbWV0cnkiLCJjb29yZGluYXRlcyIsIiRtYXhEaXN0YW5jZSJdLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUVBOzs7O0FBQ0E7Ozs7QUFDQTs7OztBQUNBOzs7Ozs7QUFFQSxNQUFNQSxvQkFB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LEVBQVlGLE1BQU1HLEdBQWxCO0FBRkosU0FETjtBQUtMSyxzQkFBY1IsTUFBTUksUUFMZixDQUt5QjtBQUx6QjtBQURpQixLQUExQjtBQVNEO0FBckJ5QyxDQUE1QztBQXVCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUE5QkYiLCJmaWxlIjoidXNlci5qcyIsInNvdXJjZVJvb3QiOiIvYXBwL3NjaGVtYS9tb2RlbHMiLCJzb3VyY2VzQ29udGVudCI6WyIvKiBAZmxvdyAqL1xuXG5pbXBvcnQgYnNvbiBmcm9tICdic29uJztcbmltcG9ydCBtb25nb29zZSBmcm9tICdtb25nb29zZSc7XG5pbXBvcnQgY29tcG9zZVdpdGhNb25nb29zZSBmcm9tICdncmFwaHFsLWNvbXBvc2UtbW9uZ29vc2Uvbm9kZTgnO1xuaW1wb3J0IHV1aWRQYXJzZSBmcm9tICd1dWlkLXBhcnNlJztcblxuY29uc3QgQWNjb3VudFR5cGVTY2hlbWEgPSBuZXcgbW9uZ29vc2UuU2NoZW1hKFxuICB7XG4gICAgbGFuZ3VhZ2U6IFN0cmluZyxcbiAgICBza2lsbDoge1xuICAgICAgdHlwZTogU3RyaW5nLFxuICAgICAgZW51bTogWydmcmVlJywgJ3BsdXMnLCAncHJvJ10sXG4gICAgfSxcbiAgfSxcbiAge1xuICAgIF9pZDogZmFsc2UsXG4gIH1cbik7XG5cbmNvbnN0IEFkZHJlc3NTY2hlbWEgPSBuZXcgbW9uZ29vc2UuU2NoZW1hKHtcbiAgc3RyZWV0OiBTdHJpbmcsXG4gIGdlbzoge1xuICAgIHR5cGU6IFtOdW1iZXJdLCAvLyBbPGxvbmdpdHVkZT4sIDxsYXRpdHVkZT5dXG4gICAgaW5kZXg6ICcyZHNwaGVyZScsIC8vIGNyZWF0ZSB0aGUgZ2Vvc3BhdGlhbCBpbmRleFxuICB9LFxufSk7XG5cblxuZXhwb3J0IGNvbnN0IFVzZXJTY2hlbWEgPSBuZXcgbW9uZ29vc2UuU2NoZW1hKFxuICB7XG4gICAgbWV0YToge1xuICAgICAgdHlwZTogT2JqZWN0XG4gICAgfSxcbiAgICBfaWQ6e1xuICAgICAgdHlwZTogQnVmZmVyXG4gICAgfSxcbiAgICBpZDoge1xuICAgICAgdHlwZTogU3RyaW5nLFxuICAgICAgZ2V0OiBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2lkLnRvU3RyaW5nKCdoZXgnKVxuICAgICAgfSxcbiAgICAgIHNldDogZnVuY3Rpb24odmFsKSB7XG4gICAgICAgIGlmICh0aGlzLl9jb25kaXRpb25zICYmIHRoaXMuX2NvbmRpdGlvbnMuaWQpIHtcbiAgICAgICAgICB2YXIgdXVpZEJ1ZmZlciA9IG5ldyBtb25nb29zZS5UeXBlcy5CdWZmZXIodXVpZFBhcnNlLnBhcnNlKHZhbCkpO1xuICAgICAgICAgIHV1aWRCdWZmZXIuc3VidHlwZShic29uLkJpbmFyeS5TVUJUWVBFX1VVSUQpO1xuICAgICAgICAgIHRoaXMuX2NvbmRpdGlvbnMuX2lkID0gdXVpZEJ1ZmZlci50b09iamVjdCgpO1xuICAgICAgICAgIFxuICAgICAgICAgIGRlbGV0ZSB0aGlzLl9jb25kaXRpb25zLmlkO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSxcbiAgICBuYW1lOiB7XG4gICAgICB0eXBlOiBTdHJpbmcsXG4gICAgICBpbmRleDogdHJ1ZSxcbiAgICB9LFxuICAgIGlzX2FjdGl2ZToge1xuICAgICAgdHlwZTogQm9vbGVhbixcbiAgICAgIGluZGV4OiB0cnVlLFxuICAgIH0sXG4gICAgam9pbmVkOiB7XG4gICAgICB0eXBlOiBEYXRlLFxuICAgICAgaW5kZXg6IGZhbHNlXG4gICAgfSxcbiAgICBsYXN0X2xvZ2luOiB7XG4gICAgICB0eXBlOiBEYXRlLFxuICAgICAgaW5kZXg6IGZhbHNlXG4gICAgfSxcbiAgICBzZXR0aW5nczoge1xuICAgICAgZXhwbG9yZXI6IHtcbiAgICAgICAgaW5pdGlhbF9zZWFyY2hlczoge1xuICAgICAgICAgIHR5cGU6IEJvb2xlYW4sXG4gICAgICAgICAgaW5kZXg6IGZhbHNlXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9LFxuICAgIHNvY2lhbF9hY2NvdW50czoge1xuICAgICAgdHlwZTogQXJyYXksXG4gICAgICBpbmRleDogZmFsc2VcbiAgICB9LFxuICAgIHN1YnNjcmlwdGlvbnM6IHtcbiAgICAgIHR5cGU6IEFycmF5LFxuICAgICAgaW5kZXg6IGZhbHNlXG4gICAgfSxcbiAgICBhZ2U6IHtcbiAgICAgIHR5cGU6IE51bWJlcixcbiAgICAgIGluZGV4OiB0cnVlLFxuICAgIH0sXG4gICAgYWNjb3VudFR5cGU6IHtcbiAgICAgIHR5cGU6IFtBY2NvdW50VHlwZVNjaGVtYV0sXG4gICAgICBkZWZhdWx0OiBbXSxcbiAgICB9LCBcbiAgICBjb250YWN0czoge1xuICAgICAgLy8gYW5vdGhlciBtb25nb29zZSB3YXkgZm9yIHByb3ZpZGluZyBlbWJlZGRlZCBkb2N1bWVudHNcbiAgICAgIGVtYWlsOiBTdHJpbmcsXG4gICAgICBwaG9uZXM6IFtTdHJpbmddLCAvLyBhcnJheSBvZiBzdHJpbmdzXG4gICAgfSxcbiAgICBnZW5kZXI6IHtcbiAgICAgIC8vIGVudW0gZmllbGQgd2l0aCB2YWx1ZXNcbiAgICAgIHR5cGU6IFN0cmluZyxcbiAgICAgIGVudW06IFsnbWFsZScsICdmZW1hbGUnLCAnbGFkeWJveScsICdhaScsICdhbmltYWwnLCAnbWluZXJhbCcsICdvdGhlciddLFxuICAgIH0sXG4gICAgYWRkcmVzczoge1xuICAgICAgdHlwZTogQWRkcmVzc1NjaGVtYSxcbiAgICB9LFxuICAgIG90aGVyRGF0YToge1xuICAgICAgdHlwZTogbW9uZ29vc2UuU2NoZW1hLlR5cGVzLk1peGVkLFxuICAgICAgZGVzY3JpcHRpb246ICdTb21lIGR5bmFtaWMgZGF0YScsXG4gICAgfSxcbiAgfSxcbiAge1xuICAgIGNvbGxlY3Rpb246ICd1c2VycycsXG4vLyAgICAgdG9PYmplY3Q6IHtcbi8vICAgICAgIGdldHRlcnM6IHRydWUsXG4vLyAgICAgICB0cmFuc2Zvcm06IGZ1bmN0aW9uIChkb2MsIHJldCkge1xuLy8gICAgICAgICBjb25zb2xlLmxvZygnVHJhbnNmb3JtaW5nIFVVSUQgdG8gYnVmZmVyJyk7XG4vLyAgICAgICAgIHJldC5faWQgPSBCdWZmZXIuZnJvbShyZXQuX2lkLCAnaGV4Jyk7XG5cbi8vICAgICAgICAgcmV0dXJuIHJldDtcbi8vICAgICAgfVxuLy8gICAgIH0sXG4vLyAgICAgdG9KU09OOiB7XG4vLyAgICAgICBnZXR0ZXJzOiB0cnVlLFxuLy8gICAgICAgdHJhbnNmb3JtOiBmdW5jdGlvbiAoZG9jLCByZXQpIHtcbi8vICAgICAgICAgY29uc29sZS5sb2coJ1RyYW5zZm9ybWluZyBVVUlEIHRvIHN0cmluZycpO1xuLy8gICAgICAgICByZXQuX2lkID0gcmV0Ll9pZC50b1N0cmluZygnaGV4Jyk7XG5cbi8vICAgICAgICAgcmV0dXJuIHJldDtcbi8vICAgICAgIH1cbi8vICAgICB9XG4gIH1cbik7XG5cbi8vIFVzZXJTY2hlbWEudmlydHVhbCgnX2lkJylcbi8vICAgLnNldChmdW5jdGlvbiAodXVpZDRJRCkge1xuLy8gICAgIHRoaXMuX2lkID0gQnVmZmVyLmZyb20odXVpZDRJRCwgJ2hleCcpWzBdOztcbi8vICAgfSlcbi8vICAgLmdldChmdW5jdGlvbiAoKSB7XG4vLyAgICAgcmV0dXJuIHRoaXMuX2lkLnRvU3RyaW5nKCdoZXgnKTtcbi8vICAgfSk7XG5cblVzZXJTY2hlbWEuaW5kZXgoeyBnZW5kZXI6IDEsIGFnZTogLTEgfSk7XG5cbmV4cG9ydCBjb25zdCBVc2VyID0gbW9uZ29vc2UubW9kZWwoJ1VzZXInLCBVc2VyU2NoZW1hKTtcblxuZXhwb3J0IGNvbnN0IFVzZXJUQyA9IGNvbXBvc2VXaXRoTW9uZ29vc2UoVXNlcik7XG5cbi8vIFVzZXJUQy5hZGRGaWVsZHMoe1xuLy8gICBfaWQ6IHsgLy8gZXh0ZW5kZWRcbi8vICAgICB0eXBlOiAnU3RyaW5nJywgLy8gU3RyaW5nLCBJbnQsIEZsb2F0LCBCb29sZWFuLCBJRCwgSnNvbiwgYXJyYXkgW11cbi8vICAgICBkZXNjcmlwdGlvbjogJ3V1aWQ0IGlkJyxcbi8vICAgICByZXNvbHZlOiAoc291cmNlLCBhcmdzLCBjb250ZXh0LCBpbmZvKSA9PiB7XG4vLyAgICAgICByZXR1cm4gc291cmNlLl9pZC50b1N0cmluZygnaGV4Jyk7XG4vLyAgICAgfSxcbi8vICAgfVxuLy8gfSk7XG5cblxuVXNlclRDLmFkZEZpZWxkcyh7XG4gIGlkOiB7XG4gICAgdHlwZTogJ1N0cmluZycsIFxuICAgIGRlc2NyaXB0aW9uOiAndXVpZDQgaWQnLFxuICAgIHJlc29sdmU6IChzb3VyY2UsIGFyZ3MsIGNvbnRleHQsIGluZm8pID0+IHtcbiAgICAgIHJldHVybiBzb3VyY2UuX2lkLnRvU3RyaW5nKCdoZXgnKTtcbiAgICB9LFxuICB9XG59KTtcblxuVXNlclRDLnNldFJlc29sdmVyKFxuICAnZmluZE1hbnknLFxuICBVc2VyVEMuZ2V0UmVzb2x2ZXIoJ2ZpbmRNYW55JykuYWRkRmlsdGVyQXJnKHtcbiAgICBuYW1lOiAnZ2VvRGlzdGFuY2UnLFxuICAgIHR5cGU6IGBpbnB1dCBHZW9EaXN0YW5jZSB7XG4gICAgICBsbmc6IEZsb2F0IVxuICAgICAgbGF0OiBGbG9hdCFcbiAgICAgICMgRGlzdGFuY2UgaW4gbWV0ZXJzXG4gICAgICBkaXN0YW5jZTogRmxvYXQhXG4gICAgfWAsXG4gICAgZGVzY3JpcHRpb246ICdTZWFyY2ggYnkgZGlzdGFuY2UgaW4gbWV0ZXJzJyxcbiAgICBxdWVyeTogKHJhd1F1ZXJ5LCB2YWx1ZSwgcmVzb2x2ZVBhcmFtcykgPT4geyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lXG4gICAgICBpZiAoIXZhbHVlLmxuZyB8fCAhdmFsdWUubGF0IHx8ICF2YWx1ZS5kaXN0YW5jZSkgcmV0dXJuO1xuICAgICAgLy8gcmVhZCBtb3JlIGh0dHBzOi8vZG9jcy5tb25nb2RiLmNvbS9tYW51YWwvdHV0b3JpYWwvcXVlcnktYS0yZHNwaGVyZS1pbmRleC9cbiAgICAgIHJhd1F1ZXJ5WydhZGRyZXNzLmdlbyddID0ge1xuICAgICAgICAkbmVhcjoge1xuICAgICAgICAgICRnZW9tZXRyeToge1xuICAgICAgICAgICAgdHlwZTogJ1BvaW50JyxcbiAgICAgICAgICAgIGNvb3JkaW5hdGVzOiBbdmFsdWUubG5nLCB2YWx1ZS5sYXRdLFxuICAgICAgICAgIH0sXG4gICAgICAgICAgJG1heERpc3RhbmNlOiB2YWx1ZS5kaXN0YW5jZSwgLy8gPGRpc3RhbmNlIGluIG1ldGVycz5cbiAgICAgICAgfSxcbiAgICAgIH07XG4gICAgfSxcbiAgfSlcbiAgLy8gLyogRk9SIERFQlVHICovXG4gIC8vICAgLmRlYnVnKClcbiAgLy8gLyogT1IgTU9SRSBQUkVDSVNFTFkgKi9cbiAgLy8gICAuZGVidWdQYXJhbXMoKVxuICAvLyAgIC5kZWJ1Z1BheWxvYWQoKVxuICAvLyAgIC5kZWJ1Z0V4ZWNUaW1lKClcbik7Il19",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "user.js"
      ],
      "names": [
        "AccountTypeSchema",
        "Schema",
        "language",
        "String",
        "skill",
        "type",
        "enum",
        "_id",
        "AddressSchema",
        "street",
        "geo",
        "Number",
        "index",
        "UserSchema",
        "meta",
        "Object",
        "Buffer",
        "id",
        "get",
        "toString",
        "set",
        "val",
        "_conditions",
        "uuidBuffer",
        "Types",
        "parse",
        "subtype",
        "Binary",
        "SUBTYPE_UUID",
        "toObject",
        "name",
        "is_active",
        "Boolean",
        "joined",
        "Date",
        "last_login",
        "settings",
        "explorer",
        "initial_searches",
        "social_accounts",
        "Array",
        "subscriptions",
        "age",
        "accountType",
        "default",
        "contacts",
        "email",
        "phones",
        "gender",
        "address",
        "otherData",
        "Mixed",
        "description",
        "collection",
        "User",
        "model",
        "UserTC",
        "addFields",
        "resolve",
        "source",
        "args",
        "context",
        "info",
        "setResolver",
        "getResolver",
        "addFilterArg",
        "query",
        "rawQuery",
        "value",
        "resolveParams",
        "lng",
        "lat",
        "distance",
        "$near",
        "$geometry",
        "coordinates",
        "$maxDistance"
      ],
      "mappings": "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",
      "file": "user.js",
      "sourceRoot": "/app/schema/models",
      "sourcesContent": [
        "/* @flow */\n\nimport bson from 'bson';\nimport mongoose from 'mongoose';\nimport composeWithMongoose from 'graphql-compose-mongoose/node8';\nimport uuidParse from 'uuid-parse';\n\nconst AccountTypeSchema = new mongoose.Schema(\n  {\n    language: String,\n    skill: {\n      type: String,\n      enum: ['free', 'plus', 'pro'],\n    },\n  },\n  {\n    _id: false,\n  }\n);\n\nconst AddressSchema = new mongoose.Schema({\n  street: String,\n  geo: {\n    type: [Number], // [<longitude>, <latitude>]\n    index: '2dsphere', // create the geospatial index\n  },\n});\n\n\nexport const UserSchema = new mongoose.Schema(\n  {\n    meta: {\n      type: Object\n    },\n    _id:{\n      type: Buffer\n    },\n    id: {\n      type: String,\n      get: function() {\n        return this._id.toString('hex')\n      },\n      set: function(val) {\n        if (this._conditions && this._conditions.id) {\n          var uuidBuffer = new mongoose.Types.Buffer(uuidParse.parse(val));\n          uuidBuffer.subtype(bson.Binary.SUBTYPE_UUID);\n          this._conditions._id = uuidBuffer.toObject();\n          \n          delete this._conditions.id;\n        }\n      }\n    },\n    name: {\n      type: String,\n      index: true,\n    },\n    is_active: {\n      type: Boolean,\n      index: true,\n    },\n    joined: {\n      type: Date,\n      index: false\n    },\n    last_login: {\n      type: Date,\n      index: false\n    },\n    settings: {\n      explorer: {\n        initial_searches: {\n          type: Boolean,\n          index: false\n        }\n      }\n    },\n    social_accounts: {\n      type: Array,\n      index: false\n    },\n    subscriptions: {\n      type: Array,\n      index: false\n    },\n    age: {\n      type: Number,\n      index: true,\n    },\n    accountType: {\n      type: [AccountTypeSchema],\n      default: [],\n    }, \n    contacts: {\n      // another mongoose way for providing embedded documents\n      email: String,\n      phones: [String], // array of strings\n    },\n    gender: {\n      // enum field with values\n      type: String,\n      enum: ['male', 'female', 'ladyboy', 'ai', 'animal', 'mineral', 'other'],\n    },\n    address: {\n      type: AddressSchema,\n    },\n    otherData: {\n      type: mongoose.Schema.Types.Mixed,\n      description: 'Some dynamic data',\n    },\n  },\n  {\n    collection: 'users',\n//     toObject: {\n//       getters: true,\n//       transform: function (doc, ret) {\n//         console.log('Transforming UUID to buffer');\n//         ret._id = Buffer.from(ret._id, 'hex');\n\n//         return ret;\n//      }\n//     },\n//     toJSON: {\n//       getters: true,\n//       transform: function (doc, ret) {\n//         console.log('Transforming UUID to string');\n//         ret._id = ret._id.toString('hex');\n\n//         return ret;\n//       }\n//     }\n  }\n);\n\n// UserSchema.virtual('_id')\n//   .set(function (uuid4ID) {\n//     this._id = Buffer.from(uuid4ID, 'hex')[0];;\n//   })\n//   .get(function () {\n//     return this._id.toString('hex');\n//   });\n\nUserSchema.index({ gender: 1, age: -1 });\n\nexport const User = mongoose.model('User', UserSchema);\n\nexport const UserTC = composeWithMongoose(User);\n\n// UserTC.addFields({\n//   _id: { // extended\n//     type: 'String', // String, Int, Float, Boolean, ID, Json, array []\n//     description: 'uuid4 id',\n//     resolve: (source, args, context, info) => {\n//       return source._id.toString('hex');\n//     },\n//   }\n// });\n\n\nUserTC.addFields({\n  id: {\n    type: 'String', \n    description: 'uuid4 id',\n    resolve: (source, args, context, info) => {\n      return source._id.toString('hex');\n    },\n  }\n});\n\nUserTC.setResolver(\n  'findMany',\n  UserTC.getResolver('findMany').addFilterArg({\n    name: 'geoDistance',\n    type: `input GeoDistance {\n      lng: Float!\n      lat: Float!\n      # Distance in meters\n      distance: Float!\n    }`,\n    description: 'Search by distance in meters',\n    query: (rawQuery, value, resolveParams) => { // eslint-disable-line\n      if (!value.lng || !value.lat || !value.distance) return;\n      // read more https://docs.mongodb.com/manual/tutorial/query-a-2dsphere-index/\n      rawQuery['address.geo'] = {\n        $near: {\n          $geometry: {\n            type: 'Point',\n            coordinates: [value.lng, value.lat],\n          },\n          $maxDistance: value.distance, // <distance in meters>\n        },\n      };\n    },\n  })\n  // /* FOR DEBUG */\n  //   .debug()\n  // /* OR MORE PRECISELY */\n  //   .debugParams()\n  //   .debugPayload()\n  //   .debugExecTime()\n);"
      ]
    },
    "mtime": 1521594013426
  },
  "{\"filename\":\"/app/schema/models/session.js\",\"env\":{},\"retainLines\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"presets\":[],\"plugins\":[[[],null],[[],null],[[],{\"loose\":false}],[[],{\"spec\":false,\"loose\":false}],[[],{\"spec\":false,\"loose\":false}],[[],{\"spec\":false,\"loose\":false}],[[],{\"spec\":false,\"loose\":false}],[[],{\"spec\":false,\"loose\":false}],[[],{\"spec\":false,\"loose\":false}]],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"minified\":false,\"sourceRoot\":\"/app/schema/models\",\"babelrc\":true,\"sourceType\":\"module\",\"moduleIds\":false,\"passPerPreset\":false,\"parserOpts\":false,\"generatorOpts\":false}:6.26.0": {
    "metadata": {
      "usedHelpers": [
        "interopRequireDefault"
      ],
      "marked": [],
      "modules": {
        "imports": [
          {
            "source": "bson",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "bson"
              }
            ]
          },
          {
            "source": "mongoose",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "mongoose"
              }
            ]
          },
          {
            "source": "graphql-compose-mongoose/node8",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "composeWithMongoose"
              }
            ]
          },
          {
            "source": "uuid-parse",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "uuidParse"
              }
            ]
          },
          {
            "source": "./user",
            "imported": [
              "UserTC"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "UserTC",
                "local": "UserTC"
              }
            ]
          }
        ],
        "exports": {
          "exported": [
            "SessionSchema",
            "Session",
            "SessionTC"
          ],
          "specifiers": [
            {
              "kind": "local",
              "local": "SessionSchema",
              "exported": "SessionSchema"
            },
            {
              "kind": "local",
              "local": "Session",
              "exported": "Session"
            },
            {
              "kind": "local",
              "local": "SessionTC",
              "exported": "SessionTC"
            }
          ]
        }
      }
    },
    "options": {
      "filename": "/app/schema/models/session.js",
      "filenameRelative": "/app/schema/models/session.js",
      "env": {},
      "retainLines": false,
      "highlightCode": true,
      "suppressDeprecationMessages": false,
      "presets": [],
      "plugins": [
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ]
      ],
      "ignore": [],
      "code": true,
      "metadata": true,
      "ast": false,
      "comments": true,
      "compact": "auto",
      "minified": false,
      "sourceMaps": "both",
      "sourceMapTarget": "session.js",
      "sourceFileName": "session.js",
      "sourceRoot": "/app/schema/models",
      "babelrc": false,
      "sourceType": "module",
      "moduleRoot": "/app/schema/models",
      "moduleIds": false,
      "passPerPreset": false,
      "parserOpts": false,
      "generatorOpts": false,
      "basename": "session"
    },
    "ignored": false,
    "code": "'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.SessionTC = exports.Session = exports.SessionSchema = undefined;\n\nvar _bson = require('bson');\n\nvar _bson2 = _interopRequireDefault(_bson);\n\nvar _mongoose = require('mongoose');\n\nvar _mongoose2 = _interopRequireDefault(_mongoose);\n\nvar _node = require('graphql-compose-mongoose/node8');\n\nvar _node2 = _interopRequireDefault(_node);\n\nvar _uuidParse = require('uuid-parse');\n\nvar _uuidParse2 = _interopRequireDefault(_uuidParse);\n\nvar _user = require('./user');\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nconst SessionSchema = exports.SessionSchema = new _mongoose2.default.Schema({\n  _id: Buffer,\n  id: {\n    type: String,\n    get: function get() {\n      return this._id.toString('hex');\n    },\n    set: function set(val) {\n      if (this._conditions && this._conditions.id) {\n        var uuidBuffer = new _mongoose2.default.Types.Buffer(_uuidParse2.default.parse(val));\n        uuidBuffer.subtype(_bson2.default.Binary.SUBTYPE_UUID);\n        this._conditions._id = uuidBuffer.toObject();\n\n        delete this._conditions.id;\n      }\n    }\n  },\n  created: {\n    type: Date\n  },\n  csrf_secret: {\n    type: String\n  },\n  expires: {\n    type: Date\n  },\n  ip: {\n    type: String // null\n  },\n  meta: {\n    agent: {\n      type: String\n    },\n    browser: {\n      family: {\n        type: String\n      },\n      version: {\n        type: String\n      }\n    },\n    device: {\n      family: {\n        type: String\n      },\n      version: {\n        type: String\n      }\n    },\n    os: {\n      family: {\n        type: String\n      },\n      version: {\n        type: String\n      }\n    }\n  },\n\n  persist: {\n    type: Boolean\n  },\n  token: {\n    type: String\n  },\n  ttl: {\n    type: Date\n  },\n  user_id: {\n    type: Buffer\n  }\n}, {\n  collection: 'sessions'\n});\n\nconst Session = exports.Session = _mongoose2.default.model('Session', SessionSchema);\n\nconst SessionTC = exports.SessionTC = (0, _node2.default)(Session);\n\nSessionTC.addRelation('user', {\n  resolver: () => _user.UserTC.getResolver('findOne'),\n  prepareArgs: {\n    filter: source => ({ id: source.user_id.toString('hex') })\n  },\n  projection: { user_id: true }\n});\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNlc3Npb24uanMiXSwibmFtZXMiOlsiU2Vzc2lvblNjaGVtYSIsIlNjaGVtYSIsIl9pZCIsIkJ1ZmZlciIsImlkIiwidHlwZSIsIlN0cmluZyIsImdldCIsInRvU3RyaW5nIiwic2V0IiwidmFsIiwiX2NvbmRpdGlvbnMiLCJ1dWlkQnVmZmVyIiwiVHlwZXMiLCJwYXJzZSIsInN1YnR5cGUiLCJCaW5hcnkiLCJTVUJUWVBFX1VVSUQiLCJ0b09iamVjdCIsImNyZWF0ZWQiLCJEYXRlIiwiY3NyZl9zZWNyZXQiLCJleHBpcmVzIiwiaXAiLCJtZXRhIiwiYWdlbnQiLCJicm93c2VyIiwiZmFtaWx5IiwidmVyc2lvbiIsImRldmljZSIsIm9zIiwicGVyc2lzdCIsIkJvb2xlYW4iLCJ0b2tlbiIsInR0bCIsInVzZXJfaWQiLCJjb2xsZWN0aW9uIiwiU2Vzc2lvbiIsIm1vZGVsIiwiU2Vzc2lvblRDIiwiYWRkUmVsYXRpb24iLCJyZXNvbHZlciIsImdldFJlc29sdmVyIiwicHJlcGFyZUFyZ3MiLCJmaWx0ZXIiLCJzb3VyY2UiLCJwcm9qZWN0aW9uIl0sIm1hcHBpbmdzIjoiOzs7Ozs7O0FBRUE7Ozs7QUFDQTs7OztBQUNBOzs7O0FBQ0E7Ozs7QUFFQTs7OztBQUVPLE1BQU1BLHdDQUFnQixJQUFJLG1CQUFTQyxNQUFiLENBQzNCO0FBQ0VDLE9BQUtDLE1BRFA7QUFFRUMsTUFBSTtBQUNGQyxVQUFNQyxNQURKO0FBRUZDLFNBQUssZUFBVztBQUNkLGFBQU8sS0FBS0wsR0FBTCxDQUFTTSxRQUFULENBQWtCLEtBQWxCLENBQVA7QUFDRCxLQUpDO0FBS0ZDLFNBQUssYUFBU0MsR0FBVCxFQUFjO0FBQ2pCLFVBQUksS0FBS0MsV0FBTCxJQUFvQixLQUFLQSxXQUFMLENBQWlCUCxFQUF6QyxFQUE2QztBQUMzQyxZQUFJUSxhQUFhLElBQUksbUJBQVNDLEtBQVQsQ0FBZVYsTUFBbkIsQ0FBMEIsb0JBQVVXLEtBQVYsQ0FBZ0JKLEdBQWhCLENBQTFCLENBQWpCO0FBQ0FFLG1CQUFXRyxPQUFYLENBQW1CLGVBQUtDLE1BQUwsQ0FBWUMsWUFBL0I7QUFDQSxhQUFLTixXQUFMLENBQWlCVCxHQUFqQixHQUF1QlUsV0FBV00sUUFBWCxFQUF2Qjs7QUFFQSxlQUFPLEtBQUtQLFdBQUwsQ0FBaUJQLEVBQXhCO0FBQ0Q7QUFDRjtBQWJDLEdBRk47QUFpQkVlLFdBQVM7QUFDUGQsVUFBTWU7QUFEQyxHQWpCWDtBQW9CRUMsZUFBYTtBQUNYaEIsVUFBTUM7QUFESyxHQXBCZjtBQXVCRWdCLFdBQVM7QUFDUGpCLFVBQU1lO0FBREMsR0F2Qlg7QUEwQkVHLE1BQUk7QUFDRmxCLFVBQU1DLE1BREosQ0FDVztBQURYLEdBMUJOO0FBNkJFa0IsUUFBTTtBQUNKQyxXQUFPO0FBQ0xwQixZQUFNQztBQURELEtBREg7QUFJSm9CLGFBQVM7QUFDUEMsY0FBUTtBQUNOdEIsY0FBTUM7QUFEQSxPQUREO0FBSVBzQixlQUFTO0FBQ1B2QixjQUFNQztBQURDO0FBSkYsS0FKTDtBQVlKdUIsWUFBUTtBQUNORixjQUFRO0FBQ050QixjQUFNQztBQURBLE9BREY7QUFJTnNCLGVBQVM7QUFDUHZCLGNBQU1DO0FBREM7QUFKSCxLQVpKO0FBb0JKd0IsUUFBSTtBQUNGSCxjQUFRO0FBQ050QixjQUFNQztBQURBLE9BRE47QUFJRnNCLGVBQVM7QUFDUHZCLGNBQU1DO0FBREM7QUFKUDtBQXBCQSxHQTdCUjs7QUEyREV5QixXQUFTO0FBQ1AxQixVQUFNMkI7QUFEQyxHQTNEWDtBQThERUMsU0FBTztBQUNMNUIsVUFBTUM7QUFERCxHQTlEVDtBQWlFRTRCLE9BQUs7QUFDSDdCLFVBQU1lO0FBREgsR0FqRVA7QUFvRUVlLFdBQVM7QUFDUDlCLFVBQU1GO0FBREM7QUFwRVgsQ0FEMkIsRUF5RTNCO0FBQ0VpQyxjQUFZO0FBRGQsQ0F6RTJCLENBQXRCOztBQThFQSxNQUFNQyw0QkFBVSxtQkFBU0MsS0FBVCxDQUFlLFNBQWYsRUFBMEJ0QyxhQUExQixDQUFoQjs7QUFFQSxNQUFNdUMsZ0NBQVksb0JBQW9CRixPQUFwQixDQUFsQjs7QUFFUEUsVUFBVUMsV0FBVixDQUFzQixNQUF0QixFQUE4QjtBQUM1QkMsWUFBVSxNQUFNLGFBQU9DLFdBQVAsQ0FBbUIsU0FBbkIsQ0FEWTtBQUU1QkMsZUFBYTtBQUNYQyxZQUFRQyxXQUFXLEVBQUV6QyxJQUFJeUMsT0FBT1YsT0FBUCxDQUFlM0IsUUFBZixDQUF3QixLQUF4QixDQUFOLEVBQVg7QUFERyxHQUZlO0FBSzVCc0MsY0FBWSxFQUFFWCxTQUFTLElBQVg7QUFMZ0IsQ0FBOUIiLCJmaWxlIjoic2Vzc2lvbi5qcyIsInNvdXJjZVJvb3QiOiIvYXBwL3NjaGVtYS9tb2RlbHMiLCJzb3VyY2VzQ29udGVudCI6WyIvKiBAZmxvdyAqL1xuXG5pbXBvcnQgYnNvbiBmcm9tICdic29uJztcbmltcG9ydCBtb25nb29zZSBmcm9tICdtb25nb29zZSc7XG5pbXBvcnQgY29tcG9zZVdpdGhNb25nb29zZSBmcm9tICdncmFwaHFsLWNvbXBvc2UtbW9uZ29vc2Uvbm9kZTgnO1xuaW1wb3J0IHV1aWRQYXJzZSBmcm9tICd1dWlkLXBhcnNlJztcblxuaW1wb3J0IHsgVXNlclRDIH0gZnJvbSAnLi91c2VyJztcblxuZXhwb3J0IGNvbnN0IFNlc3Npb25TY2hlbWEgPSBuZXcgbW9uZ29vc2UuU2NoZW1hKFxuICB7XG4gICAgX2lkOiBCdWZmZXIsXG4gICAgaWQ6IHtcbiAgICAgIHR5cGU6IFN0cmluZyxcbiAgICAgIGdldDogZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9pZC50b1N0cmluZygnaGV4JylcbiAgICAgIH0sXG4gICAgICBzZXQ6IGZ1bmN0aW9uKHZhbCkge1xuICAgICAgICBpZiAodGhpcy5fY29uZGl0aW9ucyAmJiB0aGlzLl9jb25kaXRpb25zLmlkKSB7XG4gICAgICAgICAgdmFyIHV1aWRCdWZmZXIgPSBuZXcgbW9uZ29vc2UuVHlwZXMuQnVmZmVyKHV1aWRQYXJzZS5wYXJzZSh2YWwpKTtcbiAgICAgICAgICB1dWlkQnVmZmVyLnN1YnR5cGUoYnNvbi5CaW5hcnkuU1VCVFlQRV9VVUlEKTtcbiAgICAgICAgICB0aGlzLl9jb25kaXRpb25zLl9pZCA9IHV1aWRCdWZmZXIudG9PYmplY3QoKTtcbiAgICAgICAgICBcbiAgICAgICAgICBkZWxldGUgdGhpcy5fY29uZGl0aW9ucy5pZDtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0sXG4gICAgY3JlYXRlZDoge1xuICAgICAgdHlwZTogRGF0ZVxuICAgIH0sXG4gICAgY3NyZl9zZWNyZXQ6IHtcbiAgICAgIHR5cGU6IFN0cmluZ1xuICAgIH0sXG4gICAgZXhwaXJlczoge1xuICAgICAgdHlwZTogRGF0ZVxuICAgIH0sXG4gICAgaXA6IHtcbiAgICAgIHR5cGU6IFN0cmluZyAvLyBudWxsXG4gICAgfSxcbiAgICBtZXRhOiB7XG4gICAgICBhZ2VudDoge1xuICAgICAgICB0eXBlOiBTdHJpbmcgXG4gICAgICB9LFxuICAgICAgYnJvd3Nlcjoge1xuICAgICAgICBmYW1pbHk6IHtcbiAgICAgICAgICB0eXBlOiBTdHJpbmdcbiAgICAgICAgfSxcbiAgICAgICAgdmVyc2lvbjoge1xuICAgICAgICAgIHR5cGU6IFN0cmluZ1xuICAgICAgICB9LFxuICAgICAgfSxcbiAgICAgIGRldmljZToge1xuICAgICAgICBmYW1pbHk6IHtcbiAgICAgICAgICB0eXBlOiBTdHJpbmdcbiAgICAgICAgfSxcbiAgICAgICAgdmVyc2lvbjoge1xuICAgICAgICAgIHR5cGU6IFN0cmluZ1xuICAgICAgICB9LFxuICAgICAgfSxcbiAgICAgIG9zOiB7XG4gICAgICAgIGZhbWlseToge1xuICAgICAgICAgIHR5cGU6IFN0cmluZ1xuICAgICAgICB9LFxuICAgICAgICB2ZXJzaW9uOiB7XG4gICAgICAgICAgdHlwZTogU3RyaW5nXG4gICAgICAgIH0sXG4gICAgICB9LFxuICAgIH0sXG4gICAgXG4gICAgcGVyc2lzdDoge1xuICAgICAgdHlwZTogQm9vbGVhblxuICAgIH0sXG4gICAgdG9rZW46IHtcbiAgICAgIHR5cGU6IFN0cmluZ1xuICAgIH0sXG4gICAgdHRsOiB7XG4gICAgICB0eXBlOiBEYXRlXG4gICAgfSxcbiAgICB1c2VyX2lkOiB7XG4gICAgICB0eXBlOiBCdWZmZXJcbiAgICB9XG4gIH0sXG4gIHtcbiAgICBjb2xsZWN0aW9uOiAnc2Vzc2lvbnMnLFxuICB9XG4pO1xuXG5leHBvcnQgY29uc3QgU2Vzc2lvbiA9IG1vbmdvb3NlLm1vZGVsKCdTZXNzaW9uJywgU2Vzc2lvblNjaGVtYSk7XG5cbmV4cG9ydCBjb25zdCBTZXNzaW9uVEMgPSBjb21wb3NlV2l0aE1vbmdvb3NlKFNlc3Npb24pO1xuXG5TZXNzaW9uVEMuYWRkUmVsYXRpb24oJ3VzZXInLCB7XG4gIHJlc29sdmVyOiAoKSA9PiBVc2VyVEMuZ2V0UmVzb2x2ZXIoJ2ZpbmRPbmUnKSxcbiAgcHJlcGFyZUFyZ3M6IHtcbiAgICBmaWx0ZXI6IHNvdXJjZSA9PiAoeyBpZDogc291cmNlLnVzZXJfaWQudG9TdHJpbmcoJ2hleCcpIH0pLFxuICB9LFxuICBwcm9qZWN0aW9uOiB7IHVzZXJfaWQ6IHRydWUgfSxcbn0pOyJdfQ==",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "session.js"
      ],
      "names": [
        "SessionSchema",
        "Schema",
        "_id",
        "Buffer",
        "id",
        "type",
        "String",
        "get",
        "toString",
        "set",
        "val",
        "_conditions",
        "uuidBuffer",
        "Types",
        "parse",
        "subtype",
        "Binary",
        "SUBTYPE_UUID",
        "toObject",
        "created",
        "Date",
        "csrf_secret",
        "expires",
        "ip",
        "meta",
        "agent",
        "browser",
        "family",
        "version",
        "device",
        "os",
        "persist",
        "Boolean",
        "token",
        "ttl",
        "user_id",
        "collection",
        "Session",
        "model",
        "SessionTC",
        "addRelation",
        "resolver",
        "getResolver",
        "prepareArgs",
        "filter",
        "source",
        "projection"
      ],
      "mappings": ";;;;;;;AAEA;;;;AACA;;;;AACA;;;;AACA;;;;AAEA;;;;AAEO,MAAMA,wCAAgB,IAAI,mBAASC,MAAb,CAC3B;AACEC,OAAKC,MADP;AAEEC,MAAI;AACFC,UAAMC,MADJ;AAEFC,SAAK,eAAW;AACd,aAAO,KAAKL,GAAL,CAASM,QAAT,CAAkB,KAAlB,CAAP;AACD,KAJC;AAKFC,SAAK,aAASC,GAAT,EAAc;AACjB,UAAI,KAAKC,WAAL,IAAoB,KAAKA,WAAL,CAAiBP,EAAzC,EAA6C;AAC3C,YAAIQ,aAAa,IAAI,mBAASC,KAAT,CAAeV,MAAnB,CAA0B,oBAAUW,KAAV,CAAgBJ,GAAhB,CAA1B,CAAjB;AACAE,mBAAWG,OAAX,CAAmB,eAAKC,MAAL,CAAYC,YAA/B;AACA,aAAKN,WAAL,CAAiBT,GAAjB,GAAuBU,WAAWM,QAAX,EAAvB;;AAEA,eAAO,KAAKP,WAAL,CAAiBP,EAAxB;AACD;AACF;AAbC,GAFN;AAiBEe,WAAS;AACPd,UAAMe;AADC,GAjBX;AAoBEC,eAAa;AACXhB,UAAMC;AADK,GApBf;AAuBEgB,WAAS;AACPjB,UAAMe;AADC,GAvBX;AA0BEG,MAAI;AACFlB,UAAMC,MADJ,CACW;AADX,GA1BN;AA6BEkB,QAAM;AACJC,WAAO;AACLpB,YAAMC;AADD,KADH;AAIJoB,aAAS;AACPC,cAAQ;AACNtB,cAAMC;AADA,OADD;AAIPsB,eAAS;AACPvB,cAAMC;AADC;AAJF,KAJL;AAYJuB,YAAQ;AACNF,cAAQ;AACNtB,cAAMC;AADA,OADF;AAINsB,eAAS;AACPvB,cAAMC;AADC;AAJH,KAZJ;AAoBJwB,QAAI;AACFH,cAAQ;AACNtB,cAAMC;AADA,OADN;AAIFsB,eAAS;AACPvB,cAAMC;AADC;AAJP;AApBA,GA7BR;;AA2DEyB,WAAS;AACP1B,UAAM2B;AADC,GA3DX;AA8DEC,SAAO;AACL5B,UAAMC;AADD,GA9DT;AAiEE4B,OAAK;AACH7B,UAAMe;AADH,GAjEP;AAoEEe,WAAS;AACP9B,UAAMF;AADC;AApEX,CAD2B,EAyE3B;AACEiC,cAAY;AADd,CAzE2B,CAAtB;;AA8EA,MAAMC,4BAAU,mBAASC,KAAT,CAAe,SAAf,EAA0BtC,aAA1B,CAAhB;;AAEA,MAAMuC,gCAAY,oBAAoBF,OAApB,CAAlB;;AAEPE,UAAUC,WAAV,CAAsB,MAAtB,EAA8B;AAC5BC,YAAU,MAAM,aAAOC,WAAP,CAAmB,SAAnB,CADY;AAE5BC,eAAa;AACXC,YAAQC,WAAW,EAAEzC,IAAIyC,OAAOV,OAAP,CAAe3B,QAAf,CAAwB,KAAxB,CAAN,EAAX;AADG,GAFe;AAK5BsC,cAAY,EAAEX,SAAS,IAAX;AALgB,CAA9B",
      "file": "session.js",
      "sourceRoot": "/app/schema/models",
      "sourcesContent": [
        "/* @flow */\n\nimport bson from 'bson';\nimport mongoose from 'mongoose';\nimport composeWithMongoose from 'graphql-compose-mongoose/node8';\nimport uuidParse from 'uuid-parse';\n\nimport { UserTC } from './user';\n\nexport const SessionSchema = new mongoose.Schema(\n  {\n    _id: Buffer,\n    id: {\n      type: String,\n      get: function() {\n        return this._id.toString('hex')\n      },\n      set: function(val) {\n        if (this._conditions && this._conditions.id) {\n          var uuidBuffer = new mongoose.Types.Buffer(uuidParse.parse(val));\n          uuidBuffer.subtype(bson.Binary.SUBTYPE_UUID);\n          this._conditions._id = uuidBuffer.toObject();\n          \n          delete this._conditions.id;\n        }\n      }\n    },\n    created: {\n      type: Date\n    },\n    csrf_secret: {\n      type: String\n    },\n    expires: {\n      type: Date\n    },\n    ip: {\n      type: String // null\n    },\n    meta: {\n      agent: {\n        type: String \n      },\n      browser: {\n        family: {\n          type: String\n        },\n        version: {\n          type: String\n        },\n      },\n      device: {\n        family: {\n          type: String\n        },\n        version: {\n          type: String\n        },\n      },\n      os: {\n        family: {\n          type: String\n        },\n        version: {\n          type: String\n        },\n      },\n    },\n    \n    persist: {\n      type: Boolean\n    },\n    token: {\n      type: String\n    },\n    ttl: {\n      type: Date\n    },\n    user_id: {\n      type: Buffer\n    }\n  },\n  {\n    collection: 'sessions',\n  }\n);\n\nexport const Session = mongoose.model('Session', SessionSchema);\n\nexport const SessionTC = composeWithMongoose(Session);\n\nSessionTC.addRelation('user', {\n  resolver: () => UserTC.getResolver('findOne'),\n  prepareArgs: {\n    filter: source => ({ id: source.user_id.toString('hex') }),\n  },\n  projection: { user_id: true },\n});"
      ]
    },
    "mtime": 1521594080480
  },
  "{\"filename\":\"/app/middleware/authorization.js\",\"env\":{},\"retainLines\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"presets\":[],\"plugins\":[[[],null],[[],null],[[],{\"loose\":false}],[[],{\"spec\":false,\"loose\":false}],[[],{\"spec\":false,\"loose\":false}],[[],{\"spec\":false,\"loose\":false}],[[],{\"spec\":false,\"loose\":false}],[[],{\"spec\":false,\"loose\":false}],[[],{\"spec\":false,\"loose\":false}]],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"minified\":false,\"sourceRoot\":\"/app/middleware\",\"babelrc\":true,\"sourceType\":\"module\",\"moduleIds\":false,\"passPerPreset\":false,\"parserOpts\":false,\"generatorOpts\":false}:6.26.0": {
    "metadata": {
      "usedHelpers": [
        "interopRequireDefault"
      ],
      "marked": [],
      "modules": {
        "imports": [
          {
            "source": "lodash",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "_"
              }
            ]
          },
          {
            "source": "config",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "config"
              }
            ]
          },
          {
            "source": "moment",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "moment"
              }
            ]
          },
          {
            "source": "./session",
            "imported": [
              "SessionTC"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "SessionTC",
                "local": "SessionTC"
              }
            ]
          }
        ],
        "exports": {
          "exported": [
            "req",
            "res",
            "next"
          ],
          "specifiers": [
            {
              "kind": "local",
              "local": "req",
              "exported": "default"
            },
            {
              "kind": "local",
              "local": "res",
              "exported": "default"
            },
            {
              "kind": "local",
              "local": "next",
              "exported": "default"
            }
          ]
        }
      }
    },
    "options": {
      "filename": "/app/middleware/authorization.js",
      "filenameRelative": "/app/middleware/authorization.js",
      "env": {},
      "retainLines": false,
      "highlightCode": true,
      "suppressDeprecationMessages": false,
      "presets": [],
      "plugins": [
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ]
      ],
      "ignore": [],
      "code": true,
      "metadata": true,
      "ast": false,
      "comments": true,
      "compact": "auto",
      "minified": false,
      "sourceMaps": "both",
      "sourceMapTarget": "authorization.js",
      "sourceFileName": "authorization.js",
      "sourceRoot": "/app/middleware",
      "babelrc": false,
      "sourceType": "module",
      "moduleRoot": "/app/middleware",
      "moduleIds": false,
      "passPerPreset": false,
      "parserOpts": false,
      "generatorOpts": false,
      "basename": "authorization"
    },
    "ignored": false,
    "code": "'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\n\nexports.default = function (req, res, next) {\n\tlet cookieConsent = _config2.default.cookieConsent;\n\n\tconsole.log(req);\n\n\tif (!req.cookies['cookieconsent']) {\n\t\tif (req.cookies['sessionid']) {\n\t\t\tres.clearCookie('sessionid', {\n\t\t\t\tdomain: _config2.default.domain,\n\t\t\t\tsecure: true,\n\t\t\t\thttpOnly: true\n\t\t\t});\n\t\t}\n\t}\n\n\t// let $match = {\n\t//   $match: {\n\t//     token: req.cookies['sessionid'],\n\t//     expires: {\n\t//       $gt: moment.utc().toDate()\n\t//     },\n\t//     logout: null\n\t//   }\n\t// };\n\n\tlet result = _session.SessionTC.getResolver('findMany').resolve({\n\t\targs: {\n\t\t\ttoken: req.cookies['sessionid'],\n\t\t\texpires: {\n\t\t\t\t$gt: _moment2.default.utc().toDate()\n\t\t\t},\n\t\t\tlogout: null\n\t\t}\n\t});\n\n\tconsole.log(result);\n\n\t//   mongo.db('live').collection('sessions').aggregate([$match, $lookup, $project]).toArray()\n\t//     .then(function(sessions) {\n\t//       if (sessions.length > 1) {\n\t//         return Promise.reject(new Error('Duplicate session.'));\n\t//       }\n\n\t//       if (sessions.length === 0) {\n\t//         req.session = null;\n\t//       }\n\t//       else {\n\t//         let session = _.omit(sessions[0], 'users');\n\t//         let user = sessions[0].users[0];\n\n\t//         req.session = session;\n\t//         req.user = user || null;\n\t//       }\n\n\t//       next();\n\t//     })\n\t//     .catch(function(err) {\n\t//       next(err);\n\t//     });\n};\n\nvar _lodash = require('lodash');\n\nvar _lodash2 = _interopRequireDefault(_lodash);\n\nvar _config = require('config');\n\nvar _config2 = _interopRequireDefault(_config);\n\nvar _moment = require('moment');\n\nvar _moment2 = _interopRequireDefault(_moment);\n\nvar _session = require('./session');\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nlet $lookup = {\n\t$lookup: {\n\t\tfrom: 'users',\n\t\tlocalField: 'user_id',\n\t\tforeignField: '_id',\n\t\tas: 'users'\n\t}\n};\n\nlet $project = {\n\t$project: {\n\t\t_id: false,\n\t\ttoken: true,\n\t\tcsrf_secret: true,\n\t\texpires: true,\n\t\t'users._id': true,\n\t\t'users.handle': true,\n\t\t'users.email': true,\n\t\t'users.last_name': true,\n\t\t'users.first_name': true,\n\t\t'users.last_login': true,\n\t\t'users.settings': true\n\t}\n};\n\n;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImF1dGhvcml6YXRpb24uanMiXSwibmFtZXMiOlsicmVxIiwicmVzIiwibmV4dCIsImNvb2tpZUNvbnNlbnQiLCJjb25zb2xlIiwibG9nIiwiY29va2llcyIsImNsZWFyQ29va2llIiwiZG9tYWluIiwic2VjdXJlIiwiaHR0cE9ubHkiLCJyZXN1bHQiLCJnZXRSZXNvbHZlciIsInJlc29sdmUiLCJhcmdzIiwidG9rZW4iLCJleHBpcmVzIiwiJGd0IiwidXRjIiwidG9EYXRlIiwibG9nb3V0IiwiJGxvb2t1cCIsImZyb20iLCJsb2NhbEZpZWxkIiwiZm9yZWlnbkZpZWxkIiwiYXMiLCIkcHJvamVjdCIsIl9pZCIsImNzcmZfc2VjcmV0Il0sIm1hcHBpbmdzIjoiOzs7Ozs7a0JBaUNlLFVBQVNBLEdBQVQsRUFBY0MsR0FBZCxFQUFtQkMsSUFBbkIsRUFBeUI7QUFDdEMsS0FBSUMsZ0JBQWdCLGlCQUFPQSxhQUEzQjs7QUFFQUMsU0FBUUMsR0FBUixDQUFZTCxHQUFaOztBQUVELEtBQUksQ0FBQ0EsSUFBSU0sT0FBSixDQUFZLGVBQVosQ0FBTCxFQUFtQztBQUNsQyxNQUFJTixJQUFJTSxPQUFKLENBQVksV0FBWixDQUFKLEVBQThCO0FBQzdCTCxPQUFJTSxXQUFKLENBQWdCLFdBQWhCLEVBQTZCO0FBQzVCQyxZQUFRLGlCQUFPQSxNQURhO0FBRTVCQyxZQUFRLElBRm9CO0FBRzVCQyxjQUFVO0FBSGtCLElBQTdCO0FBS0E7QUFDRDs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsS0FBSUMsU0FBUyxtQkFBVUMsV0FBVixDQUFzQixVQUF0QixFQUFrQ0MsT0FBbEMsQ0FBMEM7QUFDckRDLFFBQU07QUFDSkMsVUFBT2YsSUFBSU0sT0FBSixDQUFZLFdBQVosQ0FESDtBQUVKVSxZQUFTO0FBQ1BDLFNBQUssaUJBQU9DLEdBQVAsR0FBYUMsTUFBYjtBQURFLElBRkw7QUFLSkMsV0FBUTtBQUxKO0FBRCtDLEVBQTFDLENBQWI7O0FBVUFoQixTQUFRQyxHQUFSLENBQVlNLE1BQVo7O0FBRUY7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQyxDOztBQTVGRDs7OztBQUNBOzs7O0FBQ0E7Ozs7QUFFQTs7OztBQUdBLElBQUlVLFVBQVU7QUFDYkEsVUFBUztBQUNSQyxRQUFNLE9BREU7QUFFUkMsY0FBWSxTQUZKO0FBR1JDLGdCQUFjLEtBSE47QUFJUkMsTUFBSTtBQUpJO0FBREksQ0FBZDs7QUFTQSxJQUFJQyxXQUFXO0FBQ2RBLFdBQVU7QUFDVEMsT0FBSyxLQURJO0FBRVRaLFNBQU8sSUFGRTtBQUdUYSxlQUFhLElBSEo7QUFJVFosV0FBUyxJQUpBO0FBS1QsZUFBYSxJQUxKO0FBTVQsa0JBQWdCLElBTlA7QUFPVCxpQkFBZSxJQVBOO0FBUVQscUJBQW1CLElBUlY7QUFTVCxzQkFBb0IsSUFUWDtBQVVULHNCQUFvQixJQVZYO0FBV1Qsb0JBQWtCO0FBWFQ7QUFESSxDQUFmOztBQTRFQyIsImZpbGUiOiJhdXRob3JpemF0aW9uLmpzIiwic291cmNlUm9vdCI6Ii9hcHAvbWlkZGxld2FyZSIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBfIGZyb20gJ2xvZGFzaCc7XG5pbXBvcnQgY29uZmlnIGZyb20gJ2NvbmZpZyc7XG5pbXBvcnQgbW9tZW50IGZyb20gJ21vbWVudCc7XG5cbmltcG9ydCB7IFNlc3Npb25UQyB9IGZyb20gJy4vc2Vzc2lvbic7XG5cblxubGV0ICRsb29rdXAgPSB7XG5cdCRsb29rdXA6IHtcblx0XHRmcm9tOiAndXNlcnMnLFxuXHRcdGxvY2FsRmllbGQ6ICd1c2VyX2lkJyxcblx0XHRmb3JlaWduRmllbGQ6ICdfaWQnLFxuXHRcdGFzOiAndXNlcnMnXG5cdH1cbn07XG5cbmxldCAkcHJvamVjdCA9IHtcblx0JHByb2plY3Q6IHtcblx0XHRfaWQ6IGZhbHNlLFxuXHRcdHRva2VuOiB0cnVlLFxuXHRcdGNzcmZfc2VjcmV0OiB0cnVlLFxuXHRcdGV4cGlyZXM6IHRydWUsXG5cdFx0J3VzZXJzLl9pZCc6IHRydWUsXG5cdFx0J3VzZXJzLmhhbmRsZSc6IHRydWUsXG5cdFx0J3VzZXJzLmVtYWlsJzogdHJ1ZSxcblx0XHQndXNlcnMubGFzdF9uYW1lJzogdHJ1ZSxcblx0XHQndXNlcnMuZmlyc3RfbmFtZSc6IHRydWUsXG5cdFx0J3VzZXJzLmxhc3RfbG9naW4nOiB0cnVlLFxuXHRcdCd1c2Vycy5zZXR0aW5ncyc6IHRydWVcblx0fVxufTtcblxuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbihyZXEsIHJlcywgbmV4dCkge1xuICBsZXQgY29va2llQ29uc2VudCA9IGNvbmZpZy5jb29raWVDb25zZW50O1xuICBcbiAgY29uc29sZS5sb2cocmVxKTtcblxuXHRpZiAoIXJlcS5jb29raWVzWydjb29raWVjb25zZW50J10pIHtcblx0XHRpZiAocmVxLmNvb2tpZXNbJ3Nlc3Npb25pZCddKSB7XG5cdFx0XHRyZXMuY2xlYXJDb29raWUoJ3Nlc3Npb25pZCcsIHtcblx0XHRcdFx0ZG9tYWluOiBjb25maWcuZG9tYWluLFxuXHRcdFx0XHRzZWN1cmU6IHRydWUsXG5cdFx0XHRcdGh0dHBPbmx5OiB0cnVlXG5cdFx0XHR9KTtcblx0XHR9XG5cdH1cbiAgXG4gIC8vIGxldCAkbWF0Y2ggPSB7XG4gIC8vICAgJG1hdGNoOiB7XG4gIC8vICAgICB0b2tlbjogcmVxLmNvb2tpZXNbJ3Nlc3Npb25pZCddLFxuICAvLyAgICAgZXhwaXJlczoge1xuICAvLyAgICAgICAkZ3Q6IG1vbWVudC51dGMoKS50b0RhdGUoKVxuICAvLyAgICAgfSxcbiAgLy8gICAgIGxvZ291dDogbnVsbFxuICAvLyAgIH1cbiAgLy8gfTtcbiAgXG4gIGxldCByZXN1bHQgPSBTZXNzaW9uVEMuZ2V0UmVzb2x2ZXIoJ2ZpbmRNYW55JykucmVzb2x2ZSh7XG4gICAgYXJnczoge1xuICAgICAgdG9rZW46IHJlcS5jb29raWVzWydzZXNzaW9uaWQnXSxcbiAgICAgIGV4cGlyZXM6IHtcbiAgICAgICAgJGd0OiBtb21lbnQudXRjKCkudG9EYXRlKClcbiAgICAgIH0sXG4gICAgICBsb2dvdXQ6IG51bGxcbiAgICB9XG4gIH0pO1xuICBcbiAgY29uc29sZS5sb2cocmVzdWx0KTtcblxuLy8gICBtb25nby5kYignbGl2ZScpLmNvbGxlY3Rpb24oJ3Nlc3Npb25zJykuYWdncmVnYXRlKFskbWF0Y2gsICRsb29rdXAsICRwcm9qZWN0XSkudG9BcnJheSgpXG4vLyAgICAgLnRoZW4oZnVuY3Rpb24oc2Vzc2lvbnMpIHtcbi8vICAgICAgIGlmIChzZXNzaW9ucy5sZW5ndGggPiAxKSB7XG4vLyAgICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChuZXcgRXJyb3IoJ0R1cGxpY2F0ZSBzZXNzaW9uLicpKTtcbi8vICAgICAgIH1cblxuLy8gICAgICAgaWYgKHNlc3Npb25zLmxlbmd0aCA9PT0gMCkge1xuLy8gICAgICAgICByZXEuc2Vzc2lvbiA9IG51bGw7XG4vLyAgICAgICB9XG4vLyAgICAgICBlbHNlIHtcbi8vICAgICAgICAgbGV0IHNlc3Npb24gPSBfLm9taXQoc2Vzc2lvbnNbMF0sICd1c2VycycpO1xuLy8gICAgICAgICBsZXQgdXNlciA9IHNlc3Npb25zWzBdLnVzZXJzWzBdO1xuXG4vLyAgICAgICAgIHJlcS5zZXNzaW9uID0gc2Vzc2lvbjtcbi8vICAgICAgICAgcmVxLnVzZXIgPSB1c2VyIHx8IG51bGw7XG4vLyAgICAgICB9XG5cbi8vICAgICAgIG5leHQoKTtcbi8vICAgICB9KVxuLy8gICAgIC5jYXRjaChmdW5jdGlvbihlcnIpIHtcbi8vICAgICAgIG5leHQoZXJyKTtcbi8vICAgICB9KTtcbn07XG4iXX0=",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "authorization.js"
      ],
      "names": [
        "req",
        "res",
        "next",
        "cookieConsent",
        "console",
        "log",
        "cookies",
        "clearCookie",
        "domain",
        "secure",
        "httpOnly",
        "result",
        "getResolver",
        "resolve",
        "args",
        "token",
        "expires",
        "$gt",
        "utc",
        "toDate",
        "logout",
        "$lookup",
        "from",
        "localField",
        "foreignField",
        "as",
        "$project",
        "_id",
        "csrf_secret"
      ],
      "mappings": ";;;;;;kBAiCe,UAASA,GAAT,EAAcC,GAAd,EAAmBC,IAAnB,EAAyB;AACtC,KAAIC,gBAAgB,iBAAOA,aAA3B;;AAEAC,SAAQC,GAAR,CAAYL,GAAZ;;AAED,KAAI,CAACA,IAAIM,OAAJ,CAAY,eAAZ,CAAL,EAAmC;AAClC,MAAIN,IAAIM,OAAJ,CAAY,WAAZ,CAAJ,EAA8B;AAC7BL,OAAIM,WAAJ,CAAgB,WAAhB,EAA6B;AAC5BC,YAAQ,iBAAOA,MADa;AAE5BC,YAAQ,IAFoB;AAG5BC,cAAU;AAHkB,IAA7B;AAKA;AACD;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,KAAIC,SAAS,mBAAUC,WAAV,CAAsB,UAAtB,EAAkCC,OAAlC,CAA0C;AACrDC,QAAM;AACJC,UAAOf,IAAIM,OAAJ,CAAY,WAAZ,CADH;AAEJU,YAAS;AACPC,SAAK,iBAAOC,GAAP,GAAaC,MAAb;AADE,IAFL;AAKJC,WAAQ;AALJ;AAD+C,EAA1C,CAAb;;AAUAhB,SAAQC,GAAR,CAAYM,MAAZ;;AAEF;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACC,C;;AA5FD;;;;AACA;;;;AACA;;;;AAEA;;;;AAGA,IAAIU,UAAU;AACbA,UAAS;AACRC,QAAM,OADE;AAERC,cAAY,SAFJ;AAGRC,gBAAc,KAHN;AAIRC,MAAI;AAJI;AADI,CAAd;;AASA,IAAIC,WAAW;AACdA,WAAU;AACTC,OAAK,KADI;AAETZ,SAAO,IAFE;AAGTa,eAAa,IAHJ;AAITZ,WAAS,IAJA;AAKT,eAAa,IALJ;AAMT,kBAAgB,IANP;AAOT,iBAAe,IAPN;AAQT,qBAAmB,IARV;AAST,sBAAoB,IATX;AAUT,sBAAoB,IAVX;AAWT,oBAAkB;AAXT;AADI,CAAf;;AA4EC",
      "file": "authorization.js",
      "sourceRoot": "/app/middleware",
      "sourcesContent": [
        "import _ from 'lodash';\nimport config from 'config';\nimport moment from 'moment';\n\nimport { SessionTC } from './session';\n\n\nlet $lookup = {\n\t$lookup: {\n\t\tfrom: 'users',\n\t\tlocalField: 'user_id',\n\t\tforeignField: '_id',\n\t\tas: 'users'\n\t}\n};\n\nlet $project = {\n\t$project: {\n\t\t_id: false,\n\t\ttoken: true,\n\t\tcsrf_secret: true,\n\t\texpires: true,\n\t\t'users._id': true,\n\t\t'users.handle': true,\n\t\t'users.email': true,\n\t\t'users.last_name': true,\n\t\t'users.first_name': true,\n\t\t'users.last_login': true,\n\t\t'users.settings': true\n\t}\n};\n\n\nexport default function(req, res, next) {\n  let cookieConsent = config.cookieConsent;\n  \n  console.log(req);\n\n\tif (!req.cookies['cookieconsent']) {\n\t\tif (req.cookies['sessionid']) {\n\t\t\tres.clearCookie('sessionid', {\n\t\t\t\tdomain: config.domain,\n\t\t\t\tsecure: true,\n\t\t\t\thttpOnly: true\n\t\t\t});\n\t\t}\n\t}\n  \n  // let $match = {\n  //   $match: {\n  //     token: req.cookies['sessionid'],\n  //     expires: {\n  //       $gt: moment.utc().toDate()\n  //     },\n  //     logout: null\n  //   }\n  // };\n  \n  let result = SessionTC.getResolver('findMany').resolve({\n    args: {\n      token: req.cookies['sessionid'],\n      expires: {\n        $gt: moment.utc().toDate()\n      },\n      logout: null\n    }\n  });\n  \n  console.log(result);\n\n//   mongo.db('live').collection('sessions').aggregate([$match, $lookup, $project]).toArray()\n//     .then(function(sessions) {\n//       if (sessions.length > 1) {\n//         return Promise.reject(new Error('Duplicate session.'));\n//       }\n\n//       if (sessions.length === 0) {\n//         req.session = null;\n//       }\n//       else {\n//         let session = _.omit(sessions[0], 'users');\n//         let user = sessions[0].users[0];\n\n//         req.session = session;\n//         req.user = user || null;\n//       }\n\n//       next();\n//     })\n//     .catch(function(err) {\n//       next(err);\n//     });\n};\n"
      ]
    },
    "mtime": 1521502980823
  },
  "{\"filename\":\"/app/middleware/cookie-authorization.js\",\"env\":{},\"retainLines\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"presets\":[],\"plugins\":[[[],null],[[],null],[[],{\"loose\":false}],[[],{\"spec\":false,\"loose\":false}],[[],{\"spec\":false,\"loose\":false}],[[],{\"spec\":false,\"loose\":false}],[[],{\"spec\":false,\"loose\":false}],[[],{\"spec\":false,\"loose\":false}],[[],{\"spec\":false,\"loose\":false}]],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"minified\":false,\"sourceRoot\":\"/app/middleware\",\"babelrc\":true,\"sourceType\":\"module\",\"moduleIds\":false,\"passPerPreset\":false,\"parserOpts\":false,\"generatorOpts\":false}:6.26.0": {
    "metadata": {
      "usedHelpers": [
        "asyncToGenerator",
        "interopRequireDefault"
      ],
      "marked": [],
      "modules": {
        "imports": [
          {
            "source": "lodash",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "_"
              }
            ]
          },
          {
            "source": "config",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "config"
              }
            ]
          },
          {
            "source": "moment",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "moment"
              }
            ]
          },
          {
            "source": "../schema/models/session",
            "imported": [
              "SessionTC"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "SessionTC",
                "local": "SessionTC"
              }
            ]
          }
        ],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      }
    },
    "options": {
      "filename": "/app/middleware/cookie-authorization.js",
      "filenameRelative": "/app/middleware/cookie-authorization.js",
      "env": {},
      "retainLines": false,
      "highlightCode": true,
      "suppressDeprecationMessages": false,
      "presets": [],
      "plugins": [
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ]
      ],
      "ignore": [],
      "code": true,
      "metadata": true,
      "ast": false,
      "comments": true,
      "compact": "auto",
      "minified": false,
      "sourceMaps": "both",
      "sourceMapTarget": "cookie-authorization.js",
      "sourceFileName": "cookie-authorization.js",
      "sourceRoot": "/app/middleware",
      "babelrc": false,
      "sourceType": "module",
      "moduleRoot": "/app/middleware",
      "moduleIds": false,
      "passPerPreset": false,
      "parserOpts": false,
      "generatorOpts": false,
      "basename": "cookie-authorization"
    },
    "ignored": false,
    "code": "'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _lodash = require('lodash');\n\nvar _lodash2 = _interopRequireDefault(_lodash);\n\nvar _config = require('config');\n\nvar _config2 = _interopRequireDefault(_config);\n\nvar _moment = require('moment');\n\nvar _moment2 = _interopRequireDefault(_moment);\n\nvar _session = require('../schema/models/session');\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _asyncToGenerator(fn) { return function () { var gen = fn.apply(this, arguments); return new Promise(function (resolve, reject) { function step(key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { return Promise.resolve(value).then(function (value) { step(\"next\", value); }, function (err) { step(\"throw\", err); }); } } return step(\"next\"); }); }; }\n\nlet $lookup = {\n  $lookup: {\n    from: 'users',\n    localField: 'user_id',\n    foreignField: '_id',\n    as: 'users'\n  }\n};\n\nlet $project = {\n  $project: {\n    _id: false,\n    token: true,\n    csrf_secret: true,\n    expires: true,\n    'users._id': true,\n    'users.handle': true,\n    'users.email': true,\n    'users.last_name': true,\n    'users.first_name': true,\n    'users.last_login': true,\n    'users.settings': true\n  }\n};\n\nexports.default = (() => {\n  var _ref = _asyncToGenerator(function* (req, res, next) {\n    let cookieConsent = _config2.default.cookieConsent;\n\n    if (!req.cookies['cookieconsent']) {\n      if (req.cookies['sessionid']) {\n        res.clearCookie('sessionid', {\n          domain: _config2.default.domain,\n          secure: true,\n          httpOnly: true\n        });\n      }\n    }\n\n    console.log(req.cookies);\n\n    let result = yield _session.SessionTC.getResolver('findMany').resolve({\n      args: {\n        filter: {\n          token: req.cookies['sessionid'],\n          expires: {\n            $gt: _moment2.default.utc().toDate()\n          },\n          logout: null\n        }\n      },\n      projection: {\n        user: true,\n        token: true,\n        csrf_secret: true,\n        expires: true\n      }\n    });\n\n    console.log(result);\n\n    //   if (result.length > 1) {\n    //     return Promise.reject(new Error('Duplicate session.'));\n    //   }\n\n    //   if (result.length === 0) {\n    //     req.session = null;\n    //   }\n    //   else {\n    //     let session = _.omit(result[0], 'user');\n    //     let user = result[0].user;\n\n    //     req.session = session;\n    //     req.user = user || null;\n\n    //     next();\n    //   }\n\n    res.cookie(_config2.default.sessions.cookieName, '2EFCEBCFA93E42C7A722023AC5A664EE254502B5C96A41F9B0DDB43F2CEEC2697070D8997FAB4039A2FBDD788DA766CE', {\n      domain: 'lifescope-api.glitch.me',\n      secure: true,\n      httpOnly: true,\n      expires: 0\n    });\n\n    // console.log(result);\n\n    //   mongo.db('live').collection('sessions').aggregate([$match, $lookup, $project]).toArray()\n    //     .then(function(sessions) {\n    //       if (sessions.length > 1) {\n    //         return Promise.reject(new Error('Duplicate session.'));\n    //       }\n\n    //       if (sessions.length === 0) {\n    //         req.session = null;\n    //       }\n    //       else {\n    //         let session = _.omit(sessions[0], 'users');\n    //         let user = sessions[0].users[0];\n\n    //         req.session = session;\n    //         req.user = user || null;\n    //       }\n\n    //       next();\n    //     })\n    //     .catch(function(err) {\n    //       next(err);\n    //     });\n\n    next();\n  });\n\n  return function (_x, _x2, _x3) {\n    return _ref.apply(this, arguments);\n  };\n})();\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNvb2tpZS1hdXRob3JpemF0aW9uLmpzIl0sIm5hbWVzIjpbIiRsb29rdXAiLCJmcm9tIiwibG9jYWxGaWVsZCIsImZvcmVpZ25GaWVsZCIsImFzIiwiJHByb2plY3QiLCJfaWQiLCJ0b2tlbiIsImNzcmZfc2VjcmV0IiwiZXhwaXJlcyIsInJlcSIsInJlcyIsIm5leHQiLCJjb29raWVDb25zZW50IiwiY29va2llcyIsImNsZWFyQ29va2llIiwiZG9tYWluIiwic2VjdXJlIiwiaHR0cE9ubHkiLCJjb25zb2xlIiwibG9nIiwicmVzdWx0IiwiZ2V0UmVzb2x2ZXIiLCJyZXNvbHZlIiwiYXJncyIsImZpbHRlciIsIiRndCIsInV0YyIsInRvRGF0ZSIsImxvZ291dCIsInByb2plY3Rpb24iLCJ1c2VyIiwiY29va2llIiwic2Vzc2lvbnMiLCJjb29raWVOYW1lIl0sIm1hcHBpbmdzIjoiOzs7Ozs7QUFBQTs7OztBQUNBOzs7O0FBQ0E7Ozs7QUFFQTs7Ozs7O0FBR0EsSUFBSUEsVUFBVTtBQUNiQSxXQUFTO0FBQ1JDLFVBQU0sT0FERTtBQUVSQyxnQkFBWSxTQUZKO0FBR1JDLGtCQUFjLEtBSE47QUFJUkMsUUFBSTtBQUpJO0FBREksQ0FBZDs7QUFTQSxJQUFJQyxXQUFXO0FBQ2RBLFlBQVU7QUFDVEMsU0FBSyxLQURJO0FBRVRDLFdBQU8sSUFGRTtBQUdUQyxpQkFBYSxJQUhKO0FBSVRDLGFBQVMsSUFKQTtBQUtULGlCQUFhLElBTEo7QUFNVCxvQkFBZ0IsSUFOUDtBQU9ULG1CQUFlLElBUE47QUFRVCx1QkFBbUIsSUFSVjtBQVNULHdCQUFvQixJQVRYO0FBVVQsd0JBQW9CLElBVlg7QUFXVCxzQkFBa0I7QUFYVDtBQURJLENBQWY7OzsrQkFpQmUsV0FBZUMsR0FBZixFQUFvQkMsR0FBcEIsRUFBeUJDLElBQXpCLEVBQStCO0FBQzVDLFFBQUlDLGdCQUFnQixpQkFBT0EsYUFBM0I7O0FBRUQsUUFBSSxDQUFDSCxJQUFJSSxPQUFKLENBQVksZUFBWixDQUFMLEVBQW1DO0FBQ2xDLFVBQUlKLElBQUlJLE9BQUosQ0FBWSxXQUFaLENBQUosRUFBOEI7QUFDN0JILFlBQUlJLFdBQUosQ0FBZ0IsV0FBaEIsRUFBNkI7QUFDNUJDLGtCQUFRLGlCQUFPQSxNQURhO0FBRTVCQyxrQkFBUSxJQUZvQjtBQUc1QkMsb0JBQVU7QUFIa0IsU0FBN0I7QUFLQTtBQUNEOztBQUVBQyxZQUFRQyxHQUFSLENBQVlWLElBQUlJLE9BQWhCOztBQUVBLFFBQUlPLFNBQVMsTUFBTSxtQkFBVUMsV0FBVixDQUFzQixVQUF0QixFQUFrQ0MsT0FBbEMsQ0FBMEM7QUFDM0RDLFlBQU07QUFDSkMsZ0JBQVE7QUFDTmxCLGlCQUFPRyxJQUFJSSxPQUFKLENBQVksV0FBWixDQUREO0FBRU5MLG1CQUFTO0FBQ1BpQixpQkFBSyxpQkFBT0MsR0FBUCxHQUFhQyxNQUFiO0FBREUsV0FGSDtBQUtOQyxrQkFBUTtBQUxGO0FBREosT0FEcUQ7QUFVM0RDLGtCQUFZO0FBQ1ZDLGNBQU0sSUFESTtBQUVWeEIsZUFBTyxJQUZHO0FBR1ZDLHFCQUFhLElBSEg7QUFJVkMsaUJBQVM7QUFKQztBQVYrQyxLQUExQyxDQUFuQjs7QUFrQkFVLFlBQVFDLEdBQVIsQ0FBWUMsTUFBWjs7QUFFRjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFRVYsUUFBSXFCLE1BQUosQ0FBVyxpQkFBT0MsUUFBUCxDQUFnQkMsVUFBM0IsRUFBdUMsa0dBQXZDLEVBQTJJO0FBQ3pJbEIsY0FBUSx5QkFEaUk7QUFFeklDLGNBQVEsSUFGaUk7QUFHeklDLGdCQUFVLElBSCtIO0FBSXpJVCxlQUFTO0FBSmdJLEtBQTNJOztBQU9BOztBQUVGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVFRztBQUNELEciLCJmaWxlIjoiY29va2llLWF1dGhvcml6YXRpb24uanMiLCJzb3VyY2VSb290IjoiL2FwcC9taWRkbGV3YXJlIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IF8gZnJvbSAnbG9kYXNoJztcbmltcG9ydCBjb25maWcgZnJvbSAnY29uZmlnJztcbmltcG9ydCBtb21lbnQgZnJvbSAnbW9tZW50JztcblxuaW1wb3J0IHsgU2Vzc2lvblRDIH0gZnJvbSAnLi4vc2NoZW1hL21vZGVscy9zZXNzaW9uJztcblxuXG5sZXQgJGxvb2t1cCA9IHtcblx0JGxvb2t1cDoge1xuXHRcdGZyb206ICd1c2VycycsXG5cdFx0bG9jYWxGaWVsZDogJ3VzZXJfaWQnLFxuXHRcdGZvcmVpZ25GaWVsZDogJ19pZCcsXG5cdFx0YXM6ICd1c2Vycydcblx0fVxufTtcblxubGV0ICRwcm9qZWN0ID0ge1xuXHQkcHJvamVjdDoge1xuXHRcdF9pZDogZmFsc2UsXG5cdFx0dG9rZW46IHRydWUsXG5cdFx0Y3NyZl9zZWNyZXQ6IHRydWUsXG5cdFx0ZXhwaXJlczogdHJ1ZSxcblx0XHQndXNlcnMuX2lkJzogdHJ1ZSxcblx0XHQndXNlcnMuaGFuZGxlJzogdHJ1ZSxcblx0XHQndXNlcnMuZW1haWwnOiB0cnVlLFxuXHRcdCd1c2Vycy5sYXN0X25hbWUnOiB0cnVlLFxuXHRcdCd1c2Vycy5maXJzdF9uYW1lJzogdHJ1ZSxcblx0XHQndXNlcnMubGFzdF9sb2dpbic6IHRydWUsXG5cdFx0J3VzZXJzLnNldHRpbmdzJzogdHJ1ZVxuXHR9XG59O1xuXG5cbmV4cG9ydCBkZWZhdWx0IGFzeW5jIGZ1bmN0aW9uKHJlcSwgcmVzLCBuZXh0KSB7XG4gIGxldCBjb29raWVDb25zZW50ID0gY29uZmlnLmNvb2tpZUNvbnNlbnQ7XG5cblx0aWYgKCFyZXEuY29va2llc1snY29va2llY29uc2VudCddKSB7XG5cdFx0aWYgKHJlcS5jb29raWVzWydzZXNzaW9uaWQnXSkge1xuXHRcdFx0cmVzLmNsZWFyQ29va2llKCdzZXNzaW9uaWQnLCB7XG5cdFx0XHRcdGRvbWFpbjogY29uZmlnLmRvbWFpbixcblx0XHRcdFx0c2VjdXJlOiB0cnVlLFxuXHRcdFx0XHRodHRwT25seTogdHJ1ZVxuXHRcdFx0fSk7XG5cdFx0fVxuXHR9XG4gIFxuICBjb25zb2xlLmxvZyhyZXEuY29va2llcyk7XG4gIFxuICBsZXQgcmVzdWx0ID0gYXdhaXQgU2Vzc2lvblRDLmdldFJlc29sdmVyKCdmaW5kTWFueScpLnJlc29sdmUoe1xuICAgIGFyZ3M6IHtcbiAgICAgIGZpbHRlcjoge1xuICAgICAgICB0b2tlbjogcmVxLmNvb2tpZXNbJ3Nlc3Npb25pZCddLFxuICAgICAgICBleHBpcmVzOiB7XG4gICAgICAgICAgJGd0OiBtb21lbnQudXRjKCkudG9EYXRlKClcbiAgICAgICAgfSxcbiAgICAgICAgbG9nb3V0OiBudWxsXG4gICAgICB9XG4gICAgfSxcbiAgICBwcm9qZWN0aW9uOiB7XG4gICAgICB1c2VyOiB0cnVlLFxuICAgICAgdG9rZW46IHRydWUsXG4gICAgICBjc3JmX3NlY3JldDogdHJ1ZSxcbiAgICAgIGV4cGlyZXM6IHRydWVcbiAgICB9XG4gIH0pO1xuICBcbiAgY29uc29sZS5sb2cocmVzdWx0KTtcbiAgXG4vLyAgIGlmIChyZXN1bHQubGVuZ3RoID4gMSkge1xuLy8gICAgIHJldHVybiBQcm9taXNlLnJlamVjdChuZXcgRXJyb3IoJ0R1cGxpY2F0ZSBzZXNzaW9uLicpKTtcbi8vICAgfVxuICBcbi8vICAgaWYgKHJlc3VsdC5sZW5ndGggPT09IDApIHtcbi8vICAgICByZXEuc2Vzc2lvbiA9IG51bGw7XG4vLyAgIH1cbi8vICAgZWxzZSB7XG4vLyAgICAgbGV0IHNlc3Npb24gPSBfLm9taXQocmVzdWx0WzBdLCAndXNlcicpO1xuLy8gICAgIGxldCB1c2VyID0gcmVzdWx0WzBdLnVzZXI7XG4gICAgXG4vLyAgICAgcmVxLnNlc3Npb24gPSBzZXNzaW9uO1xuLy8gICAgIHJlcS51c2VyID0gdXNlciB8fCBudWxsO1xuICAgIFxuLy8gICAgIG5leHQoKTtcbi8vICAgfVxuXG4gIHJlcy5jb29raWUoY29uZmlnLnNlc3Npb25zLmNvb2tpZU5hbWUsICcyRUZDRUJDRkE5M0U0MkM3QTcyMjAyM0FDNUE2NjRFRTI1NDUwMkI1Qzk2QTQxRjlCMEREQjQzRjJDRUVDMjY5NzA3MEQ4OTk3RkFCNDAzOUEyRkJERDc4OERBNzY2Q0UnLCB7XG4gICAgZG9tYWluOiAnbGlmZXNjb3BlLWFwaS5nbGl0Y2gubWUnLFxuICAgIHNlY3VyZTogdHJ1ZSxcbiAgICBodHRwT25seTogdHJ1ZSxcbiAgICBleHBpcmVzOiAwXG4gIH0pO1xuICBcbiAgLy8gY29uc29sZS5sb2cocmVzdWx0KTtcblxuLy8gICBtb25nby5kYignbGl2ZScpLmNvbGxlY3Rpb24oJ3Nlc3Npb25zJykuYWdncmVnYXRlKFskbWF0Y2gsICRsb29rdXAsICRwcm9qZWN0XSkudG9BcnJheSgpXG4vLyAgICAgLnRoZW4oZnVuY3Rpb24oc2Vzc2lvbnMpIHtcbi8vICAgICAgIGlmIChzZXNzaW9ucy5sZW5ndGggPiAxKSB7XG4vLyAgICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChuZXcgRXJyb3IoJ0R1cGxpY2F0ZSBzZXNzaW9uLicpKTtcbi8vICAgICAgIH1cblxuLy8gICAgICAgaWYgKHNlc3Npb25zLmxlbmd0aCA9PT0gMCkge1xuLy8gICAgICAgICByZXEuc2Vzc2lvbiA9IG51bGw7XG4vLyAgICAgICB9XG4vLyAgICAgICBlbHNlIHtcbi8vICAgICAgICAgbGV0IHNlc3Npb24gPSBfLm9taXQoc2Vzc2lvbnNbMF0sICd1c2VycycpO1xuLy8gICAgICAgICBsZXQgdXNlciA9IHNlc3Npb25zWzBdLnVzZXJzWzBdO1xuXG4vLyAgICAgICAgIHJlcS5zZXNzaW9uID0gc2Vzc2lvbjtcbi8vICAgICAgICAgcmVxLnVzZXIgPSB1c2VyIHx8IG51bGw7XG4vLyAgICAgICB9XG5cbi8vICAgICAgIG5leHQoKTtcbi8vICAgICB9KVxuLy8gICAgIC5jYXRjaChmdW5jdGlvbihlcnIpIHtcbi8vICAgICAgIG5leHQoZXJyKTtcbi8vICAgICB9KTtcbiAgXG4gIG5leHQoKTtcbn07XG4iXX0=",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "cookie-authorization.js"
      ],
      "names": [
        "$lookup",
        "from",
        "localField",
        "foreignField",
        "as",
        "$project",
        "_id",
        "token",
        "csrf_secret",
        "expires",
        "req",
        "res",
        "next",
        "cookieConsent",
        "cookies",
        "clearCookie",
        "domain",
        "secure",
        "httpOnly",
        "console",
        "log",
        "result",
        "getResolver",
        "resolve",
        "args",
        "filter",
        "$gt",
        "utc",
        "toDate",
        "logout",
        "projection",
        "user",
        "cookie",
        "sessions",
        "cookieName"
      ],
      "mappings": ";;;;;;AAAA;;;;AACA;;;;AACA;;;;AAEA;;;;;;AAGA,IAAIA,UAAU;AACbA,WAAS;AACRC,UAAM,OADE;AAERC,gBAAY,SAFJ;AAGRC,kBAAc,KAHN;AAIRC,QAAI;AAJI;AADI,CAAd;;AASA,IAAIC,WAAW;AACdA,YAAU;AACTC,SAAK,KADI;AAETC,WAAO,IAFE;AAGTC,iBAAa,IAHJ;AAITC,aAAS,IAJA;AAKT,iBAAa,IALJ;AAMT,oBAAgB,IANP;AAOT,mBAAe,IAPN;AAQT,uBAAmB,IARV;AAST,wBAAoB,IATX;AAUT,wBAAoB,IAVX;AAWT,sBAAkB;AAXT;AADI,CAAf;;;+BAiBe,WAAeC,GAAf,EAAoBC,GAApB,EAAyBC,IAAzB,EAA+B;AAC5C,QAAIC,gBAAgB,iBAAOA,aAA3B;;AAED,QAAI,CAACH,IAAII,OAAJ,CAAY,eAAZ,CAAL,EAAmC;AAClC,UAAIJ,IAAII,OAAJ,CAAY,WAAZ,CAAJ,EAA8B;AAC7BH,YAAII,WAAJ,CAAgB,WAAhB,EAA6B;AAC5BC,kBAAQ,iBAAOA,MADa;AAE5BC,kBAAQ,IAFoB;AAG5BC,oBAAU;AAHkB,SAA7B;AAKA;AACD;;AAEAC,YAAQC,GAAR,CAAYV,IAAII,OAAhB;;AAEA,QAAIO,SAAS,MAAM,mBAAUC,WAAV,CAAsB,UAAtB,EAAkCC,OAAlC,CAA0C;AAC3DC,YAAM;AACJC,gBAAQ;AACNlB,iBAAOG,IAAII,OAAJ,CAAY,WAAZ,CADD;AAENL,mBAAS;AACPiB,iBAAK,iBAAOC,GAAP,GAAaC,MAAb;AADE,WAFH;AAKNC,kBAAQ;AALF;AADJ,OADqD;AAU3DC,kBAAY;AACVC,cAAM,IADI;AAEVxB,eAAO,IAFG;AAGVC,qBAAa,IAHH;AAIVC,iBAAS;AAJC;AAV+C,KAA1C,CAAnB;;AAkBAU,YAAQC,GAAR,CAAYC,MAAZ;;AAEF;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEEV,QAAIqB,MAAJ,CAAW,iBAAOC,QAAP,CAAgBC,UAA3B,EAAuC,kGAAvC,EAA2I;AACzIlB,cAAQ,yBADiI;AAEzIC,cAAQ,IAFiI;AAGzIC,gBAAU,IAH+H;AAIzIT,eAAS;AAJgI,KAA3I;;AAOA;;AAEF;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEEG;AACD,G",
      "file": "cookie-authorization.js",
      "sourceRoot": "/app/middleware",
      "sourcesContent": [
        "import _ from 'lodash';\nimport config from 'config';\nimport moment from 'moment';\n\nimport { SessionTC } from '../schema/models/session';\n\n\nlet $lookup = {\n\t$lookup: {\n\t\tfrom: 'users',\n\t\tlocalField: 'user_id',\n\t\tforeignField: '_id',\n\t\tas: 'users'\n\t}\n};\n\nlet $project = {\n\t$project: {\n\t\t_id: false,\n\t\ttoken: true,\n\t\tcsrf_secret: true,\n\t\texpires: true,\n\t\t'users._id': true,\n\t\t'users.handle': true,\n\t\t'users.email': true,\n\t\t'users.last_name': true,\n\t\t'users.first_name': true,\n\t\t'users.last_login': true,\n\t\t'users.settings': true\n\t}\n};\n\n\nexport default async function(req, res, next) {\n  let cookieConsent = config.cookieConsent;\n\n\tif (!req.cookies['cookieconsent']) {\n\t\tif (req.cookies['sessionid']) {\n\t\t\tres.clearCookie('sessionid', {\n\t\t\t\tdomain: config.domain,\n\t\t\t\tsecure: true,\n\t\t\t\thttpOnly: true\n\t\t\t});\n\t\t}\n\t}\n  \n  console.log(req.cookies);\n  \n  let result = await SessionTC.getResolver('findMany').resolve({\n    args: {\n      filter: {\n        token: req.cookies['sessionid'],\n        expires: {\n          $gt: moment.utc().toDate()\n        },\n        logout: null\n      }\n    },\n    projection: {\n      user: true,\n      token: true,\n      csrf_secret: true,\n      expires: true\n    }\n  });\n  \n  console.log(result);\n  \n//   if (result.length > 1) {\n//     return Promise.reject(new Error('Duplicate session.'));\n//   }\n  \n//   if (result.length === 0) {\n//     req.session = null;\n//   }\n//   else {\n//     let session = _.omit(result[0], 'user');\n//     let user = result[0].user;\n    \n//     req.session = session;\n//     req.user = user || null;\n    \n//     next();\n//   }\n\n  res.cookie(config.sessions.cookieName, '2EFCEBCFA93E42C7A722023AC5A664EE254502B5C96A41F9B0DDB43F2CEEC2697070D8997FAB4039A2FBDD788DA766CE', {\n    domain: 'lifescope-api.glitch.me',\n    secure: true,\n    httpOnly: true,\n    expires: 0\n  });\n  \n  // console.log(result);\n\n//   mongo.db('live').collection('sessions').aggregate([$match, $lookup, $project]).toArray()\n//     .then(function(sessions) {\n//       if (sessions.length > 1) {\n//         return Promise.reject(new Error('Duplicate session.'));\n//       }\n\n//       if (sessions.length === 0) {\n//         req.session = null;\n//       }\n//       else {\n//         let session = _.omit(sessions[0], 'users');\n//         let user = sessions[0].users[0];\n\n//         req.session = session;\n//         req.user = user || null;\n//       }\n\n//       next();\n//     })\n//     .catch(function(err) {\n//       next(err);\n//     });\n  \n  next();\n};\n"
      ]
    },
    "mtime": 1521578764011
  },
  "{\"filename\":\"/app/schema/models/connections.js\",\"env\":{},\"retainLines\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"presets\":[],\"plugins\":[[[],null],[[],null],[[],{\"loose\":false}],[[],{\"spec\":false,\"loose\":false}],[[],{\"spec\":false,\"loose\":false}],[[],{\"spec\":false,\"loose\":false}],[[],{\"spec\":false,\"loose\":false}],[[],{\"spec\":false,\"loose\":false}],[[],{\"spec\":false,\"loose\":false}]],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"minified\":false,\"sourceRoot\":\"/app/schema/models\",\"babelrc\":true,\"sourceType\":\"module\",\"moduleIds\":false,\"passPerPreset\":false,\"parserOpts\":false,\"generatorOpts\":false}:6.26.0": {
    "metadata": {
      "usedHelpers": [
        "interopRequireDefault"
      ],
      "marked": [],
      "modules": {
        "imports": [
          {
            "source": "mongoose",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "mongoose"
              }
            ]
          },
          {
            "source": "graphql-compose-mongoose/node8",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "composeWithMongoose"
              }
            ]
          }
        ],
        "exports": {
          "exported": [
            "ConnectionsSchema",
            "Connections",
            "ConnectionTC"
          ],
          "specifiers": [
            {
              "kind": "local",
              "local": "ConnectionsSchema",
              "exported": "ConnectionsSchema"
            },
            {
              "kind": "local",
              "local": "Connections",
              "exported": "Connections"
            },
            {
              "kind": "local",
              "local": "ConnectionTC",
              "exported": "ConnectionTC"
            }
          ]
        }
      }
    },
    "options": {
      "filename": "/app/schema/models/connections.js",
      "filenameRelative": "/app/schema/models/connections.js",
      "env": {},
      "retainLines": false,
      "highlightCode": true,
      "suppressDeprecationMessages": false,
      "presets": [],
      "plugins": [
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ]
      ],
      "ignore": [],
      "code": true,
      "metadata": true,
      "ast": false,
      "comments": true,
      "compact": "auto",
      "minified": false,
      "sourceMaps": "both",
      "sourceMapTarget": "connections.js",
      "sourceFileName": "connections.js",
      "sourceRoot": "/app/schema/models",
      "babelrc": false,
      "sourceType": "module",
      "moduleRoot": "/app/schema/models",
      "moduleIds": false,
      "passPerPreset": false,
      "parserOpts": false,
      "generatorOpts": false,
      "basename": "connections"
    },
    "ignored": false,
    "code": "'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.ConnectionTC = exports.Connections = exports.ConnectionsSchema = undefined;\n\nvar _mongoose = require('mongoose');\n\nvar _mongoose2 = _interopRequireDefault(_mongoose);\n\nvar _node = require('graphql-compose-mongoose/node8');\n\nvar _node2 = _interopRequireDefault(_node);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n// TODO: FIXXX\nconst ConnectionsSchema = exports.ConnectionsSchema = new _mongoose2.default.Schema({\n  auth: {\n    status: {\n      authorized: {\n        type: Boolean,\n        index: false\n      },\n      complete: {\n        type: Boolean,\n        index: false\n      }\n    }\n  },\n  enabled: {\n    type: Boolean,\n    index: false\n  },\n\n  endpoint_data: {\n    direct_messages_received: {\n      since_id: {\n        type: String,\n        index: false\n      }\n    },\n    direct_messages_sent: {\n      since_id: {\n        type: String,\n        index: false\n      }\n    },\n    drive_changes: {\n      page_token: {\n        type: String,\n        index: false\n      }\n    },\n    edits: {\n      cursor: {\n        type: String,\n        index: false\n      }\n    },\n\n    events: {\n      since: {\n        type: Number,\n        index: false\n      }\n    },\n\n    gmail_inbox: {\n      page_token: {\n        type: String,\n        index: false\n      },\n      q: {\n        type: String,\n        index: false\n      }\n    },\n\n    posts: {\n      min_id: {\n        type: String,\n        index: false\n      },\n      since: {\n        type: Number,\n        index: false\n      }\n    },\n\n    tweets: {\n      since_id: {\n        type: String,\n        index: false\n      }\n    }\n  },\n\n  frequency: {\n    type: Number,\n    index: false\n  },\n\n  last_run: {\n    type: Date,\n    index: false\n  },\n\n  permissions: {\n    achievements: {\n      enabled: {\n        type: Boolean,\n        index: false\n      },\n\n      frequency: {\n        type: Number,\n        index: false\n      }\n    },\n    boards: {\n      enabled: {\n        type: Boolean,\n        index: false\n      },\n      frequency: {\n        type: Number,\n        index: false\n      }\n    },\n    comments: {\n      enabled: {\n        type: Boolean,\n        index: false\n      },\n      frequency: {\n        type: Number,\n        index: false\n      }\n    },\n    direct_messages_received: {\n      enabled: {\n        type: Boolean,\n        index: false\n      },\n      frequency: {\n        type: Number,\n        index: false\n      }\n    },\n    direct_messages_sent: {\n      enabled: {\n        type: Boolean,\n        index: false\n      },\n      frequency: {\n        type: Number,\n        index: false\n      }\n    },\n    drive_changes: {\n      enabled: {\n        type: Boolean,\n        index: false\n      },\n      frequency: {\n        type: Number,\n        index: false\n      }\n    },\n    edits: {\n      enabled: {\n        type: Boolean,\n        index: false\n      },\n      frequency: {\n        type: Number,\n        index: false\n      }\n    },\n    events: {\n      enabled: {\n        type: Boolean,\n        index: false\n      },\n      frequency: {\n        type: Number,\n        index: false\n      }\n    },\n    games_owned: {\n      enabled: {\n        type: Boolean,\n        index: false\n      },\n      frequency: {\n        type: Number,\n        index: false\n      }\n    },\n    gilded_comments: {\n      enabled: {\n        type: Boolean,\n        index: false\n      },\n      frequency: {\n        type: Number,\n        index: false\n      }\n    },\n    gmail_inbox: {\n      enabled: {\n        type: Boolean,\n        index: false\n      },\n      frequency: {\n        type: Number,\n        index: false\n      }\n    },\n    messages_received: {\n      enabled: {\n        type: Boolean,\n        index: false\n      },\n      frequency: {\n        type: Number,\n        index: false\n      }\n    },\n    messages_sent: {\n      enabled: {\n        type: Boolean,\n        index: false\n      },\n      frequency: {\n        type: Number,\n        index: false\n      }\n    },\n    pins: {\n      enabled: {\n        type: Boolean,\n        index: false\n      },\n      frequency: {\n        type: Number,\n        index: false\n      }\n    },\n    playlists: {\n      enabled: {\n        type: Boolean,\n        index: false\n      },\n      frequency: {\n        type: Number,\n        index: false\n      }\n    },\n    posts: {\n      enabled: {\n        type: Boolean,\n        index: false\n      },\n      frequency: {\n        type: Number,\n        index: false\n      }\n    },\n    saved_albums: {\n      enabled: {\n        type: Boolean,\n        index: false\n      },\n      frequency: {\n        type: Number,\n        index: false\n      }\n    },\n    saved_comments: {\n      enabled: {\n        type: Boolean,\n        index: false\n      },\n      frequency: {\n        type: Number,\n        index: false\n      }\n    },\n    saved_tracks: {\n      enabled: {\n        type: Boolean,\n        index: false\n      },\n      frequency: {\n        type: Number,\n        index: false\n      }\n    },\n    submitted: {\n      enabled: {\n        type: Boolean,\n        index: false\n      },\n      frequency: {\n        type: Number,\n        index: false\n      }\n    },\n    threads_downvoted: {\n      enabled: {\n        type: Boolean,\n        index: false\n      },\n      frequency: {\n        type: Number,\n        index: false\n      }\n    },\n    threads_upvoted: {\n      enabled: {\n        type: Boolean,\n        index: false\n      },\n      frequency: {\n        type: Number,\n        index: false\n      }\n    },\n    tweets: {\n      enabled: {\n        type: Boolean,\n        index: false\n      },\n      frequency: {\n        type: Number,\n        index: false\n      }\n    }\n  },\n\n  provider_id: {\n    type: Buffer,\n    index: false\n  },\n  provider_name: {\n    type: String,\n    index: false\n  },\n  remote_connection_id: {\n    type: Buffer,\n    index: false\n  },\n  status: {\n    type: String,\n    index: false\n  },\n  user_id: {\n    type: Buffer,\n    index: false\n  }\n}, {\n  collection: 'connections'\n});\n\nconst Connections = exports.Connections = _mongoose2.default.model('Connections', ConnectionsSchema);\n\nconst ConnectionTC = exports.ConnectionTC = (0, _node2.default)(Connections);\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNvbm5lY3Rpb25zLmpzIl0sIm5hbWVzIjpbIkNvbm5lY3Rpb25zU2NoZW1hIiwiU2NoZW1hIiwiYXV0aCIsInN0YXR1cyIsImF1dGhvcml6ZWQiLCJ0eXBlIiwiQm9vbGVhbiIsImluZGV4IiwiY29tcGxldGUiLCJlbmFibGVkIiwiZW5kcG9pbnRfZGF0YSIsImRpcmVjdF9tZXNzYWdlc19yZWNlaXZlZCIsInNpbmNlX2lkIiwiU3RyaW5nIiwiZGlyZWN0X21lc3NhZ2VzX3NlbnQiLCJkcml2ZV9jaGFuZ2VzIiwicGFnZV90b2tlbiIsImVkaXRzIiwiY3Vyc29yIiwiZXZlbnRzIiwic2luY2UiLCJOdW1iZXIiLCJnbWFpbF9pbmJveCIsInEiLCJwb3N0cyIsIm1pbl9pZCIsInR3ZWV0cyIsImZyZXF1ZW5jeSIsImxhc3RfcnVuIiwiRGF0ZSIsInBlcm1pc3Npb25zIiwiYWNoaWV2ZW1lbnRzIiwiYm9hcmRzIiwiY29tbWVudHMiLCJnYW1lc19vd25lZCIsImdpbGRlZF9jb21tZW50cyIsIm1lc3NhZ2VzX3JlY2VpdmVkIiwibWVzc2FnZXNfc2VudCIsInBpbnMiLCJwbGF5bGlzdHMiLCJzYXZlZF9hbGJ1bXMiLCJzYXZlZF9jb21tZW50cyIsInNhdmVkX3RyYWNrcyIsInN1Ym1pdHRlZCIsInRocmVhZHNfZG93bnZvdGVkIiwidGhyZWFkc191cHZvdGVkIiwicHJvdmlkZXJfaWQiLCJCdWZmZXIiLCJwcm92aWRlcl9uYW1lIiwicmVtb3RlX2Nvbm5lY3Rpb25faWQiLCJ1c2VyX2lkIiwiY29sbGVjdGlvbiIsIkNvbm5lY3Rpb25zIiwibW9kZWwiLCJDb25uZWN0aW9uVEMiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFHQTs7OztBQUNBOzs7Ozs7QUFGQTtBQUlPLE1BQU1BLGdEQUFvQixJQUFJLG1CQUFTQyxNQUFiLENBQy9CO0FBQ0VDLFFBQU07QUFDSkMsWUFBUTtBQUNOQyxrQkFBWTtBQUNWQyxjQUFNQyxPQURJO0FBRVZDLGVBQU87QUFGRyxPQUROO0FB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O0FBOE5YbUIsWUFBUTtBQUNOakIsZUFBUztBQUNQSixjQUFNQyxPQURDO0FBRVBDLGVBQU87QUFGQSxPQURIO0FBS05vQixpQkFBVztBQUNUdEIsY0FBTWdCLE1BREc7QUFFVGQsZUFBTztBQUZFO0FBTEw7QUE5TkcsR0E3RmY7O0FBdVVFdUMsZUFBYTtBQUNYekMsVUFBTTBDLE1BREs7QUFFWHhDLFdBQU87QUFGSSxHQXZVZjtBQTJVRXlDLGlCQUFlO0FBQ2IzQyxVQUFNUSxNQURPO0FBRWJOLFdBQU87QUFGTSxHQTNVakI7QUErVUUwQyx3QkFBc0I7QUFDcEI1QyxVQUFNMEMsTUFEYztBQUVwQnhDLFdBQU87QUFGYSxHQS9VeEI7QUFtVkVKLFVBQVE7QUFDTkUsVUFBTVEsTUFEQTtBQUVOTixXQUFPO0FBRkQsR0FuVlY7QUF1VkUyQyxXQUFTO0FBQ1A3QyxVQUFNMEMsTUFEQztBQUVQeEMsV0FBTztBQUZBO0FBdlZYLENBRCtCLEVBNlYvQjtBQUNFNEMsY0FBWTtBQURkLENBN1YrQixDQUExQjs7QUFtV0EsTUFBTUMsb0NBQWMsbUJBQVNDLEtBQVQsQ0FBZSxhQUFmLEVBQThCckQsaUJBQTlCLENBQXBCOztBQUVBLE1BQU1zRCxzQ0FBZSxvQkFBb0JGLFdBQXBCLENBQXJCIiwiZmlsZSI6ImNvbm5lY3Rpb25zLmpzIiwic291cmNlUm9vdCI6Ii9hcHAvc2NoZW1hL21vZGVscyIsInNvdXJjZXNDb250ZW50IjpbIi8qIEBmbG93ICovXG5cbi8vIFRPRE86IEZJWFhYXG5pbXBvcnQgbW9uZ29vc2UgZnJvbSAnbW9uZ29vc2UnO1xuaW1wb3J0IGNvbXBvc2VXaXRoTW9uZ29vc2UgZnJvbSAnZ3JhcGhxbC1jb21wb3NlLW1vbmdvb3NlL25vZGU4JztcblxuZXhwb3J0IGNvbnN0IENvbm5lY3Rpb25zU2NoZW1hID0gbmV3IG1vbmdvb3NlLlNjaGVtYShcbiAge1xuICAgIGF1dGg6IHtcbiAgICAgIHN0YXR1czoge1xuICAgICAgICBhdXRob3JpemVkOiB7XG4gICAgICAgICAgdHlwZTogQm9vbGVhbixcbiAgICAgICAgICBpbmRleDogZmFsc2VcbiAgICAgICAgfSxcbiAgICAgICAgY29tcGxldGU6IHtcbiAgICAgICAgICB0eXBlOiBCb29sZWFuLFxuICAgICAgICAgIGluZGV4OiBmYWxzZVxuICAgICAgfVxuICAgICAgfVxuICAgIH0sXG4gICAgZW5hYmxlZDoge1xuICAgICAgdHlwZTogQm9vbGVhbixcbiAgICAgIGluZGV4OiBmYWxzZVxuICAgIH0sXG4gICAgXG4gICAgZW5kcG9pbnRfZGF0YToge1xuICAgICAgZGlyZWN0X21lc3NhZ2VzX3JlY2VpdmVkOiB7XG4gICAgICAgIHNpbmNlX2lkOiB7XG4gICAgICAgICAgdHlwZTogU3RyaW5nLFxuICAgICAgICAgIGluZGV4OiBmYWxzZVxuICAgICAgICB9XG4gICAgICB9LFxuICAgICAgZGlyZWN0X21lc3NhZ2VzX3NlbnQ6IHtcbiAgICAgICAgc2luY2VfaWQ6IHtcbiAgICAgICAgICB0eXBlOiBTdHJpbmcsXG4gICAgICAgICAgaW5kZXg6IGZhbHNlXG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgICBkcml2ZV9jaGFuZ2VzOiB7XG4gICAgICAgIHBhZ2VfdG9rZW46IHtcbiAgICAgICAgICB0eXBlOiBTdHJpbmcsXG4gICAgICAgICAgaW5kZXg6IGZhbHNlXG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgICBlZGl0czoge1xuICAgICAgICBjdXJzb3I6IHtcbiAgICAgICAgICB0eXBlOiBTdHJpbmcsXG4gICAgICAgICAgaW5kZXg6IGZhbHNlXG4gICAgICAgIH1cbiAgICAgIH0sXG5cbiAgICAgIFxuICAgICAgZXZlbnRzOiB7XG4gICAgICAgIHNpbmNlOiB7XG4gICAgICAgICAgdHlwZTogTnVtYmVyLFxuICAgICAgICAgIGluZGV4OiBmYWxzZVxuICAgICAgICB9XG4gICAgICB9LFxuICAgICAgXG4gICAgICBcbiAgICAgIGdtYWlsX2luYm94OiB7XG4gICAgICAgIHBhZ2VfdG9rZW46IHtcbiAgICAgICAgICB0eXBlOiBTdHJpbmcsXG4gICAgICAgICAgaW5kZXg6IGZhbHNlXG4gICAgICAgIH0sXG4gICAgICAgIHE6IHtcbiAgICAgICAgICB0eXBlOiBTdHJpbmcsXG4gICAgICAgICAgaW5kZXg6IGZhbHNlXG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgICBcbiAgICAgIHBvc3RzOiB7XG4gICAgICAgIG1pbl9pZDoge1xuICAgICAgICAgIHR5cGU6IFN0cmluZyxcbiAgICAgICAgICBpbmRleDogZmFsc2VcbiAgICAgICAgfSxcbiAgICAgICAgc2luY2U6IHtcbiAgICAgICAgICB0eXBlOiBOdW1iZXIsXG4gICAgICAgICAgaW5kZXg6IGZhbHNlXG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgICBcbiAgICAgIHR3ZWV0czoge1xuICAgICAgICBzaW5jZV9pZDoge1xuICAgICAgICAgIHR5cGU6IFN0cmluZyxcbiAgICAgICAgICBpbmRleDogZmFsc2UgICAgICAgICBcbiAgICAgICAgfVxuICAgICAgfSxcbiAgfSxcbiAgICBcbiAgICBmcmVxdWVuY3k6IHtcbiAgICAgIHR5cGU6IE51bWJlcixcbiAgICAgIGluZGV4OiBmYWxzZVxuICAgIH0sXG4gICAgXG4gICAgbGFzdF9ydW46IHtcbiAgICAgIHR5cGU6IERhdGUsXG4gICAgICBpbmRleDogZmFsc2VcbiAgICB9LFxuICAgIFxuICAgIHBlcm1pc3Npb25zOiB7XG4gICAgICBhY2hpZXZlbWVudHM6IHtcbiAgICAgICAgZW5hYmxlZDoge1xuICAgICAgICAgIHR5cGU6IEJvb2xlYW4sXG4gICAgICAgICAgaW5kZXg6IGZhbHNlXG4gICAgICAgIH0sXG4gICAgICAgIFxuICAgICAgICBmcmVxdWVuY3k6IHtcbiAgICAgICAgICB0eXBlOiBOdW1iZXIsXG4gICAgICAgICAgaW5kZXg6IGZhbHNlXG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgICBib2FyZHM6IHtcbiAgICAgICAgZW5hYmxlZDoge1xuICAgICAgICAgIHR5cGU6IEJvb2xlYW4sXG4gICAgICAgICAgaW5kZXg6IGZhbHNlXG4gICAgICAgIH0sXG4gICAgICAgIGZyZXF1ZW5jeToge1xuICAgICAgICAgIHR5cGU6IE51bWJlcixcbiAgICAgICAgICBpbmRleDogZmFsc2VcbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgIGNvbW1lbnRzOiB7XG4gICAgICAgIGVuYWJsZWQ6IHtcbiAgICAgICAgICB0eXBlOiBCb29sZWFuLFxuICAgICAgICAgIGluZGV4OiBmYWxzZVxuICAgICAgICB9LFxuICAgICAgICBmcmVxdWVuY3k6IHtcbiAgICAgICAgICB0eXBlOiBOdW1iZXIsXG4gICAgICAgICAgaW5kZXg6IGZhbHNlXG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgICBkaXJlY3RfbWVzc2FnZXNfcmVjZWl2ZWQ6IHtcbiAgICAgICAgZW5hYmxlZDoge1xuICAgICAgICAgIHR5cGU6IEJvb2xlYW4sXG4gICAgICAgICAgaW5kZXg6IGZhbHNlXG4gICAgICAgIH0sXG4gICAgICAgIGZyZXF1ZW5jeToge1xuICAgICAgICAgIHR5cGU6IE51bWJlcixcbiAgICAgICAgICBpbmRleDogZmFsc2VcbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgIGRpcmVjdF9tZXNzYWdlc19zZW50OiB7XG4gICAgICAgIGVuYWJsZWQ6IHtcbiAgICAgICAgICB0eXBlOiBCb29sZWFuLFxuICAgICAgICAgIGluZGV4OiBmYWxzZVxuICAgICAgICB9LFxuICAgICAgICBmcmVxdWVuY3k6IHtcbiAgICAgICAgICB0eXBlOiBOdW1iZXIsXG4gICAgICAgICAgaW5kZXg6IGZhbHNlXG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgICBkcml2ZV9jaGFuZ2VzOiB7XG4gICAgICAgIGVuYWJsZWQ6IHtcbiAgICAgICAgICB0eXBlOiBCb29sZWFuLFxuICAgICAgICAgIGluZGV4OiBmYWxzZVxuICAgICAgICB9LFxuICAgICAgICBmcmVxdWVuY3k6IHtcbiAgICAgICAgICB0eXBlOiBOdW1iZXIsXG4gICAgICAgICAgaW5kZXg6IGZhbHNlXG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgICBlZGl0czoge1xuICAgICAgICBlbmFibGVkOiB7XG4gICAgICAgICAgdHlwZTogQm9vbGVhbixcbiAgICAgICAgICBpbmRleDogZmFsc2VcbiAgICAgICAgfSxcbiAgICAgICAgZnJlcXVlbmN5OiB7XG4gICAgICAgICAgdHlwZTogTnVtYmVyLFxuICAgICAgICAgIGluZGV4OiBmYWxzZVxuICAgICAgICB9XG4gICAgICB9LFxuICAgICAgZXZlbnRzOiB7XG4gICAgICAgIGVuYWJsZWQ6IHtcbiAgICAgICAgICB0eXBlOiBCb29sZWFuLFxuICAgICAgICAgIGluZGV4OiBmYWxzZVxuICAgICAgICB9LFxuICAgICAgICBmcmVxdWVuY3k6IHtcbiAgICAgICAgICB0eXBlOiBOdW1iZXIsXG4gICAgICAgICAgaW5kZXg6IGZhbHNlXG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgICBnYW1lc19vd25lZDoge1xuICAgICAgICBlbmFibGVkOiB7XG4gICAgICAgICAgdHlwZTogQm9vbGVhbixcbiAgICAgICAgICBpbmRleDogZmFsc2VcbiAgICAgICAgfSxcbiAgICAgICAgZnJlcXVlbmN5OiB7XG4gICAgICAgICAgdHlwZTogTnVtYmVyLFxuICAgICAgICAgIGluZGV4OiBmYWxzZVxuICAgICAgICB9XG4gICAgICB9LFxuICAgICAgZ2lsZGVkX2NvbW1lbnRzOiB7XG4gICAgICAgIGVuYWJsZWQ6IHtcbiAgICAgICAgICB0eXBlOiBCb29sZWFuLFxuICAgICAgICAgIGluZGV4OiBmYWxzZVxuICAgICAgICB9LFxuICAgICAgICBmcmVxdWVuY3k6IHtcbiAgICAgICAgICB0eXBlOiBOdW1iZXIsXG4gICAgICAgICAgaW5kZXg6IGZhbHNlXG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgICBnbWFpbF9pbmJveDoge1xuICAgICAgICBlbmFibGVkOiB7XG4gICAgICAgICAgdHlwZTogQm9vbGVhbixcbiAgICAgICAgICBpbmRleDogZmFsc2VcbiAgICAgICAgfSxcbiAgICAgICAgZnJlcXVlbmN5OiB7XG4gICAgICAgICAgdHlwZTogTnVtYmVyLFxuICAgICAgICAgIGluZGV4OiBmYWxzZVxuICAgICAgICB9XG4gICAgICB9LFxuICAgICAgbWVzc2FnZXNfcmVjZWl2ZWQ6IHtcbiAgICAgICAgZW5hYmxlZDoge1xuICAgICAgICAgIHR5cGU6IEJvb2xlYW4sXG4gICAgICAgICAgaW5kZXg6IGZhbHNlXG4gICAgICAgIH0sXG4gICAgICAgIGZyZXF1ZW5jeToge1xuICAgICAgICAgIHR5cGU6IE51bWJlcixcbiAgICAgICAgICBpbmRleDogZmFsc2VcbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgIG1lc3NhZ2VzX3NlbnQ6IHtcbiAgICAgICAgZW5hYmxlZDoge1xuICAgICAgICAgIHR5cGU6IEJvb2xlYW4sXG4gICAgICAgICAgaW5kZXg6IGZhbHNlXG4gICAgICAgIH0sXG4gICAgICAgIGZyZXF1ZW5jeToge1xuICAgICAgICAgIHR5cGU6IE51bWJlcixcbiAgICAgICAgICBpbmRleDogZmFsc2VcbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgIHBpbnM6IHtcbiAgICAgICAgZW5hYmxlZDoge1xuICAgICAgICAgIHR5cGU6IEJvb2xlYW4sXG4gICAgICAgICAgaW5kZXg6IGZhbHNlXG4gICAgICAgIH0sXG4gICAgICAgIGZyZXF1ZW5jeToge1xuICAgICAgICAgIHR5cGU6IE51bWJlcixcbiAgICAgICAgICBpbmRleDogZmFsc2VcbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgIHBsYXlsaXN0czoge1xuICAgICAgICBlbmFibGVkOiB7XG4gICAgICAgICAgdHlwZTogQm9vbGVhbixcbiAgICAgICAgICBpbmRleDogZmFsc2VcbiAgICAgICAgfSxcbiAgICAgICAgZnJlcXVlbmN5OiB7XG4gICAgICAgICAgdHlwZTogTnVtYmVyLFxuICAgICAgICAgIGluZGV4OiBmYWxzZVxuICAgICAgICB9XG4gICAgICB9LFxuICAgICAgcG9zdHM6IHtcbiAgICAgICAgZW5hYmxlZDoge1xuICAgICAgICAgIHR5cGU6IEJvb2xlYW4sXG4gICAgICAgICAgaW5kZXg6IGZhbHNlXG4gICAgICAgIH0sXG4gICAgICAgIGZyZXF1ZW5jeToge1xuICAgICAgICAgIHR5cGU6IE51bWJlcixcbiAgICAgICAgICBpbmRleDogZmFsc2VcbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgIHNhdmVkX2FsYnVtczoge1xuICAgICAgICBlbmFibGVkOiB7XG4gICAgICAgICAgdHlwZTogQm9vbGVhbixcbiAgICAgICAgICBpbmRleDogZmFsc2VcbiAgICAgICAgfSxcbiAgICAgICAgZnJlcXVlbmN5OiB7XG4gICAgICAgICAgdHlwZTogTnVtYmVyLFxuICAgICAgICAgIGluZGV4OiBmYWxzZVxuICAgICAgICB9XG4gICAgICB9LFxuICAgICAgc2F2ZWRfY29tbWVudHM6IHtcbiAgICAgICAgZW5hYmxlZDoge1xuICAgICAgICAgIHR5cGU6IEJvb2xlYW4sXG4gICAgICAgICAgaW5kZXg6IGZhbHNlXG4gICAgICAgIH0sXG4gICAgICAgIGZyZXF1ZW5jeToge1xuICAgICAgICAgIHR5cGU6IE51bWJlcixcbiAgICAgICAgICBpbmRleDogZmFsc2VcbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgIHNhdmVkX3RyYWNrczoge1xuICAgICAgICBlbmFibGVkOiB7XG4gICAgICAgICAgdHlwZTogQm9vbGVhbixcbiAgICAgICAgICBpbmRleDogZmFsc2VcbiAgICAgICAgfSxcbiAgICAgICAgZnJlcXVlbmN5OiB7XG4gICAgICAgICAgdHlwZTogTnVtYmVyLFxuICAgICAgICAgIGluZGV4OiBmYWxzZVxuICAgICAgICB9XG4gICAgICB9LFxuICAgICAgc3VibWl0dGVkOiB7XG4gICAgICAgIGVuYWJsZWQ6IHtcbiAgICAgICAgICB0eXBlOiBCb29sZWFuLFxuICAgICAgICAgIGluZGV4OiBmYWxzZVxuICAgICAgICB9LFxuICAgICAgICBmcmVxdWVuY3k6IHtcbiAgICAgICAgICB0eXBlOiBOdW1iZXIsXG4gICAgICAgICAgaW5kZXg6IGZhbHNlXG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgICB0aHJlYWRzX2Rvd252b3RlZDoge1xuICAgICAgICBlbmFibGVkOiB7XG4gICAgICAgICAgdHlwZTogQm9vbGVhbixcbiAgICAgICAgICBpbmRleDogZmFsc2VcbiAgICAgICAgfSxcbiAgICAgICAgZnJlcXVlbmN5OiB7XG4gICAgICAgICAgdHlwZTogTnVtYmVyLFxuICAgICAgICAgIGluZGV4OiBmYWxzZVxuICAgICAgICB9XG4gICAgICB9LFxuICAgICAgdGhyZWFkc191cHZvdGVkOiB7XG4gICAgICAgIGVuYWJsZWQ6IHtcbiAgICAgICAgICB0eXBlOiBCb29sZWFuLFxuICAgICAgICAgIGluZGV4OiBmYWxzZVxuICAgICAgICB9LFxuICAgICAgICBmcmVxdWVuY3k6IHtcbiAgICAgICAgICB0eXBlOiBOdW1iZXIsXG4gICAgICAgICAgaW5kZXg6IGZhbHNlXG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgICB0d2VldHM6IHtcbiAgICAgICAgZW5hYmxlZDoge1xuICAgICAgICAgIHR5cGU6IEJvb2xlYW4sXG4gICAgICAgICAgaW5kZXg6IGZhbHNlXG4gICAgICAgIH0sXG4gICAgICAgIGZyZXF1ZW5jeToge1xuICAgICAgICAgIHR5cGU6IE51bWJlcixcbiAgICAgICAgICBpbmRleDogZmFsc2VcbiAgICAgICAgfVxuICAgICAgfSxcbiAgICB9LFxuICAgIFxuICAgIHByb3ZpZGVyX2lkOiB7XG4gICAgICB0eXBlOiBCdWZmZXIsXG4gICAgICBpbmRleDogZmFsc2VcbiAgICB9LFxuICAgIHByb3ZpZGVyX25hbWU6IHtcbiAgICAgIHR5cGU6IFN0cmluZyxcbiAgICAgIGluZGV4OiBmYWxzZVxuICAgIH0sXG4gICAgcmVtb3RlX2Nvbm5lY3Rpb25faWQ6IHtcbiAgICAgIHR5cGU6IEJ1ZmZlcixcbiAgICAgIGluZGV4OiBmYWxzZVxuICAgIH0sXG4gICAgc3RhdHVzOiB7XG4gICAgICB0eXBlOiBTdHJpbmcsXG4gICAgICBpbmRleDogZmFsc2VcbiAgICB9LFxuICAgIHVzZXJfaWQ6IHtcbiAgICAgIHR5cGU6IEJ1ZmZlcixcbiAgICAgIGluZGV4OiBmYWxzZVxuICAgIH1cbiAgfSxcbiAge1xuICAgIGNvbGxlY3Rpb246ICdjb25uZWN0aW9ucycsXG4gIH1cbik7XG4gIFxuXG5leHBvcnQgY29uc3QgQ29ubmVjdGlvbnMgPSBtb25nb29zZS5tb2RlbCgnQ29ubmVjdGlvbnMnLCBDb25uZWN0aW9uc1NjaGVtYSk7XG5cbmV4cG9ydCBjb25zdCBDb25uZWN0aW9uVEMgPSBjb21wb3NlV2l0aE1vbmdvb3NlKENvbm5lY3Rpb25zKTtcblxuIl19",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "connections.js"
      ],
      "names": [
        "ConnectionsSchema",
        "Schema",
        "auth",
        "status",
        "authorized",
        "type",
        "Boolean",
        "index",
        "complete",
        "enabled",
        "endpoint_data",
        "direct_messages_received",
        "since_id",
        "String",
        "direct_messages_sent",
        "drive_changes",
        "page_token",
        "edits",
        "cursor",
        "events",
        "since",
        "Number",
        "gmail_inbox",
        "q",
        "posts",
        "min_id",
        "tweets",
        "frequency",
        "last_run",
        "Date",
        "permissions",
        "achievements",
        "boards",
        "comments",
        "games_owned",
        "gilded_comments",
        "messages_received",
        "messages_sent",
        "pins",
        "playlists",
        "saved_albums",
        "saved_comments",
        "saved_tracks",
        "submitted",
        "threads_downvoted",
        "threads_upvoted",
        "provider_id",
        "Buffer",
        "provider_name",
        "remote_connection_id",
        "user_id",
        "collection",
        "Connections",
        "model",
        "ConnectionTC"
      ],
      "mappings": "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",
      "file": "connections.js",
      "sourceRoot": "/app/schema/models",
      "sourcesContent": [
        "/* @flow */\n\n// TODO: FIXXX\nimport mongoose from 'mongoose';\nimport composeWithMongoose from 'graphql-compose-mongoose/node8';\n\nexport const ConnectionsSchema = new mongoose.Schema(\n  {\n    auth: {\n      status: {\n        authorized: {\n          type: Boolean,\n          index: false\n        },\n        complete: {\n          type: Boolean,\n          index: false\n      }\n      }\n    },\n    enabled: {\n      type: Boolean,\n      index: false\n    },\n    \n    endpoint_data: {\n      direct_messages_received: {\n        since_id: {\n          type: String,\n          index: false\n        }\n      },\n      direct_messages_sent: {\n        since_id: {\n          type: String,\n          index: false\n        }\n      },\n      drive_changes: {\n        page_token: {\n          type: String,\n          index: false\n        }\n      },\n      edits: {\n        cursor: {\n          type: String,\n          index: false\n        }\n      },\n\n      \n      events: {\n        since: {\n          type: Number,\n          index: false\n        }\n      },\n      \n      \n      gmail_inbox: {\n        page_token: {\n          type: String,\n          index: false\n        },\n        q: {\n          type: String,\n          index: false\n        }\n      },\n      \n      posts: {\n        min_id: {\n          type: String,\n          index: false\n        },\n        since: {\n          type: Number,\n          index: false\n        }\n      },\n      \n      tweets: {\n        since_id: {\n          type: String,\n          index: false         \n        }\n      },\n  },\n    \n    frequency: {\n      type: Number,\n      index: false\n    },\n    \n    last_run: {\n      type: Date,\n      index: false\n    },\n    \n    permissions: {\n      achievements: {\n        enabled: {\n          type: Boolean,\n          index: false\n        },\n        \n        frequency: {\n          type: Number,\n          index: false\n        }\n      },\n      boards: {\n        enabled: {\n          type: Boolean,\n          index: false\n        },\n        frequency: {\n          type: Number,\n          index: false\n        }\n      },\n      comments: {\n        enabled: {\n          type: Boolean,\n          index: false\n        },\n        frequency: {\n          type: Number,\n          index: false\n        }\n      },\n      direct_messages_received: {\n        enabled: {\n          type: Boolean,\n          index: false\n        },\n        frequency: {\n          type: Number,\n          index: false\n        }\n      },\n      direct_messages_sent: {\n        enabled: {\n          type: Boolean,\n          index: false\n        },\n        frequency: {\n          type: Number,\n          index: false\n        }\n      },\n      drive_changes: {\n        enabled: {\n          type: Boolean,\n          index: false\n        },\n        frequency: {\n          type: Number,\n          index: false\n        }\n      },\n      edits: {\n        enabled: {\n          type: Boolean,\n          index: false\n        },\n        frequency: {\n          type: Number,\n          index: false\n        }\n      },\n      events: {\n        enabled: {\n          type: Boolean,\n          index: false\n        },\n        frequency: {\n          type: Number,\n          index: false\n        }\n      },\n      games_owned: {\n        enabled: {\n          type: Boolean,\n          index: false\n        },\n        frequency: {\n          type: Number,\n          index: false\n        }\n      },\n      gilded_comments: {\n        enabled: {\n          type: Boolean,\n          index: false\n        },\n        frequency: {\n          type: Number,\n          index: false\n        }\n      },\n      gmail_inbox: {\n        enabled: {\n          type: Boolean,\n          index: false\n        },\n        frequency: {\n          type: Number,\n          index: false\n        }\n      },\n      messages_received: {\n        enabled: {\n          type: Boolean,\n          index: false\n        },\n        frequency: {\n          type: Number,\n          index: false\n        }\n      },\n      messages_sent: {\n        enabled: {\n          type: Boolean,\n          index: false\n        },\n        frequency: {\n          type: Number,\n          index: false\n        }\n      },\n      pins: {\n        enabled: {\n          type: Boolean,\n          index: false\n        },\n        frequency: {\n          type: Number,\n          index: false\n        }\n      },\n      playlists: {\n        enabled: {\n          type: Boolean,\n          index: false\n        },\n        frequency: {\n          type: Number,\n          index: false\n        }\n      },\n      posts: {\n        enabled: {\n          type: Boolean,\n          index: false\n        },\n        frequency: {\n          type: Number,\n          index: false\n        }\n      },\n      saved_albums: {\n        enabled: {\n          type: Boolean,\n          index: false\n        },\n        frequency: {\n          type: Number,\n          index: false\n        }\n      },\n      saved_comments: {\n        enabled: {\n          type: Boolean,\n          index: false\n        },\n        frequency: {\n          type: Number,\n          index: false\n        }\n      },\n      saved_tracks: {\n        enabled: {\n          type: Boolean,\n          index: false\n        },\n        frequency: {\n          type: Number,\n          index: false\n        }\n      },\n      submitted: {\n        enabled: {\n          type: Boolean,\n          index: false\n        },\n        frequency: {\n          type: Number,\n          index: false\n        }\n      },\n      threads_downvoted: {\n        enabled: {\n          type: Boolean,\n          index: false\n        },\n        frequency: {\n          type: Number,\n          index: false\n        }\n      },\n      threads_upvoted: {\n        enabled: {\n          type: Boolean,\n          index: false\n        },\n        frequency: {\n          type: Number,\n          index: false\n        }\n      },\n      tweets: {\n        enabled: {\n          type: Boolean,\n          index: false\n        },\n        frequency: {\n          type: Number,\n          index: false\n        }\n      },\n    },\n    \n    provider_id: {\n      type: Buffer,\n      index: false\n    },\n    provider_name: {\n      type: String,\n      index: false\n    },\n    remote_connection_id: {\n      type: Buffer,\n      index: false\n    },\n    status: {\n      type: String,\n      index: false\n    },\n    user_id: {\n      type: Buffer,\n      index: false\n    }\n  },\n  {\n    collection: 'connections',\n  }\n);\n  \n\nexport const Connections = mongoose.model('Connections', ConnectionsSchema);\n\nexport const ConnectionTC = composeWithMongoose(Connections);\n\n"
      ]
    },
    "mtime": 1521506017143
  },
  "{\"filename\":\"/app/schema/models/contacts.js\",\"env\":{},\"retainLines\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"presets\":[],\"plugins\":[[[],null],[[],null],[[],{\"loose\":false}],[[],{\"spec\":false,\"loose\":false}],[[],{\"spec\":false,\"loose\":false}],[[],{\"spec\":false,\"loose\":false}],[[],{\"spec\":false,\"loose\":false}],[[],{\"spec\":false,\"loose\":false}],[[],{\"spec\":false,\"loose\":false}]],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"minified\":false,\"sourceRoot\":\"/app/schema/models\",\"babelrc\":true,\"sourceType\":\"module\",\"moduleIds\":false,\"passPerPreset\":false,\"parserOpts\":false,\"generatorOpts\":false}:6.26.0": {
    "metadata": {
      "usedHelpers": [
        "interopRequireDefault"
      ],
      "marked": [],
      "modules": {
        "imports": [
          {
            "source": "mongoose",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "mongoose"
              }
            ]
          },
          {
            "source": "graphql-compose-mongoose/node8",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "composeWithMongoose"
              }
            ]
          }
        ],
        "exports": {
          "exported": [
            "ContactsSchema",
            "Contacts",
            "ContactTC"
          ],
          "specifiers": [
            {
              "kind": "local",
              "local": "ContactsSchema",
              "exported": "ContactsSchema"
            },
            {
              "kind": "local",
              "local": "Contacts",
              "exported": "Contacts"
            },
            {
              "kind": "local",
              "local": "ContactTC",
              "exported": "ContactTC"
            }
          ]
        }
      }
    },
    "options": {
      "filename": "/app/schema/models/contacts.js",
      "filenameRelative": "/app/schema/models/contacts.js",
      "env": {},
      "retainLines": false,
      "highlightCode": true,
      "suppressDeprecationMessages": false,
      "presets": [],
      "plugins": [
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ]
      ],
      "ignore": [],
      "code": true,
      "metadata": true,
      "ast": false,
      "comments": true,
      "compact": "auto",
      "minified": false,
      "sourceMaps": "both",
      "sourceMapTarget": "contacts.js",
      "sourceFileName": "contacts.js",
      "sourceRoot": "/app/schema/models",
      "babelrc": false,
      "sourceType": "module",
      "moduleRoot": "/app/schema/models",
      "moduleIds": false,
      "passPerPreset": false,
      "parserOpts": false,
      "generatorOpts": false,
      "basename": "contacts"
    },
    "ignored": false,
    "code": "'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.ContactTC = exports.Contacts = exports.ContactsSchema = undefined;\n\nvar _mongoose = require('mongoose');\n\nvar _mongoose2 = _interopRequireDefault(_mongoose);\n\nvar _node = require('graphql-compose-mongoose/node8');\n\nvar _node2 = _interopRequireDefault(_node);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n// TODO: FIXXX\nconst ContactsSchema = exports.ContactsSchema = new _mongoose2.default.Schema({\n  avatar_url: {\n    type: String,\n    index: false\n  },\n\n  connection: {\n    type: Buffer,\n    index: false\n  },\n\n  created: {\n    type: Date,\n    index: false\n  },\n\n  handle: {\n    type: String,\n    index: false\n  },\n\n  identifier: {\n    type: String,\n    index: false\n  },\n\n  name: {\n    type: String,\n    index: false\n  },\n\n  provider_name: {\n    type: String,\n    index: false\n  },\n\n  remote_id: {\n    type: String,\n    index: false\n  },\n\n  tagMasks: {\n    added: {\n      type: [String],\n      index: false\n    }\n  },\n\n  updated: {\n    type: Date,\n    index: false\n  },\n\n  user_id: {\n    type: Buffer\n    //index: false\n  }\n}, {\n  collection: 'contacts'\n});\n\nconst Contacts = exports.Contacts = _mongoose2.default.model('Contacts', ContactsSchema);\n\nconst ContactTC = exports.ContactTC = (0, _node2.default)(Contacts);\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNvbnRhY3RzLmpzIl0sIm5hbWVzIjpbIkNvbnRhY3RzU2NoZW1hIiwiU2NoZW1hIiwiYXZhdGFyX3VybCIsInR5cGUiLCJTdHJpbmciLCJpbmRleCIsImNvbm5lY3Rpb24iLCJCdWZmZXIiLCJjcmVhdGVkIiwiRGF0ZSIsImhhbmRsZSIsImlkZW50aWZpZXIiLCJuYW1lIiwicHJvdmlkZXJfbmFtZSIsInJlbW90ZV9pZCIsInRhZ01hc2tzIiwiYWRkZWQiLCJ1cGRhdGVkIiwidXNlcl9pZCIsImNvbGxlY3Rpb24iLCJDb250YWN0cyIsIm1vZGVsIiwiQ29udGFjdFRDIl0sIm1hcHBpbmdzIjoiOzs7Ozs7O0FBR0E7Ozs7QUFDQTs7Ozs7O0FBRkE7QUFJTyxNQUFNQSwwQ0FBaUIsSUFBSSxtQkFBU0MsTUFBYixDQUM1QjtBQUNFQyxjQUFZO0FBQ1ZDLFVBQU1DLE1BREk7QUFFVkMsV0FBTztBQUZHLEdBRGQ7O0FBTUVDLGNBQVk7QUFDVkgsVUFBTUksTUFESTtBQUVWRixXQUFPO0FBRkcsR0FOZDs7QUFXRUcsV0FBUztBQUNQTCxVQUFNTSxJQURDO0FBRVBKLFdBQU87QUFGQSxHQVhYOztBQWdCRUssVUFBUTtBQUNOUCxVQUFNQyxNQURBO0FBRU5DLFdBQU87QUFGRCxHQWhCVjs7QUFxQkVNLGNBQVk7QUFDVlIsVUFBTUMsTUFESTtBQUVWQyxXQUFPO0FBRkcsR0FyQmQ7O0FBMEJFTyxRQUFNO0FBQ0pULFVBQU1DLE1BREY7QUFFSkMsV0FBTztBQUZILEdBMUJSOztBQStCRVEsaUJBQWU7QUFDYlYsVUFBTUMsTUFETztBQUViQyxXQUFPO0FBRk0sR0EvQmpCOztBQW9DRVMsYUFBVztBQUNUWCxVQUFNQyxNQURHO0FBRVRDLFdBQU87QUFGRSxHQXBDYjs7QUF5Q0VVLFlBQVU7QUFDUkMsV0FBTztBQUNMYixZQUFNLENBQUNDLE1BQUQsQ0FERDtBQUVMQyxhQUFPO0FBRkY7QUFEQyxHQXpDWjs7QUFnREVZLFdBQVM7QUFDUGQsVUFBTU0sSUFEQztBQUVQSixXQUFPO0FBRkEsR0FoRFg7O0FBcURFYSxXQUFTO0FBQ1BmLFVBQU1JO0FBQ047QUFGTztBQXJEWCxDQUQ0QixFQTJENUI7QUFDRVksY0FBWTtBQURkLENBM0Q0QixDQUF2Qjs7QUFpRUEsTUFBTUMsOEJBQVcsbUJBQVNDLEtBQVQsQ0FBZSxVQUFmLEVBQTJCckIsY0FBM0IsQ0FBakI7O0FBRUEsTUFBTXNCLGdDQUFZLG9CQUFvQkYsUUFBcEIsQ0FBbEIiLCJmaWxlIjoiY29udGFjdHMuanMiLCJzb3VyY2VSb290IjoiL2FwcC9zY2hlbWEvbW9kZWxzIiwic291cmNlc0NvbnRlbnQiOlsiLyogQGZsb3cgKi9cblxuLy8gVE9ETzogRklYWFhcbmltcG9ydCBtb25nb29zZSBmcm9tICdtb25nb29zZSc7XG5pbXBvcnQgY29tcG9zZVdpdGhNb25nb29zZSBmcm9tICdncmFwaHFsLWNvbXBvc2UtbW9uZ29vc2Uvbm9kZTgnO1xuXG5leHBvcnQgY29uc3QgQ29udGFjdHNTY2hlbWEgPSBuZXcgbW9uZ29vc2UuU2NoZW1hKFxuICB7XG4gICAgYXZhdGFyX3VybDoge1xuICAgICAgdHlwZTogU3RyaW5nLFxuICAgICAgaW5kZXg6IGZhbHNlXG4gICAgfSxcbiAgICBcbiAgICBjb25uZWN0aW9uOiB7XG4gICAgICB0eXBlOiBCdWZmZXIsXG4gICAgICBpbmRleDogZmFsc2VcbiAgICB9LFxuICAgIFxuICAgIGNyZWF0ZWQ6IHtcbiAgICAgIHR5cGU6IERhdGUsXG4gICAgICBpbmRleDogZmFsc2VcbiAgICB9LFxuICAgIFxuICAgIGhhbmRsZToge1xuICAgICAgdHlwZTogU3RyaW5nLFxuICAgICAgaW5kZXg6IGZhbHNlXG4gICAgfSxcbiAgICBcbiAgICBpZGVudGlmaWVyOiB7XG4gICAgICB0eXBlOiBTdHJpbmcsXG4gICAgICBpbmRleDogZmFsc2VcbiAgICB9LFxuICAgIFxuICAgIG5hbWU6IHtcbiAgICAgIHR5cGU6IFN0cmluZyxcbiAgICAgIGluZGV4OiBmYWxzZVxuICAgIH0sXG4gICAgXG4gICAgcHJvdmlkZXJfbmFtZToge1xuICAgICAgdHlwZTogU3RyaW5nLFxuICAgICAgaW5kZXg6IGZhbHNlXG4gICAgfSxcbiAgICBcbiAgICByZW1vdGVfaWQ6IHtcbiAgICAgIHR5cGU6IFN0cmluZyxcbiAgICAgIGluZGV4OiBmYWxzZVxuICAgIH0sXG4gICAgXG4gICAgdGFnTWFza3M6IHtcbiAgICAgIGFkZGVkOiB7XG4gICAgICAgIHR5cGU6IFtTdHJpbmddLFxuICAgICAgICBpbmRleDogZmFsc2VcbiAgICAgIH0sXG4gICAgfSxcbiAgICBcbiAgICB1cGRhdGVkOiB7XG4gICAgICB0eXBlOiBEYXRlLFxuICAgICAgaW5kZXg6IGZhbHNlXG4gICAgfSxcbiAgICBcbiAgICB1c2VyX2lkOiB7XG4gICAgICB0eXBlOiBCdWZmZXIsXG4gICAgICAvL2luZGV4OiBmYWxzZVxuICAgIH0sXG4gIH0sXG4gIHtcbiAgICBjb2xsZWN0aW9uOiAnY29udGFjdHMnLFxuICB9XG4pO1xuICBcblxuZXhwb3J0IGNvbnN0IENvbnRhY3RzID0gbW9uZ29vc2UubW9kZWwoJ0NvbnRhY3RzJywgQ29udGFjdHNTY2hlbWEpO1xuXG5leHBvcnQgY29uc3QgQ29udGFjdFRDID0gY29tcG9zZVdpdGhNb25nb29zZShDb250YWN0cyk7XG5cbiJdfQ==",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "contacts.js"
      ],
      "names": [
        "ContactsSchema",
        "Schema",
        "avatar_url",
        "type",
        "String",
        "index",
        "connection",
        "Buffer",
        "created",
        "Date",
        "handle",
        "identifier",
        "name",
        "provider_name",
        "remote_id",
        "tagMasks",
        "added",
        "updated",
        "user_id",
        "collection",
        "Contacts",
        "model",
        "ContactTC"
      ],
      "mappings": ";;;;;;;AAGA;;;;AACA;;;;;;AAFA;AAIO,MAAMA,0CAAiB,IAAI,mBAASC,MAAb,CAC5B;AACEC,cAAY;AACVC,UAAMC,MADI;AAEVC,WAAO;AAFG,GADd;;AAMEC,cAAY;AACVH,UAAMI,MADI;AAEVF,WAAO;AAFG,GANd;;AAWEG,WAAS;AACPL,UAAMM,IADC;AAEPJ,WAAO;AAFA,GAXX;;AAgBEK,UAAQ;AACNP,UAAMC,MADA;AAENC,WAAO;AAFD,GAhBV;;AAqBEM,cAAY;AACVR,UAAMC,MADI;AAEVC,WAAO;AAFG,GArBd;;AA0BEO,QAAM;AACJT,UAAMC,MADF;AAEJC,WAAO;AAFH,GA1BR;;AA+BEQ,iBAAe;AACbV,UAAMC,MADO;AAEbC,WAAO;AAFM,GA/BjB;;AAoCES,aAAW;AACTX,UAAMC,MADG;AAETC,WAAO;AAFE,GApCb;;AAyCEU,YAAU;AACRC,WAAO;AACLb,YAAM,CAACC,MAAD,CADD;AAELC,aAAO;AAFF;AADC,GAzCZ;;AAgDEY,WAAS;AACPd,UAAMM,IADC;AAEPJ,WAAO;AAFA,GAhDX;;AAqDEa,WAAS;AACPf,UAAMI;AACN;AAFO;AArDX,CAD4B,EA2D5B;AACEY,cAAY;AADd,CA3D4B,CAAvB;;AAiEA,MAAMC,8BAAW,mBAASC,KAAT,CAAe,UAAf,EAA2BrB,cAA3B,CAAjB;;AAEA,MAAMsB,gCAAY,oBAAoBF,QAApB,CAAlB",
      "file": "contacts.js",
      "sourceRoot": "/app/schema/models",
      "sourcesContent": [
        "/* @flow */\n\n// TODO: FIXXX\nimport mongoose from 'mongoose';\nimport composeWithMongoose from 'graphql-compose-mongoose/node8';\n\nexport const ContactsSchema = new mongoose.Schema(\n  {\n    avatar_url: {\n      type: String,\n      index: false\n    },\n    \n    connection: {\n      type: Buffer,\n      index: false\n    },\n    \n    created: {\n      type: Date,\n      index: false\n    },\n    \n    handle: {\n      type: String,\n      index: false\n    },\n    \n    identifier: {\n      type: String,\n      index: false\n    },\n    \n    name: {\n      type: String,\n      index: false\n    },\n    \n    provider_name: {\n      type: String,\n      index: false\n    },\n    \n    remote_id: {\n      type: String,\n      index: false\n    },\n    \n    tagMasks: {\n      added: {\n        type: [String],\n        index: false\n      },\n    },\n    \n    updated: {\n      type: Date,\n      index: false\n    },\n    \n    user_id: {\n      type: Buffer,\n      //index: false\n    },\n  },\n  {\n    collection: 'contacts',\n  }\n);\n  \n\nexport const Contacts = mongoose.model('Contacts', ContactsSchema);\n\nexport const ContactTC = composeWithMongoose(Contacts);\n\n"
      ]
    },
    "mtime": 1521506027994
  },
  "{\"filename\":\"/app/schema/models/content.js\",\"env\":{},\"retainLines\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"presets\":[],\"plugins\":[[[],null],[[],null],[[],{\"loose\":false}],[[],{\"spec\":false,\"loose\":false}],[[],{\"spec\":false,\"loose\":false}],[[],{\"spec\":false,\"loose\":false}],[[],{\"spec\":false,\"loose\":false}],[[],{\"spec\":false,\"loose\":false}],[[],{\"spec\":false,\"loose\":false}]],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"minified\":false,\"sourceRoot\":\"/app/schema/models\",\"babelrc\":true,\"sourceType\":\"module\",\"moduleIds\":false,\"passPerPreset\":false,\"parserOpts\":false,\"generatorOpts\":false}:6.26.0": {
    "metadata": {
      "usedHelpers": [
        "interopRequireDefault"
      ],
      "marked": [],
      "modules": {
        "imports": [
          {
            "source": "mongoose",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "mongoose"
              }
            ]
          },
          {
            "source": "graphql-compose-mongoose/node8",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "composeWithMongoose"
              }
            ]
          }
        ],
        "exports": {
          "exported": [
            "ContentSchema",
            "Content",
            "ContentTC"
          ],
          "specifiers": [
            {
              "kind": "local",
              "local": "ContentSchema",
              "exported": "ContentSchema"
            },
            {
              "kind": "local",
              "local": "Content",
              "exported": "Content"
            },
            {
              "kind": "local",
              "local": "ContentTC",
              "exported": "ContentTC"
            }
          ]
        }
      }
    },
    "options": {
      "filename": "/app/schema/models/content.js",
      "filenameRelative": "/app/schema/models/content.js",
      "env": {},
      "retainLines": false,
      "highlightCode": true,
      "suppressDeprecationMessages": false,
      "presets": [],
      "plugins": [
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ]
      ],
      "ignore": [],
      "code": true,
      "metadata": true,
      "ast": false,
      "comments": true,
      "compact": "auto",
      "minified": false,
      "sourceMaps": "both",
      "sourceMapTarget": "content.js",
      "sourceFileName": "content.js",
      "sourceRoot": "/app/schema/models",
      "babelrc": false,
      "sourceType": "module",
      "moduleRoot": "/app/schema/models",
      "moduleIds": false,
      "passPerPreset": false,
      "parserOpts": false,
      "generatorOpts": false,
      "basename": "content"
    },
    "ignored": false,
    "code": "'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.ContentTC = exports.Content = exports.ContentSchema = undefined;\n\nvar _mongoose = require('mongoose');\n\nvar _mongoose2 = _interopRequireDefault(_mongoose);\n\nvar _node = require('graphql-compose-mongoose/node8');\n\nvar _node2 = _interopRequireDefault(_node);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nconst ContentSchema = exports.ContentSchema = new _mongoose2.default.Schema({\n  connection: {\n    type: Buffer,\n    index: false\n  },\n  created: {\n    type: Date,\n    index: false\n  },\n  embed_content: {\n    type: String,\n    index: false\n  },\n  embed_format: {\n    type: String,\n    index: false\n  },\n  embed_thumbnail: {\n    type: String,\n    index: false\n  },\n  embeded_format: {\n    type: String,\n    index: false\n  },\n  identifier: {\n    type: String,\n    index: false\n  },\n\n  mimetype: {\n    type: String,\n    index: false\n  },\n\n  owner: {\n    type: String,\n    index: false\n  },\n\n  provider_name: {\n    type: String,\n    index: false\n  },\n\n  remote_id: {\n    type: String,\n    index: false\n  },\n  tagMasks: {\n    source: {\n      type: [String],\n      index: false\n    }\n  },\n\n  text: {\n    type: String,\n    index: false\n  },\n\n  thumbnail: {\n    type: String,\n    index: false\n  },\n\n  title: {\n    type: String,\n    index: false\n  },\n\n  type: { // name clash?\n    type: undefined, // String\n    index: false\n  },\n\n  updated: {\n    type: Date,\n    index: false\n  },\n\n  url: {\n    type: String,\n    index: false\n  },\n\n  user_id: {\n    type: Buffer,\n    index: false\n  }\n}, {\n  collection: 'content'\n});\n\nconst Content = exports.Content = _mongoose2.default.model('Content', ContentSchema);\n\nconst ContentTC = exports.ContentTC = (0, _node2.default)(Content);\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNvbnRlbnQuanMiXSwibmFtZXMiOlsiQ29udGVudFNjaGVtYSIsIlNjaGVtYSIsImNvbm5lY3Rpb24iLCJ0eXBlIiwiQnVmZmVyIiwiaW5kZXgiLCJjcmVhdGVkIiwiRGF0ZSIsImVtYmVkX2NvbnRlbnQiLCJTdHJpbmciLCJlbWJlZF9mb3JtYXQiLCJlbWJlZF90aHVtYm5haWwiLCJlbWJlZGVkX2Zvcm1hdCIsImlkZW50aWZpZXIiLCJtaW1ldHlwZSIsIm93bmVyIiwicHJvdmlkZXJfbmFtZSIsInJlbW90ZV9pZCIsInRhZ01hc2tzIiwic291cmNlIiwidGV4dCIsInRodW1ibmFpbCIsInRpdGxlIiwidW5kZWZpbmVkIiwidXBkYXRlZCIsInVybCIsInVzZXJfaWQiLCJjb2xsZWN0aW9uIiwiQ29udGVudCIsIm1vZGVsIiwiQ29udGVudFRDIl0sIm1hcHBpbmdzIjoiOzs7Ozs7O0FBRUE7Ozs7QUFDQTs7Ozs7O0FBRU8sTUFBTUEsd0NBQWdCLElBQUksbUJBQVNDLE1BQWIsQ0FDM0I7QUFDRUMsY0FBWTtBQUNWQyxVQUFNQyxNQURJO0FBRVZDLFdBQU87QUFGRyxHQURkO0FBS0VDLFdBQVM7QUFDUEgsVUFBTUksSUFEQztBQUVQRixXQUFPO0FBRkEsR0FMWDtBQVNFRyxpQkFBZTtBQUNiTCxVQUFNTSxNQURPO0FBRWJKLFdBQU87QUFGTSxHQVRqQjtBQWFFSyxnQkFBYztBQUNaUCxVQUFNTSxNQURNO0FBRVpKLFdBQU87QUFGSyxHQWJoQjtBQWlCRU0sbUJBQWlCO0FBQ2ZSLFVBQU1NLE1BRFM7QUFFZkosV0FBTztBQUZRLEdBakJuQjtBQXFCRU8sa0JBQWdCO0FBQ2RULFVBQU1NLE1BRFE7QUFFZEosV0FBTztBQUZPLEdBckJsQjtBQXlCRVEsY0FBWTtBQUNWVixVQUFNTSxNQURJO0FBRVZKLFdBQU87QUFGRyxHQXpCZDs7QUE4QkVTLFlBQVU7QUFDUlgsVUFBTU0sTUFERTtBQUVSSixXQUFPO0FBRkMsR0E5Qlo7O0FBbUNFVSxTQUFPO0FBQ0xaLFVBQU1NLE1BREQ7QUFFTEosV0FBTztBQUZGLEdBbkNUOztBQXdDRVcsaUJBQWU7QUFDYmIsVUFBTU0sTUFETztBQUViSixXQUFPO0FBRk0sR0F4Q2pCOztBQTZDRVksYUFBVztBQUNUZCxVQUFNTSxNQURHO0FBRVRKLFdBQU87QUFGRSxHQTdDYjtBQWlERWEsWUFBVTtBQUNSQyxZQUFRO0FBQ05oQixZQUFNLENBQUNNLE1BQUQsQ0FEQTtBQUVOSixhQUFPO0FBRkQ7QUFEQSxHQWpEWjs7QUF3REVlLFFBQU07QUFDSmpCLFVBQU1NLE1BREY7QUFFSkosV0FBTztBQUZILEdBeERSOztBQTZERWdCLGFBQVc7QUFDVGxCLFVBQU1NLE1BREc7QUFFVEosV0FBTztBQUZFLEdBN0RiOztBQWtFRWlCLFNBQU87QUFDTG5CLFVBQU1NLE1BREQ7QUFFTEosV0FBTztBQUZGLEdBbEVUOztBQXdFRUYsUUFBTSxFQUFFO0FBQ05BLFVBQU1vQixTQURGLEVBQ2E7QUFDakJsQixXQUFPO0FBRkgsR0F4RVI7O0FBNkVFbUIsV0FBUztBQUNQckIsVUFBTUksSUFEQztBQUVQRixXQUFPO0FBRkEsR0E3RVg7O0FBa0ZFb0IsT0FBSztBQUNIdEIsVUFBTU0sTUFESDtBQUVISixXQUFPO0FBRkosR0FsRlA7O0FBdUZFcUIsV0FBUztBQUNQdkIsVUFBTUMsTUFEQztBQUVQQyxXQUFPO0FBRkE7QUF2RlgsQ0FEMkIsRUE2RjNCO0FBQ0VzQixjQUFZO0FBRGQsQ0E3RjJCLENBQXRCOztBQWtHQSxNQUFNQyw0QkFBVSxtQkFBU0MsS0FBVCxDQUFlLFNBQWYsRUFBMEI3QixhQUExQixDQUFoQjs7QUFFQSxNQUFNOEIsZ0NBQVksb0JBQW9CRixPQUFwQixDQUFsQiIsImZpbGUiOiJjb250ZW50LmpzIiwic291cmNlUm9vdCI6Ii9hcHAvc2NoZW1hL21vZGVscyIsInNvdXJjZXNDb250ZW50IjpbIi8qIEBmbG93ICovXG5cbmltcG9ydCBtb25nb29zZSBmcm9tICdtb25nb29zZSc7XG5pbXBvcnQgY29tcG9zZVdpdGhNb25nb29zZSBmcm9tICdncmFwaHFsLWNvbXBvc2UtbW9uZ29vc2Uvbm9kZTgnO1xuXG5leHBvcnQgY29uc3QgQ29udGVudFNjaGVtYSA9IG5ldyBtb25nb29zZS5TY2hlbWEoXG4gIHtcbiAgICBjb25uZWN0aW9uOiB7XG4gICAgICB0eXBlOiBCdWZmZXIsXG4gICAgICBpbmRleDogZmFsc2VcbiAgICB9LFxuICAgIGNyZWF0ZWQ6IHtcbiAgICAgIHR5cGU6IERhdGUsXG4gICAgICBpbmRleDogZmFsc2VcbiAgICB9LFxuICAgIGVtYmVkX2NvbnRlbnQ6IHtcbiAgICAgIHR5cGU6IFN0cmluZyxcbiAgICAgIGluZGV4OiBmYWxzZVxuICAgIH0sXG4gICAgZW1iZWRfZm9ybWF0OiB7XG4gICAgICB0eXBlOiBTdHJpbmcsXG4gICAgICBpbmRleDogZmFsc2VcbiAgICB9LFxuICAgIGVtYmVkX3RodW1ibmFpbDoge1xuICAgICAgdHlwZTogU3RyaW5nLFxuICAgICAgaW5kZXg6IGZhbHNlXG4gICAgfSxcbiAgICBlbWJlZGVkX2Zvcm1hdDoge1xuICAgICAgdHlwZTogU3RyaW5nLFxuICAgICAgaW5kZXg6IGZhbHNlXG4gICAgfSxcbiAgICBpZGVudGlmaWVyOiB7XG4gICAgICB0eXBlOiBTdHJpbmcsXG4gICAgICBpbmRleDogZmFsc2VcbiAgICB9LFxuICAgIFxuICAgIG1pbWV0eXBlOiB7XG4gICAgICB0eXBlOiBTdHJpbmcsXG4gICAgICBpbmRleDogZmFsc2VcbiAgICB9LFxuICAgIFxuICAgIG93bmVyOiB7XG4gICAgICB0eXBlOiBTdHJpbmcsXG4gICAgICBpbmRleDogZmFsc2VcbiAgICB9LFxuICAgIFxuICAgIHByb3ZpZGVyX25hbWU6IHtcbiAgICAgIHR5cGU6IFN0cmluZyxcbiAgICAgIGluZGV4OiBmYWxzZVxuICAgIH0sXG4gICAgXG4gICAgcmVtb3RlX2lkOiB7XG4gICAgICB0eXBlOiBTdHJpbmcsXG4gICAgICBpbmRleDogZmFsc2VcbiAgICB9LFxuICAgIHRhZ01hc2tzOiB7XG4gICAgICBzb3VyY2U6IHtcbiAgICAgICAgdHlwZTogW1N0cmluZ10sXG4gICAgICAgIGluZGV4OiBmYWxzZVxuICAgICAgfVxuICAgIH0sXG4gICAgXG4gICAgdGV4dDoge1xuICAgICAgdHlwZTogU3RyaW5nLFxuICAgICAgaW5kZXg6IGZhbHNlXG4gICAgfSxcbiAgICBcbiAgICB0aHVtYm5haWw6IHtcbiAgICAgIHR5cGU6IFN0cmluZyxcbiAgICAgIGluZGV4OiBmYWxzZVxuICAgIH0sXG4gICAgXG4gICAgdGl0bGU6IHtcbiAgICAgIHR5cGU6IFN0cmluZyxcbiAgICAgIGluZGV4OiBmYWxzZVxuICAgIH0sXG4gICAgXG4gICAgXG4gICAgdHlwZTogeyAvLyBuYW1lIGNsYXNoP1xuICAgICAgdHlwZTogdW5kZWZpbmVkLCAvLyBTdHJpbmdcbiAgICAgIGluZGV4OiBmYWxzZVxuICAgIH0sXG4gICAgXG4gICAgdXBkYXRlZDoge1xuICAgICAgdHlwZTogRGF0ZSxcbiAgICAgIGluZGV4OiBmYWxzZVxuICAgIH0sXG4gICAgXG4gICAgdXJsOiB7XG4gICAgICB0eXBlOiBTdHJpbmcsXG4gICAgICBpbmRleDogZmFsc2VcbiAgICB9LFxuICAgIFxuICAgIHVzZXJfaWQ6IHtcbiAgICAgIHR5cGU6IEJ1ZmZlcixcbiAgICAgIGluZGV4OiBmYWxzZVxuICAgIH0sXG4gIH0sXG4gIHtcbiAgICBjb2xsZWN0aW9uOiAnY29udGVudCcsXG4gIH1cbik7XG4gIFxuZXhwb3J0IGNvbnN0IENvbnRlbnQgPSBtb25nb29zZS5tb2RlbCgnQ29udGVudCcsIENvbnRlbnRTY2hlbWEpO1xuXG5leHBvcnQgY29uc3QgQ29udGVudFRDID0gY29tcG9zZVdpdGhNb25nb29zZShDb250ZW50KTtcblxuIl19",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "content.js"
      ],
      "names": [
        "ContentSchema",
        "Schema",
        "connection",
        "type",
        "Buffer",
        "index",
        "created",
        "Date",
        "embed_content",
        "String",
        "embed_format",
        "embed_thumbnail",
        "embeded_format",
        "identifier",
        "mimetype",
        "owner",
        "provider_name",
        "remote_id",
        "tagMasks",
        "source",
        "text",
        "thumbnail",
        "title",
        "undefined",
        "updated",
        "url",
        "user_id",
        "collection",
        "Content",
        "model",
        "ContentTC"
      ],
      "mappings": ";;;;;;;AAEA;;;;AACA;;;;;;AAEO,MAAMA,wCAAgB,IAAI,mBAASC,MAAb,CAC3B;AACEC,cAAY;AACVC,UAAMC,MADI;AAEVC,WAAO;AAFG,GADd;AAKEC,WAAS;AACPH,UAAMI,IADC;AAEPF,WAAO;AAFA,GALX;AASEG,iBAAe;AACbL,UAAMM,MADO;AAEbJ,WAAO;AAFM,GATjB;AAaEK,gBAAc;AACZP,UAAMM,MADM;AAEZJ,WAAO;AAFK,GAbhB;AAiBEM,mBAAiB;AACfR,UAAMM,MADS;AAEfJ,WAAO;AAFQ,GAjBnB;AAqBEO,kBAAgB;AACdT,UAAMM,MADQ;AAEdJ,WAAO;AAFO,GArBlB;AAyBEQ,cAAY;AACVV,UAAMM,MADI;AAEVJ,WAAO;AAFG,GAzBd;;AA8BES,YAAU;AACRX,UAAMM,MADE;AAERJ,WAAO;AAFC,GA9BZ;;AAmCEU,SAAO;AACLZ,UAAMM,MADD;AAELJ,WAAO;AAFF,GAnCT;;AAwCEW,iBAAe;AACbb,UAAMM,MADO;AAEbJ,WAAO;AAFM,GAxCjB;;AA6CEY,aAAW;AACTd,UAAMM,MADG;AAETJ,WAAO;AAFE,GA7Cb;AAiDEa,YAAU;AACRC,YAAQ;AACNhB,YAAM,CAACM,MAAD,CADA;AAENJ,aAAO;AAFD;AADA,GAjDZ;;AAwDEe,QAAM;AACJjB,UAAMM,MADF;AAEJJ,WAAO;AAFH,GAxDR;;AA6DEgB,aAAW;AACTlB,UAAMM,MADG;AAETJ,WAAO;AAFE,GA7Db;;AAkEEiB,SAAO;AACLnB,UAAMM,MADD;AAELJ,WAAO;AAFF,GAlET;;AAwEEF,QAAM,EAAE;AACNA,UAAMoB,SADF,EACa;AACjBlB,WAAO;AAFH,GAxER;;AA6EEmB,WAAS;AACPrB,UAAMI,IADC;AAEPF,WAAO;AAFA,GA7EX;;AAkFEoB,OAAK;AACHtB,UAAMM,MADH;AAEHJ,WAAO;AAFJ,GAlFP;;AAuFEqB,WAAS;AACPvB,UAAMC,MADC;AAEPC,WAAO;AAFA;AAvFX,CAD2B,EA6F3B;AACEsB,cAAY;AADd,CA7F2B,CAAtB;;AAkGA,MAAMC,4BAAU,mBAASC,KAAT,CAAe,SAAf,EAA0B7B,aAA1B,CAAhB;;AAEA,MAAM8B,gCAAY,oBAAoBF,OAApB,CAAlB",
      "file": "content.js",
      "sourceRoot": "/app/schema/models",
      "sourcesContent": [
        "/* @flow */\n\nimport mongoose from 'mongoose';\nimport composeWithMongoose from 'graphql-compose-mongoose/node8';\n\nexport const ContentSchema = new mongoose.Schema(\n  {\n    connection: {\n      type: Buffer,\n      index: false\n    },\n    created: {\n      type: Date,\n      index: false\n    },\n    embed_content: {\n      type: String,\n      index: false\n    },\n    embed_format: {\n      type: String,\n      index: false\n    },\n    embed_thumbnail: {\n      type: String,\n      index: false\n    },\n    embeded_format: {\n      type: String,\n      index: false\n    },\n    identifier: {\n      type: String,\n      index: false\n    },\n    \n    mimetype: {\n      type: String,\n      index: false\n    },\n    \n    owner: {\n      type: String,\n      index: false\n    },\n    \n    provider_name: {\n      type: String,\n      index: false\n    },\n    \n    remote_id: {\n      type: String,\n      index: false\n    },\n    tagMasks: {\n      source: {\n        type: [String],\n        index: false\n      }\n    },\n    \n    text: {\n      type: String,\n      index: false\n    },\n    \n    thumbnail: {\n      type: String,\n      index: false\n    },\n    \n    title: {\n      type: String,\n      index: false\n    },\n    \n    \n    type: { // name clash?\n      type: undefined, // String\n      index: false\n    },\n    \n    updated: {\n      type: Date,\n      index: false\n    },\n    \n    url: {\n      type: String,\n      index: false\n    },\n    \n    user_id: {\n      type: Buffer,\n      index: false\n    },\n  },\n  {\n    collection: 'content',\n  }\n);\n  \nexport const Content = mongoose.model('Content', ContentSchema);\n\nexport const ContentTC = composeWithMongoose(Content);\n\n"
      ]
    },
    "mtime": 1521506043994
  },
  "{\"filename\":\"/app/schema/types/uuid.js\",\"env\":{},\"retainLines\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"presets\":[],\"plugins\":[[[],null],[[],null],[[],{\"loose\":false}],[[],{\"spec\":false,\"loose\":false}],[[],{\"spec\":false,\"loose\":false}],[[],{\"spec\":false,\"loose\":false}],[[],{\"spec\":false,\"loose\":false}],[[],{\"spec\":false,\"loose\":false}],[[],{\"spec\":false,\"loose\":false}]],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"minified\":false,\"sourceRoot\":\"/app/schema/types\",\"babelrc\":true,\"sourceType\":\"module\",\"moduleIds\":false,\"passPerPreset\":false,\"parserOpts\":false,\"generatorOpts\":false}:6.26.0": {
    "metadata": {
      "usedHelpers": [],
      "marked": [],
      "modules": {
        "imports": [
          {
            "source": "graphql",
            "imported": [
              "GraphQLScalarType",
              "GraphQLError",
              "Kind"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "GraphQLScalarType",
                "local": "GraphQLScalarType"
              },
              {
                "kind": "named",
                "imported": "GraphQLError",
                "local": "GraphQLError"
              },
              {
                "kind": "named",
                "imported": "Kind",
                "local": "Kind"
              }
            ]
          }
        ],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      }
    },
    "options": {
      "filename": "/app/schema/types/uuid.js",
      "filenameRelative": "/app/schema/types/uuid.js",
      "env": {},
      "retainLines": false,
      "highlightCode": true,
      "suppressDeprecationMessages": false,
      "presets": [],
      "plugins": [
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ]
      ],
      "ignore": [],
      "code": true,
      "metadata": true,
      "ast": false,
      "comments": true,
      "compact": "auto",
      "minified": false,
      "sourceMaps": "both",
      "sourceMapTarget": "uuid.js",
      "sourceFileName": "uuid.js",
      "sourceRoot": "/app/schema/types",
      "babelrc": false,
      "sourceType": "module",
      "moduleRoot": "/app/schema/types",
      "moduleIds": false,
      "passPerPreset": false,
      "parserOpts": false,
      "generatorOpts": false,
      "basename": "uuid"
    },
    "ignored": false,
    "code": "'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _graphql = require('graphql');\n\nfunction coerceBuffer(value) {\n  if (!(value instanceof Buffer)) {\n    throw new TypeError('Field error: value is not an instance of Buffer');\n  }\n\n  return value;\n} /*  strict */\n\nexports.default = new _graphql.GraphQLScalarType({\n  name: 'UUID',\n  serialize: coerceBuffer,\n  parseValue: coerceBuffer,\n  parseLiteral(ast) {\n    //     if (ast.kind !== Kind.STRING) {\n    //       throw new GraphQLError(\n    //         `Query error: Can only parse strings to buffers but got a: ${ast.kind}`,\n    //         [ast]\n    //       );\n    //     }\n\n    //     const result = Buffer.from(ast.value, 'hex');\n\n    //     if (ast.value !== result.toString()) {\n    //       throw new GraphQLError('Query error: Invalid buffer encoding', [ast]);\n    //     }\n\n    return ast.value;\n  }\n});\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInV1aWQuanMiXSwibmFtZXMiOlsiY29lcmNlQnVmZmVyIiwidmFsdWUiLCJCdWZmZXIiLCJUeXBlRXJyb3IiLCJuYW1lIiwic2VyaWFsaXplIiwicGFyc2VWYWx1ZSIsInBhcnNlTGl0ZXJhbCIsImFzdCJdLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBRUE7O0FBRUEsU0FBU0EsWUFBVCxDQUFzQkMsS0FBdEIsRUFBNkI7QUFDM0IsTUFBSSxFQUFFQSxpQkFBaUJDLE1BQW5CLENBQUosRUFBZ0M7QUFDOUIsVUFBTSxJQUFJQyxTQUFKLENBQWMsaURBQWQsQ0FBTjtBQUNEOztBQUVELFNBQU9GLEtBQVA7QUFDRCxDLENBVkQ7O2tCQVllLCtCQUFzQjtBQUNuQ0csUUFBTSxNQUQ2QjtBQUVuQ0MsYUFBV0wsWUFGd0I7QUFHbkNNLGNBQVlOLFlBSHVCO0FBSW5DTyxlQUFhQyxHQUFiLEVBQWtCO0FBQ3BCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUksV0FBT0EsSUFBSVAsS0FBWDtBQUNEO0FBbkJrQyxDQUF0QixDIiwiZmlsZSI6InV1aWQuanMiLCJzb3VyY2VSb290IjoiL2FwcC9zY2hlbWEvdHlwZXMiLCJzb3VyY2VzQ29udGVudCI6WyIvKiBAZmxvdyBzdHJpY3QgKi9cblxuaW1wb3J0IHsgR3JhcGhRTFNjYWxhclR5cGUsIEdyYXBoUUxFcnJvciwgS2luZCB9IGZyb20gJ2dyYXBocWwnO1xuXG5mdW5jdGlvbiBjb2VyY2VCdWZmZXIodmFsdWUpIHtcbiAgaWYgKCEodmFsdWUgaW5zdGFuY2VvZiBCdWZmZXIpKSB7XG4gICAgdGhyb3cgbmV3IFR5cGVFcnJvcignRmllbGQgZXJyb3I6IHZhbHVlIGlzIG5vdCBhbiBpbnN0YW5jZSBvZiBCdWZmZXInKTtcbiAgfVxuXG4gIHJldHVybiB2YWx1ZVxufVxuXG5leHBvcnQgZGVmYXVsdCBuZXcgR3JhcGhRTFNjYWxhclR5cGUoe1xuICBuYW1lOiAnVVVJRCcsXG4gIHNlcmlhbGl6ZTogY29lcmNlQnVmZmVyLFxuICBwYXJzZVZhbHVlOiBjb2VyY2VCdWZmZXIsXG4gIHBhcnNlTGl0ZXJhbChhc3QpIHtcbi8vICAgICBpZiAoYXN0LmtpbmQgIT09IEtpbmQuU1RSSU5HKSB7XG4vLyAgICAgICB0aHJvdyBuZXcgR3JhcGhRTEVycm9yKFxuLy8gICAgICAgICBgUXVlcnkgZXJyb3I6IENhbiBvbmx5IHBhcnNlIHN0cmluZ3MgdG8gYnVmZmVycyBidXQgZ290IGE6ICR7YXN0LmtpbmR9YCxcbi8vICAgICAgICAgW2FzdF1cbi8vICAgICAgICk7XG4vLyAgICAgfVxuXG4vLyAgICAgY29uc3QgcmVzdWx0ID0gQnVmZmVyLmZyb20oYXN0LnZhbHVlLCAnaGV4Jyk7XG5cbi8vICAgICBpZiAoYXN0LnZhbHVlICE9PSByZXN1bHQudG9TdHJpbmcoKSkge1xuLy8gICAgICAgdGhyb3cgbmV3IEdyYXBoUUxFcnJvcignUXVlcnkgZXJyb3I6IEludmFsaWQgYnVmZmVyIGVuY29kaW5nJywgW2FzdF0pO1xuLy8gICAgIH1cblxuICAgIHJldHVybiBhc3QudmFsdWU7XG4gIH0sXG59KTsiXX0=",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "uuid.js"
      ],
      "names": [
        "coerceBuffer",
        "value",
        "Buffer",
        "TypeError",
        "name",
        "serialize",
        "parseValue",
        "parseLiteral",
        "ast"
      ],
      "mappings": ";;;;;;AAEA;;AAEA,SAASA,YAAT,CAAsBC,KAAtB,EAA6B;AAC3B,MAAI,EAAEA,iBAAiBC,MAAnB,CAAJ,EAAgC;AAC9B,UAAM,IAAIC,SAAJ,CAAc,iDAAd,CAAN;AACD;;AAED,SAAOF,KAAP;AACD,C,CAVD;;kBAYe,+BAAsB;AACnCG,QAAM,MAD6B;AAEnCC,aAAWL,YAFwB;AAGnCM,cAAYN,YAHuB;AAInCO,eAAaC,GAAb,EAAkB;AACpB;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEI,WAAOA,IAAIP,KAAX;AACD;AAnBkC,CAAtB,C",
      "file": "uuid.js",
      "sourceRoot": "/app/schema/types",
      "sourcesContent": [
        "/* @flow strict */\n\nimport { GraphQLScalarType, GraphQLError, Kind } from 'graphql';\n\nfunction coerceBuffer(value) {\n  if (!(value instanceof Buffer)) {\n    throw new TypeError('Field error: value is not an instance of Buffer');\n  }\n\n  return value\n}\n\nexport default new GraphQLScalarType({\n  name: 'UUID',\n  serialize: coerceBuffer,\n  parseValue: coerceBuffer,\n  parseLiteral(ast) {\n//     if (ast.kind !== Kind.STRING) {\n//       throw new GraphQLError(\n//         `Query error: Can only parse strings to buffers but got a: ${ast.kind}`,\n//         [ast]\n//       );\n//     }\n\n//     const result = Buffer.from(ast.value, 'hex');\n\n//     if (ast.value !== result.toString()) {\n//       throw new GraphQLError('Query error: Invalid buffer encoding', [ast]);\n//     }\n\n    return ast.value;\n  },\n});"
      ]
    },
    "mtime": 1521582338016
  }
}